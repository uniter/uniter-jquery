(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.demoApp=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){module.exports={"php/app.php":"<?php\n\nnamespace Demo;\n\nuse Demo\\Component\\NavMenuComponent;\n\nspl_autoload_register(function ($class) {\n    $class = 'php/src/' . str_replace(\"\\\\\", '/', $class) . '.php';\n\n    require_once $class;\n});\n\n$navMenu = new NavMenuComponent(\n    $jQuery,\n    $jQuery('body'),\n    $jQuery('.primary-nav')\n);\n\n$navMenu->initialize();\n","php/src/Demo/Component/NavMenuComponent.php":"<?php\n/*\n * Demo of UI interaction with jQuery+Uniter\n *\n * MIT license.\n */\n\nnamespace Demo\\Component;\n\nuse Demo\\PhpQuery\\PhpQuery;\n\nclass NavMenuComponent\n{\n    const VISIBLE_CLASS = 'submenu--visible';\n\n    /**\n     * @var mixed\n     */\n    private $body;\n\n    /**\n     * @var PhpQuery\n     */\n    private $jQuery;\n\n    /**\n     * @var mixed\n     */\n    private $menu;\n\n    public function __construct($jQuery, $body, $menu)\n    {\n        $this->body = $body;\n        $this->jQuery = $jQuery;\n        $this->menu = $menu;\n    }\n\n    public function initialize()\n    {\n        $component = $this;\n        $jQuery = $this->jQuery;\n        $openSubmenu = $jQuery();\n        $closeOpenSubmenu = function () use ($component, $jQuery, &$openSubmenu) {\n            $openSubmenu->parents('[data-submenu]')->each(function () use ($component, $jQuery) {\n                $selector = $jQuery($this)->data('submenu');\n                $submenu = $component->menu->find($selector);\n\n                $submenu->removeClass(self::VISIBLE_CLASS);\n            });\n\n            $openSubmenu->removeClass(self::VISIBLE_CLASS);\n        };\n\n        $this->menu->on(\n            'click',\n            '[data-submenu]',\n            function ($event) use ($component, $jQuery, &$openSubmenu, $closeOpenSubmenu) {\n                $selector = $jQuery($this)->data('submenu');\n                $submenu = $component->menu->find($selector);\n\n                if ($openSubmenu->length && !$jQuery->contains($openSubmenu->{0}, $submenu->{0})) {\n                    $closeOpenSubmenu();\n                }\n\n                $submenu->addClass(self::VISIBLE_CLASS);\n                $openSubmenu = $submenu;\n\n                $event->stopPropagation();\n                $event->preventDefault();\n            }\n        );\n\n        $this->body->click($closeOpenSubmenu);\n    }\n}\n"}},{}],2:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;var splitPath=function(filename){return splitPathRe.exec(filename).slice(1)};exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p}).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){var result=splitPath(path),root=result[0],dir=result[1];if(!root&&!dir){return"."}if(dir){dir=dir.substr(0,dir.length-1)}return root+dir};exports.basename=function(path,ext){var f=splitPath(path)[2];if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){return splitPath(path)[3]};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:3}],3:[function(require,module,exports){var process=module.exports={};var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=setTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){currentQueue[queueIndex].run()}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;clearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){setTimeout(drainQueue,0)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],4:[function(require,module,exports){(function(global,factory){if(typeof module==="object"&&typeof module.exports==="object"){module.exports=global.document?factory(global,true):function(w){if(!w.document){throw new Error("jQuery requires a window with a document")}return factory(w)}}else{factory(global)}})(typeof window!=="undefined"?window:this,function(window,noGlobal){var arr=[];var slice=arr.slice;var concat=arr.concat;var push=arr.push;var indexOf=arr.indexOf;var class2type={};var toString=class2type.toString;var hasOwn=class2type.hasOwnProperty;var support={};var document=window.document,version="2.1.4",jQuery=function(selector,context){return new jQuery.fn.init(selector,context)},rtrim=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,rmsPrefix=/^-ms-/,rdashAlpha=/-([\da-z])/gi,fcamelCase=function(all,letter){return letter.toUpperCase()};jQuery.fn=jQuery.prototype={jquery:version,constructor:jQuery,selector:"",length:0,toArray:function(){return slice.call(this)},get:function(num){return num!=null?num<0?this[num+this.length]:this[num]:slice.call(this)},pushStack:function(elems){var ret=jQuery.merge(this.constructor(),elems);ret.prevObject=this;ret.context=this.context;return ret},each:function(callback,args){return jQuery.each(this,callback,args)},map:function(callback){return this.pushStack(jQuery.map(this,function(elem,i){return callback.call(elem,i,elem)}))},slice:function(){return this.pushStack(slice.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(i){var len=this.length,j=+i+(i<0?len:0);return this.pushStack(j>=0&&j<len?[this[j]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:push,sort:arr.sort,splice:arr.splice};jQuery.extend=jQuery.fn.extend=function(){var options,name,src,copy,copyIsArray,clone,target=arguments[0]||{},i=1,length=arguments.length,deep=false;if(typeof target==="boolean"){deep=target;target=arguments[i]||{};i++}if(typeof target!=="object"&&!jQuery.isFunction(target)){target={}}if(i===length){target=this;i--}for(;i<length;i++){if((options=arguments[i])!=null){for(name in options){src=target[name];copy=options[name];if(target===copy){continue}if(deep&&copy&&(jQuery.isPlainObject(copy)||(copyIsArray=jQuery.isArray(copy)))){if(copyIsArray){copyIsArray=false;clone=src&&jQuery.isArray(src)?src:[]}else{clone=src&&jQuery.isPlainObject(src)?src:{}}target[name]=jQuery.extend(deep,clone,copy)}else if(copy!==undefined){target[name]=copy}}}}return target};jQuery.extend({expando:"jQuery"+(version+Math.random()).replace(/\D/g,""),isReady:true,error:function(msg){throw new Error(msg)},noop:function(){},isFunction:function(obj){return jQuery.type(obj)==="function"},isArray:Array.isArray,isWindow:function(obj){return obj!=null&&obj===obj.window},isNumeric:function(obj){return!jQuery.isArray(obj)&&obj-parseFloat(obj)+1>=0},isPlainObject:function(obj){if(jQuery.type(obj)!=="object"||obj.nodeType||jQuery.isWindow(obj)){return false}if(obj.constructor&&!hasOwn.call(obj.constructor.prototype,"isPrototypeOf")){return false}return true},isEmptyObject:function(obj){var name;for(name in obj){return false}return true},type:function(obj){if(obj==null){return obj+""}return typeof obj==="object"||typeof obj==="function"?class2type[toString.call(obj)]||"object":typeof obj},globalEval:function(code){var script,indirect=eval;code=jQuery.trim(code);if(code){if(code.indexOf("use strict")===1){script=document.createElement("script");script.text=code;document.head.appendChild(script).parentNode.removeChild(script)}else{indirect(code)}}},camelCase:function(string){return string.replace(rmsPrefix,"ms-").replace(rdashAlpha,fcamelCase)},nodeName:function(elem,name){return elem.nodeName&&elem.nodeName.toLowerCase()===name.toLowerCase()},each:function(obj,callback,args){var value,i=0,length=obj.length,isArray=isArraylike(obj);if(args){if(isArray){for(;i<length;i++){value=callback.apply(obj[i],args);if(value===false){break}}}else{for(i in obj){value=callback.apply(obj[i],args);if(value===false){break}}}}else{if(isArray){for(;i<length;i++){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}else{for(i in obj){value=callback.call(obj[i],i,obj[i]);if(value===false){break}}}}return obj},trim:function(text){return text==null?"":(text+"").replace(rtrim,"")},makeArray:function(arr,results){var ret=results||[];if(arr!=null){if(isArraylike(Object(arr))){jQuery.merge(ret,typeof arr==="string"?[arr]:arr)}else{push.call(ret,arr)}}return ret},inArray:function(elem,arr,i){return arr==null?-1:indexOf.call(arr,elem,i)},merge:function(first,second){var len=+second.length,j=0,i=first.length;for(;j<len;j++){first[i++]=second[j]}first.length=i;return first},grep:function(elems,callback,invert){var callbackInverse,matches=[],i=0,length=elems.length,callbackExpect=!invert;for(;i<length;i++){callbackInverse=!callback(elems[i],i);if(callbackInverse!==callbackExpect){matches.push(elems[i])}}return matches},map:function(elems,callback,arg){var value,i=0,length=elems.length,isArray=isArraylike(elems),ret=[];if(isArray){for(;i<length;i++){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}else{for(i in elems){value=callback(elems[i],i,arg);if(value!=null){ret.push(value)}}}return concat.apply([],ret)},guid:1,proxy:function(fn,context){var tmp,args,proxy;if(typeof context==="string"){tmp=fn[context];context=fn;fn=tmp}if(!jQuery.isFunction(fn)){return undefined}args=slice.call(arguments,2);proxy=function(){return fn.apply(context||this,args.concat(slice.call(arguments)))};proxy.guid=fn.guid=fn.guid||jQuery.guid++;return proxy},now:Date.now,support:support});jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(i,name){class2type["[object "+name+"]"]=name.toLowerCase()});function isArraylike(obj){var length="length"in obj&&obj.length,type=jQuery.type(obj);if(type==="function"||jQuery.isWindow(obj)){return false}if(obj.nodeType===1&&length){return true}return type==="array"||length===0||typeof length==="number"&&length>0&&length-1 in obj}var Sizzle=function(window){var i,support,Expr,getText,isXML,tokenize,compile,select,outermostContext,sortInput,hasDuplicate,setDocument,document,docElem,documentIsHTML,rbuggyQSA,rbuggyMatches,matches,contains,expando="sizzle"+1*new Date,preferredDoc=window.document,dirruns=0,done=0,classCache=createCache(),tokenCache=createCache(),compilerCache=createCache(),sortOrder=function(a,b){if(a===b){hasDuplicate=true}return 0},MAX_NEGATIVE=1<<31,hasOwn={}.hasOwnProperty,arr=[],pop=arr.pop,push_native=arr.push,push=arr.push,slice=arr.slice,indexOf=function(list,elem){var i=0,len=list.length;for(;i<len;i++){if(list[i]===elem){return i}}return-1},booleans="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",whitespace="[\\x20\\t\\r\\n\\f]",characterEncoding="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",identifier=characterEncoding.replace("w","w#"),attributes="\\["+whitespace+"*("+characterEncoding+")(?:"+whitespace+"*([*^$|!~]?=)"+whitespace+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+identifier+"))|)"+whitespace+"*\\]",pseudos=":("+characterEncoding+")(?:\\(("+"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|"+"((?:\\\\.|[^\\\\()[\\]]|"+attributes+")*)|"+".*"+")\\)|)",rwhitespace=new RegExp(whitespace+"+","g"),rtrim=new RegExp("^"+whitespace+"+|((?:^|[^\\\\])(?:\\\\.)*)"+whitespace+"+$","g"),rcomma=new RegExp("^"+whitespace+"*,"+whitespace+"*"),rcombinators=new RegExp("^"+whitespace+"*([>+~]|"+whitespace+")"+whitespace+"*"),rattributeQuotes=new RegExp("="+whitespace+"*([^\\]'\"]*?)"+whitespace+"*\\]","g"),rpseudo=new RegExp(pseudos),ridentifier=new RegExp("^"+identifier+"$"),matchExpr={ID:new RegExp("^#("+characterEncoding+")"),CLASS:new RegExp("^\\.("+characterEncoding+")"),TAG:new RegExp("^("+characterEncoding.replace("w","w*")+")"),ATTR:new RegExp("^"+attributes),PSEUDO:new RegExp("^"+pseudos),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+whitespace+"*(even|odd|(([+-]|)(\\d*)n|)"+whitespace+"*(?:([+-]|)"+whitespace+"*(\\d+)|))"+whitespace+"*\\)|)","i"),bool:new RegExp("^(?:"+booleans+")$","i"),needsContext:new RegExp("^"+whitespace+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+whitespace+"*((?:-\\d)?\\d*)"+whitespace+"*\\)|)(?=[^-]|$)","i")},rinputs=/^(?:input|select|textarea|button)$/i,rheader=/^h\d$/i,rnative=/^[^{]+\{\s*\[native \w/,rquickExpr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,rsibling=/[+~]/,rescape=/'|\\/g,runescape=new RegExp("\\\\([\\da-f]{1,6}"+whitespace+"?|("+whitespace+")|.)","ig"),funescape=function(_,escaped,escapedWhitespace){var high="0x"+escaped-65536;return high!==high||escapedWhitespace?escaped:high<0?String.fromCharCode(high+65536):String.fromCharCode(high>>10|55296,high&1023|56320)},unloadHandler=function(){setDocument()};try{push.apply(arr=slice.call(preferredDoc.childNodes),preferredDoc.childNodes);arr[preferredDoc.childNodes.length].nodeType}catch(e){push={apply:arr.length?function(target,els){push_native.apply(target,slice.call(els))}:function(target,els){var j=target.length,i=0;while(target[j++]=els[i++]){}target.length=j-1}}}function Sizzle(selector,context,results,seed){var match,elem,m,nodeType,i,groups,old,nid,newContext,newSelector;if((context?context.ownerDocument||context:preferredDoc)!==document){setDocument(context)}context=context||document;results=results||[];nodeType=context.nodeType;if(typeof selector!=="string"||!selector||nodeType!==1&&nodeType!==9&&nodeType!==11){return results}if(!seed&&documentIsHTML){if(nodeType!==11&&(match=rquickExpr.exec(selector))){if(m=match[1]){if(nodeType===9){elem=context.getElementById(m);if(elem&&elem.parentNode){if(elem.id===m){results.push(elem);return results}}else{return results}}else{if(context.ownerDocument&&(elem=context.ownerDocument.getElementById(m))&&contains(context,elem)&&elem.id===m){results.push(elem);return results}}}else if(match[2]){push.apply(results,context.getElementsByTagName(selector));return results}else if((m=match[3])&&support.getElementsByClassName){push.apply(results,context.getElementsByClassName(m));return results}}if(support.qsa&&(!rbuggyQSA||!rbuggyQSA.test(selector))){nid=old=expando;newContext=context;newSelector=nodeType!==1&&selector;if(nodeType===1&&context.nodeName.toLowerCase()!=="object"){groups=tokenize(selector);if(old=context.getAttribute("id")){nid=old.replace(rescape,"\\$&")}else{context.setAttribute("id",nid)}nid="[id='"+nid+"'] ";i=groups.length;while(i--){groups[i]=nid+toSelector(groups[i])}newContext=rsibling.test(selector)&&testContext(context.parentNode)||context;newSelector=groups.join(",")}if(newSelector){try{push.apply(results,newContext.querySelectorAll(newSelector));return results}catch(qsaError){}finally{if(!old){context.removeAttribute("id")}}}}}return select(selector.replace(rtrim,"$1"),context,results,seed)}function createCache(){var keys=[];function cache(key,value){if(keys.push(key+" ")>Expr.cacheLength){delete cache[keys.shift()]}return cache[key+" "]=value}return cache}function markFunction(fn){fn[expando]=true;return fn}function assert(fn){var div=document.createElement("div");try{return!!fn(div)}catch(e){return false}finally{if(div.parentNode){div.parentNode.removeChild(div)}div=null}}function addHandle(attrs,handler){var arr=attrs.split("|"),i=attrs.length;while(i--){Expr.attrHandle[arr[i]]=handler}}function siblingCheck(a,b){var cur=b&&a,diff=cur&&a.nodeType===1&&b.nodeType===1&&(~b.sourceIndex||MAX_NEGATIVE)-(~a.sourceIndex||MAX_NEGATIVE);if(diff){return diff}if(cur){while(cur=cur.nextSibling){if(cur===b){return-1}}}return a?1:-1}function createInputPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type===type}}function createButtonPseudo(type){return function(elem){var name=elem.nodeName.toLowerCase();return(name==="input"||name==="button")&&elem.type===type}}function createPositionalPseudo(fn){return markFunction(function(argument){argument=+argument;return markFunction(function(seed,matches){var j,matchIndexes=fn([],seed.length,argument),i=matchIndexes.length;while(i--){if(seed[j=matchIndexes[i]]){seed[j]=!(matches[j]=seed[j])}}})})}function testContext(context){return context&&typeof context.getElementsByTagName!=="undefined"&&context}support=Sizzle.support={};isXML=Sizzle.isXML=function(elem){var documentElement=elem&&(elem.ownerDocument||elem).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};setDocument=Sizzle.setDocument=function(node){var hasCompare,parent,doc=node?node.ownerDocument||node:preferredDoc;if(doc===document||doc.nodeType!==9||!doc.documentElement){return document}document=doc;docElem=doc.documentElement;parent=doc.defaultView;if(parent&&parent!==parent.top){if(parent.addEventListener){parent.addEventListener("unload",unloadHandler,false)}else if(parent.attachEvent){parent.attachEvent("onunload",unloadHandler)}}documentIsHTML=!isXML(doc);support.attributes=assert(function(div){div.className="i";return!div.getAttribute("className")});support.getElementsByTagName=assert(function(div){div.appendChild(doc.createComment(""));return!div.getElementsByTagName("*").length});support.getElementsByClassName=rnative.test(doc.getElementsByClassName);support.getById=assert(function(div){docElem.appendChild(div).id=expando;return!doc.getElementsByName||!doc.getElementsByName(expando).length});if(support.getById){Expr.find["ID"]=function(id,context){if(typeof context.getElementById!=="undefined"&&documentIsHTML){var m=context.getElementById(id);return m&&m.parentNode?[m]:[]}};Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){return elem.getAttribute("id")===attrId}}}else{delete Expr.find["ID"];Expr.filter["ID"]=function(id){var attrId=id.replace(runescape,funescape);return function(elem){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return node&&node.value===attrId}}}Expr.find["TAG"]=support.getElementsByTagName?function(tag,context){if(typeof context.getElementsByTagName!=="undefined"){return context.getElementsByTagName(tag)}else if(support.qsa){return context.querySelectorAll(tag)}}:function(tag,context){var elem,tmp=[],i=0,results=context.getElementsByTagName(tag);if(tag==="*"){while(elem=results[i++]){if(elem.nodeType===1){tmp.push(elem)}}return tmp}return results};Expr.find["CLASS"]=support.getElementsByClassName&&function(className,context){if(documentIsHTML){return context.getElementsByClassName(className)}};rbuggyMatches=[];rbuggyQSA=[];if(support.qsa=rnative.test(doc.querySelectorAll)){assert(function(div){docElem.appendChild(div).innerHTML="<a id='"+expando+"'></a>"+"<select id='"+expando+"-\f]' msallowcapture=''>"+"<option selected=''></option></select>";if(div.querySelectorAll("[msallowcapture^='']").length){rbuggyQSA.push("[*^$]="+whitespace+"*(?:''|\"\")")}if(!div.querySelectorAll("[selected]").length){rbuggyQSA.push("\\["+whitespace+"*(?:value|"+booleans+")")}if(!div.querySelectorAll("[id~="+expando+"-]").length){rbuggyQSA.push("~=")}if(!div.querySelectorAll(":checked").length){rbuggyQSA.push(":checked")}if(!div.querySelectorAll("a#"+expando+"+*").length){rbuggyQSA.push(".#.+[+~]")}});assert(function(div){var input=doc.createElement("input");input.setAttribute("type","hidden");div.appendChild(input).setAttribute("name","D");if(div.querySelectorAll("[name=d]").length){rbuggyQSA.push("name"+whitespace+"*[*^$|!~]?=")}if(!div.querySelectorAll(":enabled").length){rbuggyQSA.push(":enabled",":disabled")}div.querySelectorAll("*,:x");rbuggyQSA.push(",.*:")})}if(support.matchesSelector=rnative.test(matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector)){assert(function(div){support.disconnectedMatch=matches.call(div,"div");matches.call(div,"[s!='']:x");rbuggyMatches.push("!=",pseudos)})}rbuggyQSA=rbuggyQSA.length&&new RegExp(rbuggyQSA.join("|"));rbuggyMatches=rbuggyMatches.length&&new RegExp(rbuggyMatches.join("|"));hasCompare=rnative.test(docElem.compareDocumentPosition);contains=hasCompare||rnative.test(docElem.contains)?function(a,b){var adown=a.nodeType===9?a.documentElement:a,bup=b&&b.parentNode;return a===bup||!!(bup&&bup.nodeType===1&&(adown.contains?adown.contains(bup):a.compareDocumentPosition&&a.compareDocumentPosition(bup)&16))}:function(a,b){if(b){while(b=b.parentNode){if(b===a){return true}}}return false};sortOrder=hasCompare?function(a,b){if(a===b){hasDuplicate=true;return 0}var compare=!a.compareDocumentPosition-!b.compareDocumentPosition;if(compare){return compare}compare=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1;if(compare&1||!support.sortDetached&&b.compareDocumentPosition(a)===compare){if(a===doc||a.ownerDocument===preferredDoc&&contains(preferredDoc,a)){return-1}if(b===doc||b.ownerDocument===preferredDoc&&contains(preferredDoc,b)){return 1}return sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}return compare&4?-1:1}:function(a,b){if(a===b){hasDuplicate=true;return 0}var cur,i=0,aup=a.parentNode,bup=b.parentNode,ap=[a],bp=[b];if(!aup||!bup){return a===doc?-1:b===doc?1:aup?-1:bup?1:sortInput?indexOf(sortInput,a)-indexOf(sortInput,b):0}else if(aup===bup){return siblingCheck(a,b)}cur=a;while(cur=cur.parentNode){ap.unshift(cur)}cur=b;while(cur=cur.parentNode){bp.unshift(cur)}while(ap[i]===bp[i]){i++}return i?siblingCheck(ap[i],bp[i]):ap[i]===preferredDoc?-1:bp[i]===preferredDoc?1:0};return doc};Sizzle.matches=function(expr,elements){return Sizzle(expr,null,null,elements)};Sizzle.matchesSelector=function(elem,expr){if((elem.ownerDocument||elem)!==document){setDocument(elem)}expr=expr.replace(rattributeQuotes,"='$1']");if(support.matchesSelector&&documentIsHTML&&(!rbuggyMatches||!rbuggyMatches.test(expr))&&(!rbuggyQSA||!rbuggyQSA.test(expr))){try{var ret=matches.call(elem,expr);if(ret||support.disconnectedMatch||elem.document&&elem.document.nodeType!==11){return ret}}catch(e){}}return Sizzle(expr,document,null,[elem]).length>0};Sizzle.contains=function(context,elem){if((context.ownerDocument||context)!==document){setDocument(context)}return contains(context,elem)};Sizzle.attr=function(elem,name){if((elem.ownerDocument||elem)!==document){setDocument(elem)}var fn=Expr.attrHandle[name.toLowerCase()],val=fn&&hasOwn.call(Expr.attrHandle,name.toLowerCase())?fn(elem,name,!documentIsHTML):undefined;return val!==undefined?val:support.attributes||!documentIsHTML?elem.getAttribute(name):(val=elem.getAttributeNode(name))&&val.specified?val.value:null};Sizzle.error=function(msg){throw new Error("Syntax error, unrecognized expression: "+msg)};Sizzle.uniqueSort=function(results){var elem,duplicates=[],j=0,i=0;hasDuplicate=!support.detectDuplicates;sortInput=!support.sortStable&&results.slice(0);results.sort(sortOrder);if(hasDuplicate){while(elem=results[i++]){if(elem===results[i]){j=duplicates.push(i)}}while(j--){results.splice(duplicates[j],1)}}sortInput=null;return results};getText=Sizzle.getText=function(elem){var node,ret="",i=0,nodeType=elem.nodeType;if(!nodeType){while(node=elem[i++]){ret+=getText(node)}}else if(nodeType===1||nodeType===9||nodeType===11){if(typeof elem.textContent==="string"){return elem.textContent}else{for(elem=elem.firstChild;elem;elem=elem.nextSibling){ret+=getText(elem)}}}else if(nodeType===3||nodeType===4){return elem.nodeValue}return ret};Expr=Sizzle.selectors={cacheLength:50,createPseudo:markFunction,match:matchExpr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(match){match[1]=match[1].replace(runescape,funescape);match[3]=(match[3]||match[4]||match[5]||"").replace(runescape,funescape);if(match[2]==="~="){match[3]=" "+match[3]+" "}return match.slice(0,4)},CHILD:function(match){match[1]=match[1].toLowerCase();if(match[1].slice(0,3)==="nth"){if(!match[3]){Sizzle.error(match[0])}match[4]=+(match[4]?match[5]+(match[6]||1):2*(match[3]==="even"||match[3]==="odd"));match[5]=+(match[7]+match[8]||match[3]==="odd")}else if(match[3]){Sizzle.error(match[0])}return match},PSEUDO:function(match){var excess,unquoted=!match[6]&&match[2];if(matchExpr["CHILD"].test(match[0])){return null}if(match[3]){match[2]=match[4]||match[5]||""}else if(unquoted&&rpseudo.test(unquoted)&&(excess=tokenize(unquoted,true))&&(excess=unquoted.indexOf(")",unquoted.length-excess)-unquoted.length)){match[0]=match[0].slice(0,excess);match[2]=unquoted.slice(0,excess)}return match.slice(0,3)}},filter:{TAG:function(nodeNameSelector){var nodeName=nodeNameSelector.replace(runescape,funescape).toLowerCase();return nodeNameSelector==="*"?function(){return true}:function(elem){return elem.nodeName&&elem.nodeName.toLowerCase()===nodeName}},CLASS:function(className){var pattern=classCache[className+" "];return pattern||(pattern=new RegExp("(^|"+whitespace+")"+className+"("+whitespace+"|$)"))&&classCache(className,function(elem){return pattern.test(typeof elem.className==="string"&&elem.className||typeof elem.getAttribute!=="undefined"&&elem.getAttribute("class")||"")})},ATTR:function(name,operator,check){return function(elem){var result=Sizzle.attr(elem,name);if(result==null){return operator==="!="}if(!operator){return true}result+="";return operator==="="?result===check:operator==="!="?result!==check:operator==="^="?check&&result.indexOf(check)===0:operator==="*="?check&&result.indexOf(check)>-1:operator==="$="?check&&result.slice(-check.length)===check:operator==="~="?(" "+result.replace(rwhitespace," ")+" ").indexOf(check)>-1:operator==="|="?result===check||result.slice(0,check.length+1)===check+"-":false}},CHILD:function(type,what,argument,first,last){var simple=type.slice(0,3)!=="nth",forward=type.slice(-4)!=="last",ofType=what==="of-type";return first===1&&last===0?function(elem){return!!elem.parentNode}:function(elem,context,xml){var cache,outerCache,node,diff,nodeIndex,start,dir=simple!==forward?"nextSibling":"previousSibling",parent=elem.parentNode,name=ofType&&elem.nodeName.toLowerCase(),useCache=!xml&&!ofType;if(parent){if(simple){while(dir){node=elem;while(node=node[dir]){if(ofType?node.nodeName.toLowerCase()===name:node.nodeType===1){return false}}start=dir=type==="only"&&!start&&"nextSibling"}return true}start=[forward?parent.firstChild:parent.lastChild];if(forward&&useCache){outerCache=parent[expando]||(parent[expando]={});cache=outerCache[type]||[];nodeIndex=cache[0]===dirruns&&cache[1];diff=cache[0]===dirruns&&cache[2];node=nodeIndex&&parent.childNodes[nodeIndex];while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if(node.nodeType===1&&++diff&&node===elem){outerCache[type]=[dirruns,nodeIndex,diff];break}}}else if(useCache&&(cache=(elem[expando]||(elem[expando]={}))[type])&&cache[0]===dirruns){diff=cache[1]}else{while(node=++nodeIndex&&node&&node[dir]||(diff=nodeIndex=0)||start.pop()){if((ofType?node.nodeName.toLowerCase()===name:node.nodeType===1)&&++diff){if(useCache){(node[expando]||(node[expando]={}))[type]=[dirruns,diff]}if(node===elem){break}}}}diff-=last;return diff===first||diff%first===0&&diff/first>=0}}},PSEUDO:function(pseudo,argument){var args,fn=Expr.pseudos[pseudo]||Expr.setFilters[pseudo.toLowerCase()]||Sizzle.error("unsupported pseudo: "+pseudo);if(fn[expando]){return fn(argument)}if(fn.length>1){args=[pseudo,pseudo,"",argument];return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase())?markFunction(function(seed,matches){var idx,matched=fn(seed,argument),i=matched.length;while(i--){idx=indexOf(seed,matched[i]);seed[idx]=!(matches[idx]=matched[i])}}):function(elem){return fn(elem,0,args)}}return fn}},pseudos:{not:markFunction(function(selector){var input=[],results=[],matcher=compile(selector.replace(rtrim,"$1"));return matcher[expando]?markFunction(function(seed,matches,context,xml){var elem,unmatched=matcher(seed,null,xml,[]),i=seed.length;while(i--){if(elem=unmatched[i]){seed[i]=!(matches[i]=elem)}}}):function(elem,context,xml){input[0]=elem;matcher(input,null,xml,results);input[0]=null;return!results.pop()}}),has:markFunction(function(selector){return function(elem){return Sizzle(selector,elem).length>0}}),contains:markFunction(function(text){
text=text.replace(runescape,funescape);return function(elem){return(elem.textContent||elem.innerText||getText(elem)).indexOf(text)>-1}}),lang:markFunction(function(lang){if(!ridentifier.test(lang||"")){Sizzle.error("unsupported lang: "+lang)}lang=lang.replace(runescape,funescape).toLowerCase();return function(elem){var elemLang;do{if(elemLang=documentIsHTML?elem.lang:elem.getAttribute("xml:lang")||elem.getAttribute("lang")){elemLang=elemLang.toLowerCase();return elemLang===lang||elemLang.indexOf(lang+"-")===0}}while((elem=elem.parentNode)&&elem.nodeType===1);return false}}),target:function(elem){var hash=window.location&&window.location.hash;return hash&&hash.slice(1)===elem.id},root:function(elem){return elem===docElem},focus:function(elem){return elem===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(elem.type||elem.href||~elem.tabIndex)},enabled:function(elem){return elem.disabled===false},disabled:function(elem){return elem.disabled===true},checked:function(elem){var nodeName=elem.nodeName.toLowerCase();return nodeName==="input"&&!!elem.checked||nodeName==="option"&&!!elem.selected},selected:function(elem){if(elem.parentNode){elem.parentNode.selectedIndex}return elem.selected===true},empty:function(elem){for(elem=elem.firstChild;elem;elem=elem.nextSibling){if(elem.nodeType<6){return false}}return true},parent:function(elem){return!Expr.pseudos["empty"](elem)},header:function(elem){return rheader.test(elem.nodeName)},input:function(elem){return rinputs.test(elem.nodeName)},button:function(elem){var name=elem.nodeName.toLowerCase();return name==="input"&&elem.type==="button"||name==="button"},text:function(elem){var attr;return elem.nodeName.toLowerCase()==="input"&&elem.type==="text"&&((attr=elem.getAttribute("type"))==null||attr.toLowerCase()==="text")},first:createPositionalPseudo(function(){return[0]}),last:createPositionalPseudo(function(matchIndexes,length){return[length-1]}),eq:createPositionalPseudo(function(matchIndexes,length,argument){return[argument<0?argument+length:argument]}),even:createPositionalPseudo(function(matchIndexes,length){var i=0;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),odd:createPositionalPseudo(function(matchIndexes,length){var i=1;for(;i<length;i+=2){matchIndexes.push(i)}return matchIndexes}),lt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;--i>=0;){matchIndexes.push(i)}return matchIndexes}),gt:createPositionalPseudo(function(matchIndexes,length,argument){var i=argument<0?argument+length:argument;for(;++i<length;){matchIndexes.push(i)}return matchIndexes})}};Expr.pseudos["nth"]=Expr.pseudos["eq"];for(i in{radio:true,checkbox:true,file:true,password:true,image:true}){Expr.pseudos[i]=createInputPseudo(i)}for(i in{submit:true,reset:true}){Expr.pseudos[i]=createButtonPseudo(i)}function setFilters(){}setFilters.prototype=Expr.filters=Expr.pseudos;Expr.setFilters=new setFilters;tokenize=Sizzle.tokenize=function(selector,parseOnly){var matched,match,tokens,type,soFar,groups,preFilters,cached=tokenCache[selector+" "];if(cached){return parseOnly?0:cached.slice(0)}soFar=selector;groups=[];preFilters=Expr.preFilter;while(soFar){if(!matched||(match=rcomma.exec(soFar))){if(match){soFar=soFar.slice(match[0].length)||soFar}groups.push(tokens=[])}matched=false;if(match=rcombinators.exec(soFar)){matched=match.shift();tokens.push({value:matched,type:match[0].replace(rtrim," ")});soFar=soFar.slice(matched.length)}for(type in Expr.filter){if((match=matchExpr[type].exec(soFar))&&(!preFilters[type]||(match=preFilters[type](match)))){matched=match.shift();tokens.push({value:matched,type:type,matches:match});soFar=soFar.slice(matched.length)}}if(!matched){break}}return parseOnly?soFar.length:soFar?Sizzle.error(selector):tokenCache(selector,groups).slice(0)};function toSelector(tokens){var i=0,len=tokens.length,selector="";for(;i<len;i++){selector+=tokens[i].value}return selector}function addCombinator(matcher,combinator,base){var dir=combinator.dir,checkNonElements=base&&dir==="parentNode",doneName=done++;return combinator.first?function(elem,context,xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){return matcher(elem,context,xml)}}}:function(elem,context,xml){var oldCache,outerCache,newCache=[dirruns,doneName];if(xml){while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){if(matcher(elem,context,xml)){return true}}}}else{while(elem=elem[dir]){if(elem.nodeType===1||checkNonElements){outerCache=elem[expando]||(elem[expando]={});if((oldCache=outerCache[dir])&&oldCache[0]===dirruns&&oldCache[1]===doneName){return newCache[2]=oldCache[2]}else{outerCache[dir]=newCache;if(newCache[2]=matcher(elem,context,xml)){return true}}}}}}}function elementMatcher(matchers){return matchers.length>1?function(elem,context,xml){var i=matchers.length;while(i--){if(!matchers[i](elem,context,xml)){return false}}return true}:matchers[0]}function multipleContexts(selector,contexts,results){var i=0,len=contexts.length;for(;i<len;i++){Sizzle(selector,contexts[i],results)}return results}function condense(unmatched,map,filter,context,xml){var elem,newUnmatched=[],i=0,len=unmatched.length,mapped=map!=null;for(;i<len;i++){if(elem=unmatched[i]){if(!filter||filter(elem,context,xml)){newUnmatched.push(elem);if(mapped){map.push(i)}}}}return newUnmatched}function setMatcher(preFilter,selector,matcher,postFilter,postFinder,postSelector){if(postFilter&&!postFilter[expando]){postFilter=setMatcher(postFilter)}if(postFinder&&!postFinder[expando]){postFinder=setMatcher(postFinder,postSelector)}return markFunction(function(seed,results,context,xml){var temp,i,elem,preMap=[],postMap=[],preexisting=results.length,elems=seed||multipleContexts(selector||"*",context.nodeType?[context]:context,[]),matcherIn=preFilter&&(seed||!selector)?condense(elems,preMap,preFilter,context,xml):elems,matcherOut=matcher?postFinder||(seed?preFilter:preexisting||postFilter)?[]:results:matcherIn;if(matcher){matcher(matcherIn,matcherOut,context,xml)}if(postFilter){temp=condense(matcherOut,postMap);postFilter(temp,[],context,xml);i=temp.length;while(i--){if(elem=temp[i]){matcherOut[postMap[i]]=!(matcherIn[postMap[i]]=elem)}}}if(seed){if(postFinder||preFilter){if(postFinder){temp=[];i=matcherOut.length;while(i--){if(elem=matcherOut[i]){temp.push(matcherIn[i]=elem)}}postFinder(null,matcherOut=[],temp,xml)}i=matcherOut.length;while(i--){if((elem=matcherOut[i])&&(temp=postFinder?indexOf(seed,elem):preMap[i])>-1){seed[temp]=!(results[temp]=elem)}}}}else{matcherOut=condense(matcherOut===results?matcherOut.splice(preexisting,matcherOut.length):matcherOut);if(postFinder){postFinder(null,results,matcherOut,xml)}else{push.apply(results,matcherOut)}}})}function matcherFromTokens(tokens){var checkContext,matcher,j,len=tokens.length,leadingRelative=Expr.relative[tokens[0].type],implicitRelative=leadingRelative||Expr.relative[" "],i=leadingRelative?1:0,matchContext=addCombinator(function(elem){return elem===checkContext},implicitRelative,true),matchAnyContext=addCombinator(function(elem){return indexOf(checkContext,elem)>-1},implicitRelative,true),matchers=[function(elem,context,xml){var ret=!leadingRelative&&(xml||context!==outermostContext)||((checkContext=context).nodeType?matchContext(elem,context,xml):matchAnyContext(elem,context,xml));checkContext=null;return ret}];for(;i<len;i++){if(matcher=Expr.relative[tokens[i].type]){matchers=[addCombinator(elementMatcher(matchers),matcher)]}else{matcher=Expr.filter[tokens[i].type].apply(null,tokens[i].matches);if(matcher[expando]){j=++i;for(;j<len;j++){if(Expr.relative[tokens[j].type]){break}}return setMatcher(i>1&&elementMatcher(matchers),i>1&&toSelector(tokens.slice(0,i-1).concat({value:tokens[i-2].type===" "?"*":""})).replace(rtrim,"$1"),matcher,i<j&&matcherFromTokens(tokens.slice(i,j)),j<len&&matcherFromTokens(tokens=tokens.slice(j)),j<len&&toSelector(tokens))}matchers.push(matcher)}}return elementMatcher(matchers)}function matcherFromGroupMatchers(elementMatchers,setMatchers){var bySet=setMatchers.length>0,byElement=elementMatchers.length>0,superMatcher=function(seed,context,xml,results,outermost){var elem,j,matcher,matchedCount=0,i="0",unmatched=seed&&[],setMatched=[],contextBackup=outermostContext,elems=seed||byElement&&Expr.find["TAG"]("*",outermost),dirrunsUnique=dirruns+=contextBackup==null?1:Math.random()||.1,len=elems.length;if(outermost){outermostContext=context!==document&&context}for(;i!==len&&(elem=elems[i])!=null;i++){if(byElement&&elem){j=0;while(matcher=elementMatchers[j++]){if(matcher(elem,context,xml)){results.push(elem);break}}if(outermost){dirruns=dirrunsUnique}}if(bySet){if(elem=!matcher&&elem){matchedCount--}if(seed){unmatched.push(elem)}}}matchedCount+=i;if(bySet&&i!==matchedCount){j=0;while(matcher=setMatchers[j++]){matcher(unmatched,setMatched,context,xml)}if(seed){if(matchedCount>0){while(i--){if(!(unmatched[i]||setMatched[i])){setMatched[i]=pop.call(results)}}}setMatched=condense(setMatched)}push.apply(results,setMatched);if(outermost&&!seed&&setMatched.length>0&&matchedCount+setMatchers.length>1){Sizzle.uniqueSort(results)}}if(outermost){dirruns=dirrunsUnique;outermostContext=contextBackup}return unmatched};return bySet?markFunction(superMatcher):superMatcher}compile=Sizzle.compile=function(selector,match){var i,setMatchers=[],elementMatchers=[],cached=compilerCache[selector+" "];if(!cached){if(!match){match=tokenize(selector)}i=match.length;while(i--){cached=matcherFromTokens(match[i]);if(cached[expando]){setMatchers.push(cached)}else{elementMatchers.push(cached)}}cached=compilerCache(selector,matcherFromGroupMatchers(elementMatchers,setMatchers));cached.selector=selector}return cached};select=Sizzle.select=function(selector,context,results,seed){var i,tokens,token,type,find,compiled=typeof selector==="function"&&selector,match=!seed&&tokenize(selector=compiled.selector||selector);results=results||[];if(match.length===1){tokens=match[0]=match[0].slice(0);if(tokens.length>2&&(token=tokens[0]).type==="ID"&&support.getById&&context.nodeType===9&&documentIsHTML&&Expr.relative[tokens[1].type]){context=(Expr.find["ID"](token.matches[0].replace(runescape,funescape),context)||[])[0];if(!context){return results}else if(compiled){context=context.parentNode}selector=selector.slice(tokens.shift().value.length)}i=matchExpr["needsContext"].test(selector)?0:tokens.length;while(i--){token=tokens[i];if(Expr.relative[type=token.type]){break}if(find=Expr.find[type]){if(seed=find(token.matches[0].replace(runescape,funescape),rsibling.test(tokens[0].type)&&testContext(context.parentNode)||context)){tokens.splice(i,1);selector=seed.length&&toSelector(tokens);if(!selector){push.apply(results,seed);return results}break}}}}(compiled||compile(selector,match))(seed,context,!documentIsHTML,results,rsibling.test(selector)&&testContext(context.parentNode)||context);return results};support.sortStable=expando.split("").sort(sortOrder).join("")===expando;support.detectDuplicates=!!hasDuplicate;setDocument();support.sortDetached=assert(function(div1){return div1.compareDocumentPosition(document.createElement("div"))&1});if(!assert(function(div){div.innerHTML="<a href='#'></a>";return div.firstChild.getAttribute("href")==="#"})){addHandle("type|href|height|width",function(elem,name,isXML){if(!isXML){return elem.getAttribute(name,name.toLowerCase()==="type"?1:2)}})}if(!support.attributes||!assert(function(div){div.innerHTML="<input/>";div.firstChild.setAttribute("value","");return div.firstChild.getAttribute("value")===""})){addHandle("value",function(elem,name,isXML){if(!isXML&&elem.nodeName.toLowerCase()==="input"){return elem.defaultValue}})}if(!assert(function(div){return div.getAttribute("disabled")==null})){addHandle(booleans,function(elem,name,isXML){var val;if(!isXML){return elem[name]===true?name.toLowerCase():(val=elem.getAttributeNode(name))&&val.specified?val.value:null}})}return Sizzle}(window);jQuery.find=Sizzle;jQuery.expr=Sizzle.selectors;jQuery.expr[":"]=jQuery.expr.pseudos;jQuery.unique=Sizzle.uniqueSort;jQuery.text=Sizzle.getText;jQuery.isXMLDoc=Sizzle.isXML;jQuery.contains=Sizzle.contains;var rneedsContext=jQuery.expr.match.needsContext;var rsingleTag=/^<(\w+)\s*\/?>(?:<\/\1>|)$/;var risSimple=/^.[^:#\[\.,]*$/;function winnow(elements,qualifier,not){if(jQuery.isFunction(qualifier)){return jQuery.grep(elements,function(elem,i){return!!qualifier.call(elem,i,elem)!==not})}if(qualifier.nodeType){return jQuery.grep(elements,function(elem){return elem===qualifier!==not})}if(typeof qualifier==="string"){if(risSimple.test(qualifier)){return jQuery.filter(qualifier,elements,not)}qualifier=jQuery.filter(qualifier,elements)}return jQuery.grep(elements,function(elem){return indexOf.call(qualifier,elem)>=0!==not})}jQuery.filter=function(expr,elems,not){var elem=elems[0];if(not){expr=":not("+expr+")"}return elems.length===1&&elem.nodeType===1?jQuery.find.matchesSelector(elem,expr)?[elem]:[]:jQuery.find.matches(expr,jQuery.grep(elems,function(elem){return elem.nodeType===1}))};jQuery.fn.extend({find:function(selector){var i,len=this.length,ret=[],self=this;if(typeof selector!=="string"){return this.pushStack(jQuery(selector).filter(function(){for(i=0;i<len;i++){if(jQuery.contains(self[i],this)){return true}}}))}for(i=0;i<len;i++){jQuery.find(selector,self[i],ret)}ret=this.pushStack(len>1?jQuery.unique(ret):ret);ret.selector=this.selector?this.selector+" "+selector:selector;return ret},filter:function(selector){return this.pushStack(winnow(this,selector||[],false))},not:function(selector){return this.pushStack(winnow(this,selector||[],true))},is:function(selector){return!!winnow(this,typeof selector==="string"&&rneedsContext.test(selector)?jQuery(selector):selector||[],false).length}});var rootjQuery,rquickExpr=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,init=jQuery.fn.init=function(selector,context){var match,elem;if(!selector){return this}if(typeof selector==="string"){if(selector[0]==="<"&&selector[selector.length-1]===">"&&selector.length>=3){match=[null,selector,null]}else{match=rquickExpr.exec(selector)}if(match&&(match[1]||!context)){if(match[1]){context=context instanceof jQuery?context[0]:context;jQuery.merge(this,jQuery.parseHTML(match[1],context&&context.nodeType?context.ownerDocument||context:document,true));if(rsingleTag.test(match[1])&&jQuery.isPlainObject(context)){for(match in context){if(jQuery.isFunction(this[match])){this[match](context[match])}else{this.attr(match,context[match])}}}return this}else{elem=document.getElementById(match[2]);if(elem&&elem.parentNode){this.length=1;this[0]=elem}this.context=document;this.selector=selector;return this}}else if(!context||context.jquery){return(context||rootjQuery).find(selector)}else{return this.constructor(context).find(selector)}}else if(selector.nodeType){this.context=this[0]=selector;this.length=1;return this}else if(jQuery.isFunction(selector)){return typeof rootjQuery.ready!=="undefined"?rootjQuery.ready(selector):selector(jQuery)}if(selector.selector!==undefined){this.selector=selector.selector;this.context=selector.context}return jQuery.makeArray(selector,this)};init.prototype=jQuery.fn;rootjQuery=jQuery(document);var rparentsprev=/^(?:parents|prev(?:Until|All))/,guaranteedUnique={children:true,contents:true,next:true,prev:true};jQuery.extend({dir:function(elem,dir,until){var matched=[],truncate=until!==undefined;while((elem=elem[dir])&&elem.nodeType!==9){if(elem.nodeType===1){if(truncate&&jQuery(elem).is(until)){break}matched.push(elem)}}return matched},sibling:function(n,elem){var matched=[];for(;n;n=n.nextSibling){if(n.nodeType===1&&n!==elem){matched.push(n)}}return matched}});jQuery.fn.extend({has:function(target){var targets=jQuery(target,this),l=targets.length;return this.filter(function(){var i=0;for(;i<l;i++){if(jQuery.contains(this,targets[i])){return true}}})},closest:function(selectors,context){var cur,i=0,l=this.length,matched=[],pos=rneedsContext.test(selectors)||typeof selectors!=="string"?jQuery(selectors,context||this.context):0;for(;i<l;i++){for(cur=this[i];cur&&cur!==context;cur=cur.parentNode){if(cur.nodeType<11&&(pos?pos.index(cur)>-1:cur.nodeType===1&&jQuery.find.matchesSelector(cur,selectors))){matched.push(cur);break}}}return this.pushStack(matched.length>1?jQuery.unique(matched):matched)},index:function(elem){if(!elem){return this[0]&&this[0].parentNode?this.first().prevAll().length:-1}if(typeof elem==="string"){return indexOf.call(jQuery(elem),this[0])}return indexOf.call(this,elem.jquery?elem[0]:elem)},add:function(selector,context){return this.pushStack(jQuery.unique(jQuery.merge(this.get(),jQuery(selector,context))))},addBack:function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))}});function sibling(cur,dir){while((cur=cur[dir])&&cur.nodeType!==1){}return cur}jQuery.each({parent:function(elem){var parent=elem.parentNode;return parent&&parent.nodeType!==11?parent:null},parents:function(elem){return jQuery.dir(elem,"parentNode")},parentsUntil:function(elem,i,until){return jQuery.dir(elem,"parentNode",until)},next:function(elem){return sibling(elem,"nextSibling")},prev:function(elem){return sibling(elem,"previousSibling")},nextAll:function(elem){return jQuery.dir(elem,"nextSibling")},prevAll:function(elem){return jQuery.dir(elem,"previousSibling")},nextUntil:function(elem,i,until){return jQuery.dir(elem,"nextSibling",until)},prevUntil:function(elem,i,until){return jQuery.dir(elem,"previousSibling",until)},siblings:function(elem){return jQuery.sibling((elem.parentNode||{}).firstChild,elem)},children:function(elem){return jQuery.sibling(elem.firstChild)},contents:function(elem){return elem.contentDocument||jQuery.merge([],elem.childNodes)}},function(name,fn){jQuery.fn[name]=function(until,selector){var matched=jQuery.map(this,fn,until);if(name.slice(-5)!=="Until"){selector=until}if(selector&&typeof selector==="string"){matched=jQuery.filter(selector,matched)}if(this.length>1){if(!guaranteedUnique[name]){jQuery.unique(matched)}if(rparentsprev.test(name)){matched.reverse()}}return this.pushStack(matched)}});var rnotwhite=/\S+/g;var optionsCache={};function createOptions(options){var object=optionsCache[options]={};jQuery.each(options.match(rnotwhite)||[],function(_,flag){object[flag]=true});return object}jQuery.Callbacks=function(options){options=typeof options==="string"?optionsCache[options]||createOptions(options):jQuery.extend({},options);var memory,fired,firing,firingStart,firingLength,firingIndex,list=[],stack=!options.once&&[],fire=function(data){memory=options.memory&&data;fired=true;firingIndex=firingStart||0;firingStart=0;firingLength=list.length;firing=true;for(;list&&firingIndex<firingLength;firingIndex++){if(list[firingIndex].apply(data[0],data[1])===false&&options.stopOnFalse){memory=false;break}}firing=false;if(list){if(stack){if(stack.length){fire(stack.shift())}}else if(memory){list=[]}else{self.disable()}}},self={add:function(){if(list){var start=list.length;(function add(args){jQuery.each(args,function(_,arg){var type=jQuery.type(arg);if(type==="function"){if(!options.unique||!self.has(arg)){list.push(arg)}}else if(arg&&arg.length&&type!=="string"){add(arg)}})})(arguments);if(firing){firingLength=list.length}else if(memory){firingStart=start;fire(memory)}}return this},remove:function(){if(list){jQuery.each(arguments,function(_,arg){var index;while((index=jQuery.inArray(arg,list,index))>-1){list.splice(index,1);if(firing){if(index<=firingLength){firingLength--}if(index<=firingIndex){firingIndex--}}}})}return this},has:function(fn){return fn?jQuery.inArray(fn,list)>-1:!!(list&&list.length)},empty:function(){list=[];firingLength=0;return this},disable:function(){list=stack=memory=undefined;return this},disabled:function(){return!list},lock:function(){stack=undefined;if(!memory){self.disable()}return this},locked:function(){return!stack},fireWith:function(context,args){if(list&&(!fired||stack)){args=args||[];args=[context,args.slice?args.slice():args];if(firing){stack.push(args)}else{fire(args)}}return this},fire:function(){self.fireWith(this,arguments);return this},fired:function(){return!!fired}};return self};jQuery.extend({Deferred:function(func){var tuples=[["resolve","done",jQuery.Callbacks("once memory"),"resolved"],["reject","fail",jQuery.Callbacks("once memory"),"rejected"],["notify","progress",jQuery.Callbacks("memory")]],state="pending",promise={state:function(){return state},always:function(){deferred.done(arguments).fail(arguments);return this},then:function(){var fns=arguments;return jQuery.Deferred(function(newDefer){jQuery.each(tuples,function(i,tuple){var fn=jQuery.isFunction(fns[i])&&fns[i];deferred[tuple[1]](function(){var returned=fn&&fn.apply(this,arguments);if(returned&&jQuery.isFunction(returned.promise)){returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify)}else{newDefer[tuple[0]+"With"](this===promise?newDefer.promise():this,fn?[returned]:arguments)}})});fns=null}).promise()},promise:function(obj){return obj!=null?jQuery.extend(obj,promise):promise}},deferred={};promise.pipe=promise.then;jQuery.each(tuples,function(i,tuple){var list=tuple[2],stateString=tuple[3];promise[tuple[1]]=list.add;if(stateString){list.add(function(){state=stateString},tuples[i^1][2].disable,tuples[2][2].lock)}deferred[tuple[0]]=function(){deferred[tuple[0]+"With"](this===deferred?promise:this,arguments);return this};deferred[tuple[0]+"With"]=list.fireWith});promise.promise(deferred);if(func){func.call(deferred,deferred)}return deferred},when:function(subordinate){var i=0,resolveValues=slice.call(arguments),length=resolveValues.length,remaining=length!==1||subordinate&&jQuery.isFunction(subordinate.promise)?length:0,deferred=remaining===1?subordinate:jQuery.Deferred(),updateFunc=function(i,contexts,values){return function(value){contexts[i]=this;values[i]=arguments.length>1?slice.call(arguments):value;if(values===progressValues){deferred.notifyWith(contexts,values)}else if(!--remaining){deferred.resolveWith(contexts,values)}}},progressValues,progressContexts,resolveContexts;if(length>1){progressValues=new Array(length);progressContexts=new Array(length);resolveContexts=new Array(length);for(;i<length;i++){if(resolveValues[i]&&jQuery.isFunction(resolveValues[i].promise)){resolveValues[i].promise().done(updateFunc(i,resolveContexts,resolveValues)).fail(deferred.reject).progress(updateFunc(i,progressContexts,progressValues))}else{--remaining}}}if(!remaining){deferred.resolveWith(resolveContexts,resolveValues)}return deferred.promise()}});var readyList;jQuery.fn.ready=function(fn){jQuery.ready.promise().done(fn);return this};jQuery.extend({isReady:false,readyWait:1,holdReady:function(hold){if(hold){jQuery.readyWait++}else{jQuery.ready(true)}},ready:function(wait){if(wait===true?--jQuery.readyWait:jQuery.isReady){return}jQuery.isReady=true;if(wait!==true&&--jQuery.readyWait>0){return}readyList.resolveWith(document,[jQuery]);if(jQuery.fn.triggerHandler){jQuery(document).triggerHandler("ready");jQuery(document).off("ready")}}});function completed(){document.removeEventListener("DOMContentLoaded",completed,false);window.removeEventListener("load",completed,false);jQuery.ready()}jQuery.ready.promise=function(obj){if(!readyList){readyList=jQuery.Deferred();if(document.readyState==="complete"){setTimeout(jQuery.ready)}else{document.addEventListener("DOMContentLoaded",completed,false);window.addEventListener("load",completed,false)}}return readyList.promise(obj)};jQuery.ready.promise();var access=jQuery.access=function(elems,fn,key,value,chainable,emptyGet,raw){var i=0,len=elems.length,bulk=key==null;if(jQuery.type(key)==="object"){chainable=true;for(i in key){jQuery.access(elems,fn,i,key[i],true,emptyGet,raw)}}else if(value!==undefined){chainable=true;if(!jQuery.isFunction(value)){raw=true}if(bulk){if(raw){fn.call(elems,value);fn=null}else{bulk=fn;fn=function(elem,key,value){return bulk.call(jQuery(elem),value)}}}if(fn){for(;i<len;i++){fn(elems[i],key,raw?value:value.call(elems[i],i,fn(elems[i],key)))}}}return chainable?elems:bulk?fn.call(elems):len?fn(elems[0],key):emptyGet};jQuery.acceptData=function(owner){return owner.nodeType===1||owner.nodeType===9||!+owner.nodeType};function Data(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=jQuery.expando+Data.uid++}Data.uid=1;Data.accepts=jQuery.acceptData;Data.prototype={key:function(owner){if(!Data.accepts(owner)){return 0}var descriptor={},unlock=owner[this.expando];if(!unlock){unlock=Data.uid++;try{descriptor[this.expando]={value:unlock};Object.defineProperties(owner,descriptor)}catch(e){descriptor[this.expando]=unlock;jQuery.extend(owner,descriptor)}}if(!this.cache[unlock]){this.cache[unlock]={}}return unlock},set:function(owner,data,value){var prop,unlock=this.key(owner),cache=this.cache[unlock];if(typeof data==="string"){cache[data]=value}else{if(jQuery.isEmptyObject(cache)){jQuery.extend(this.cache[unlock],data)}else{for(prop in data){cache[prop]=data[prop]}}}return cache},get:function(owner,key){var cache=this.cache[this.key(owner)];return key===undefined?cache:cache[key]},access:function(owner,key,value){var stored;if(key===undefined||key&&typeof key==="string"&&value===undefined){stored=this.get(owner,key);return stored!==undefined?stored:this.get(owner,jQuery.camelCase(key))}this.set(owner,key,value);return value!==undefined?value:key},remove:function(owner,key){var i,name,camel,unlock=this.key(owner),cache=this.cache[unlock];if(key===undefined){this.cache[unlock]={}}else{if(jQuery.isArray(key)){name=key.concat(key.map(jQuery.camelCase))}else{camel=jQuery.camelCase(key);if(key in cache){name=[key,camel]}else{name=camel;name=name in cache?[name]:name.match(rnotwhite)||[]}}i=name.length;while(i--){delete cache[name[i]]}}},hasData:function(owner){return!jQuery.isEmptyObject(this.cache[owner[this.expando]]||{})},discard:function(owner){if(owner[this.expando]){delete this.cache[owner[this.expando]]}}};var data_priv=new Data;var data_user=new Data;var rbrace=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,rmultiDash=/([A-Z])/g;function dataAttr(elem,key,data){var name;if(data===undefined&&elem.nodeType===1){name="data-"+key.replace(rmultiDash,"-$1").toLowerCase();data=elem.getAttribute(name);if(typeof data==="string"){try{data=data==="true"?true:data==="false"?false:data==="null"?null:+data+""===data?+data:rbrace.test(data)?jQuery.parseJSON(data):data}catch(e){}data_user.set(elem,key,data)}else{data=undefined}}return data}jQuery.extend({hasData:function(elem){return data_user.hasData(elem)||data_priv.hasData(elem)},data:function(elem,name,data){return data_user.access(elem,name,data)},removeData:function(elem,name){data_user.remove(elem,name)},_data:function(elem,name,data){return data_priv.access(elem,name,data)},_removeData:function(elem,name){data_priv.remove(elem,name)}});jQuery.fn.extend({data:function(key,value){var i,name,data,elem=this[0],attrs=elem&&elem.attributes;if(key===undefined){if(this.length){data=data_user.get(elem);if(elem.nodeType===1&&!data_priv.get(elem,"hasDataAttrs")){i=attrs.length;while(i--){if(attrs[i]){name=attrs[i].name;if(name.indexOf("data-")===0){name=jQuery.camelCase(name.slice(5));dataAttr(elem,name,data[name])}}}data_priv.set(elem,"hasDataAttrs",true)}}return data}if(typeof key==="object"){return this.each(function(){data_user.set(this,key)})}return access(this,function(value){var data,camelKey=jQuery.camelCase(key);if(elem&&value===undefined){data=data_user.get(elem,key);if(data!==undefined){return data}data=data_user.get(elem,camelKey);if(data!==undefined){return data}data=dataAttr(elem,camelKey,undefined);if(data!==undefined){return data}return}this.each(function(){var data=data_user.get(this,camelKey);data_user.set(this,camelKey,value);if(key.indexOf("-")!==-1&&data!==undefined){data_user.set(this,key,value)}})},null,value,arguments.length>1,null,true)},removeData:function(key){return this.each(function(){data_user.remove(this,key)})}});jQuery.extend({queue:function(elem,type,data){var queue;if(elem){type=(type||"fx")+"queue";queue=data_priv.get(elem,type);if(data){if(!queue||jQuery.isArray(data)){queue=data_priv.access(elem,type,jQuery.makeArray(data))}else{queue.push(data)}}return queue||[]}},dequeue:function(elem,type){type=type||"fx";var queue=jQuery.queue(elem,type),startLength=queue.length,fn=queue.shift(),hooks=jQuery._queueHooks(elem,type),next=function(){jQuery.dequeue(elem,type)};if(fn==="inprogress"){fn=queue.shift();startLength--}if(fn){if(type==="fx"){queue.unshift("inprogress")}delete hooks.stop;fn.call(elem,next,hooks)}if(!startLength&&hooks){hooks.empty.fire()}},_queueHooks:function(elem,type){var key=type+"queueHooks";return data_priv.get(elem,key)||data_priv.access(elem,key,{empty:jQuery.Callbacks("once memory").add(function(){data_priv.remove(elem,[type+"queue",key])})})}});jQuery.fn.extend({queue:function(type,data){var setter=2;if(typeof type!=="string"){data=type;type="fx";setter--}if(arguments.length<setter){return jQuery.queue(this[0],type)}return data===undefined?this:this.each(function(){var queue=jQuery.queue(this,type,data);jQuery._queueHooks(this,type);if(type==="fx"&&queue[0]!=="inprogress"){jQuery.dequeue(this,type)}})},dequeue:function(type){return this.each(function(){jQuery.dequeue(this,type)})},clearQueue:function(type){return this.queue(type||"fx",[])},promise:function(type,obj){var tmp,count=1,defer=jQuery.Deferred(),elements=this,i=this.length,resolve=function(){if(!--count){defer.resolveWith(elements,[elements])}};if(typeof type!=="string"){obj=type;type=undefined}type=type||"fx";while(i--){tmp=data_priv.get(elements[i],type+"queueHooks");if(tmp&&tmp.empty){count++;tmp.empty.add(resolve)}}resolve();return defer.promise(obj)}});var pnum=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;var cssExpand=["Top","Right","Bottom","Left"];var isHidden=function(elem,el){elem=el||elem;return jQuery.css(elem,"display")==="none"||!jQuery.contains(elem.ownerDocument,elem)};var rcheckableType=/^(?:checkbox|radio)$/i;(function(){var fragment=document.createDocumentFragment(),div=fragment.appendChild(document.createElement("div")),input=document.createElement("input");input.setAttribute("type","radio");input.setAttribute("checked","checked");input.setAttribute("name","t");div.appendChild(input);support.checkClone=div.cloneNode(true).cloneNode(true).lastChild.checked;div.innerHTML="<textarea>x</textarea>";support.noCloneChecked=!!div.cloneNode(true).lastChild.defaultValue})();var strundefined=typeof undefined;support.focusinBubbles="onfocusin"in window;var rkeyEvent=/^key/,rmouseEvent=/^(?:mouse|pointer|contextmenu)|click/,rfocusMorph=/^(?:focusinfocus|focusoutblur)$/,rtypenamespace=/^([^.]*)(?:\.(.+)|)$/;function returnTrue(){return true}function returnFalse(){return false}function safeActiveElement(){try{return document.activeElement}catch(err){}}jQuery.event={global:{},add:function(elem,types,handler,data,selector){var handleObjIn,eventHandle,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.get(elem);if(!elemData){return}if(handler.handler){handleObjIn=handler;handler=handleObjIn.handler;selector=handleObjIn.selector}if(!handler.guid){handler.guid=jQuery.guid++}if(!(events=elemData.events)){events=elemData.events={}}if(!(eventHandle=elemData.handle)){eventHandle=elemData.handle=function(e){return typeof jQuery!==strundefined&&jQuery.event.triggered!==e.type?jQuery.event.dispatch.apply(elem,arguments):undefined}}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;special=jQuery.event.special[type]||{};handleObj=jQuery.extend({type:type,origType:origType,data:data,handler:handler,guid:handler.guid,selector:selector,needsContext:selector&&jQuery.expr.match.needsContext.test(selector),namespace:namespaces.join(".")},handleObjIn);if(!(handlers=events[type])){
handlers=events[type]=[];handlers.delegateCount=0;if(!special.setup||special.setup.call(elem,data,namespaces,eventHandle)===false){if(elem.addEventListener){elem.addEventListener(type,eventHandle,false)}}}if(special.add){special.add.call(elem,handleObj);if(!handleObj.handler.guid){handleObj.handler.guid=handler.guid}}if(selector){handlers.splice(handlers.delegateCount++,0,handleObj)}else{handlers.push(handleObj)}jQuery.event.global[type]=true}},remove:function(elem,types,handler,selector,mappedTypes){var j,origCount,tmp,events,t,handleObj,special,handlers,type,namespaces,origType,elemData=data_priv.hasData(elem)&&data_priv.get(elem);if(!elemData||!(events=elemData.events)){return}types=(types||"").match(rnotwhite)||[""];t=types.length;while(t--){tmp=rtypenamespace.exec(types[t])||[];type=origType=tmp[1];namespaces=(tmp[2]||"").split(".").sort();if(!type){for(type in events){jQuery.event.remove(elem,type+types[t],handler,selector,true)}continue}special=jQuery.event.special[type]||{};type=(selector?special.delegateType:special.bindType)||type;handlers=events[type]||[];tmp=tmp[2]&&new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)");origCount=j=handlers.length;while(j--){handleObj=handlers[j];if((mappedTypes||origType===handleObj.origType)&&(!handler||handler.guid===handleObj.guid)&&(!tmp||tmp.test(handleObj.namespace))&&(!selector||selector===handleObj.selector||selector==="**"&&handleObj.selector)){handlers.splice(j,1);if(handleObj.selector){handlers.delegateCount--}if(special.remove){special.remove.call(elem,handleObj)}}}if(origCount&&!handlers.length){if(!special.teardown||special.teardown.call(elem,namespaces,elemData.handle)===false){jQuery.removeEvent(elem,type,elemData.handle)}delete events[type]}}if(jQuery.isEmptyObject(events)){delete elemData.handle;data_priv.remove(elem,"events")}},trigger:function(event,data,elem,onlyHandlers){var i,cur,tmp,bubbleType,ontype,handle,special,eventPath=[elem||document],type=hasOwn.call(event,"type")?event.type:event,namespaces=hasOwn.call(event,"namespace")?event.namespace.split("."):[];cur=tmp=elem=elem||document;if(elem.nodeType===3||elem.nodeType===8){return}if(rfocusMorph.test(type+jQuery.event.triggered)){return}if(type.indexOf(".")>=0){namespaces=type.split(".");type=namespaces.shift();namespaces.sort()}ontype=type.indexOf(":")<0&&"on"+type;event=event[jQuery.expando]?event:new jQuery.Event(type,typeof event==="object"&&event);event.isTrigger=onlyHandlers?2:3;event.namespace=namespaces.join(".");event.namespace_re=event.namespace?new RegExp("(^|\\.)"+namespaces.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;event.result=undefined;if(!event.target){event.target=elem}data=data==null?[event]:jQuery.makeArray(data,[event]);special=jQuery.event.special[type]||{};if(!onlyHandlers&&special.trigger&&special.trigger.apply(elem,data)===false){return}if(!onlyHandlers&&!special.noBubble&&!jQuery.isWindow(elem)){bubbleType=special.delegateType||type;if(!rfocusMorph.test(bubbleType+type)){cur=cur.parentNode}for(;cur;cur=cur.parentNode){eventPath.push(cur);tmp=cur}if(tmp===(elem.ownerDocument||document)){eventPath.push(tmp.defaultView||tmp.parentWindow||window)}}i=0;while((cur=eventPath[i++])&&!event.isPropagationStopped()){event.type=i>1?bubbleType:special.bindType||type;handle=(data_priv.get(cur,"events")||{})[event.type]&&data_priv.get(cur,"handle");if(handle){handle.apply(cur,data)}handle=ontype&&cur[ontype];if(handle&&handle.apply&&jQuery.acceptData(cur)){event.result=handle.apply(cur,data);if(event.result===false){event.preventDefault()}}}event.type=type;if(!onlyHandlers&&!event.isDefaultPrevented()){if((!special._default||special._default.apply(eventPath.pop(),data)===false)&&jQuery.acceptData(elem)){if(ontype&&jQuery.isFunction(elem[type])&&!jQuery.isWindow(elem)){tmp=elem[ontype];if(tmp){elem[ontype]=null}jQuery.event.triggered=type;elem[type]();jQuery.event.triggered=undefined;if(tmp){elem[ontype]=tmp}}}}return event.result},dispatch:function(event){event=jQuery.event.fix(event);var i,j,ret,matched,handleObj,handlerQueue=[],args=slice.call(arguments),handlers=(data_priv.get(this,"events")||{})[event.type]||[],special=jQuery.event.special[event.type]||{};args[0]=event;event.delegateTarget=this;if(special.preDispatch&&special.preDispatch.call(this,event)===false){return}handlerQueue=jQuery.event.handlers.call(this,event,handlers);i=0;while((matched=handlerQueue[i++])&&!event.isPropagationStopped()){event.currentTarget=matched.elem;j=0;while((handleObj=matched.handlers[j++])&&!event.isImmediatePropagationStopped()){if(!event.namespace_re||event.namespace_re.test(handleObj.namespace)){event.handleObj=handleObj;event.data=handleObj.data;ret=((jQuery.event.special[handleObj.origType]||{}).handle||handleObj.handler).apply(matched.elem,args);if(ret!==undefined){if((event.result=ret)===false){event.preventDefault();event.stopPropagation()}}}}}if(special.postDispatch){special.postDispatch.call(this,event)}return event.result},handlers:function(event,handlers){var i,matches,sel,handleObj,handlerQueue=[],delegateCount=handlers.delegateCount,cur=event.target;if(delegateCount&&cur.nodeType&&(!event.button||event.type!=="click")){for(;cur!==this;cur=cur.parentNode||this){if(cur.disabled!==true||event.type!=="click"){matches=[];for(i=0;i<delegateCount;i++){handleObj=handlers[i];sel=handleObj.selector+" ";if(matches[sel]===undefined){matches[sel]=handleObj.needsContext?jQuery(sel,this).index(cur)>=0:jQuery.find(sel,this,null,[cur]).length}if(matches[sel]){matches.push(handleObj)}}if(matches.length){handlerQueue.push({elem:cur,handlers:matches})}}}}if(delegateCount<handlers.length){handlerQueue.push({elem:this,handlers:handlers.slice(delegateCount)})}return handlerQueue},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(event,original){if(event.which==null){event.which=original.charCode!=null?original.charCode:original.keyCode}return event}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(event,original){var eventDoc,doc,body,button=original.button;if(event.pageX==null&&original.clientX!=null){eventDoc=event.target.ownerDocument||document;doc=eventDoc.documentElement;body=eventDoc.body;event.pageX=original.clientX+(doc&&doc.scrollLeft||body&&body.scrollLeft||0)-(doc&&doc.clientLeft||body&&body.clientLeft||0);event.pageY=original.clientY+(doc&&doc.scrollTop||body&&body.scrollTop||0)-(doc&&doc.clientTop||body&&body.clientTop||0)}if(!event.which&&button!==undefined){event.which=button&1?1:button&2?3:button&4?2:0}return event}},fix:function(event){if(event[jQuery.expando]){return event}var i,prop,copy,type=event.type,originalEvent=event,fixHook=this.fixHooks[type];if(!fixHook){this.fixHooks[type]=fixHook=rmouseEvent.test(type)?this.mouseHooks:rkeyEvent.test(type)?this.keyHooks:{}}copy=fixHook.props?this.props.concat(fixHook.props):this.props;event=new jQuery.Event(originalEvent);i=copy.length;while(i--){prop=copy[i];event[prop]=originalEvent[prop]}if(!event.target){event.target=document}if(event.target.nodeType===3){event.target=event.target.parentNode}return fixHook.filter?fixHook.filter(event,originalEvent):event},special:{load:{noBubble:true},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus){this.focus();return false}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur){this.blur();return false}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&jQuery.nodeName(this,"input")){this.click();return false}},_default:function(event){return jQuery.nodeName(event.target,"a")}},beforeunload:{postDispatch:function(event){if(event.result!==undefined&&event.originalEvent){event.originalEvent.returnValue=event.result}}}},simulate:function(type,elem,event,bubble){var e=jQuery.extend(new jQuery.Event,event,{type:type,isSimulated:true,originalEvent:{}});if(bubble){jQuery.event.trigger(e,null,elem)}else{jQuery.event.dispatch.call(elem,e)}if(e.isDefaultPrevented()){event.preventDefault()}}};jQuery.removeEvent=function(elem,type,handle){if(elem.removeEventListener){elem.removeEventListener(type,handle,false)}};jQuery.Event=function(src,props){if(!(this instanceof jQuery.Event)){return new jQuery.Event(src,props)}if(src&&src.type){this.originalEvent=src;this.type=src.type;this.isDefaultPrevented=src.defaultPrevented||src.defaultPrevented===undefined&&src.returnValue===false?returnTrue:returnFalse}else{this.type=src}if(props){jQuery.extend(this,props)}this.timeStamp=src&&src.timeStamp||jQuery.now();this[jQuery.expando]=true};jQuery.Event.prototype={isDefaultPrevented:returnFalse,isPropagationStopped:returnFalse,isImmediatePropagationStopped:returnFalse,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=returnTrue;if(e&&e.preventDefault){e.preventDefault()}},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=returnTrue;if(e&&e.stopPropagation){e.stopPropagation()}},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=returnTrue;if(e&&e.stopImmediatePropagation){e.stopImmediatePropagation()}this.stopPropagation()}};jQuery.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(orig,fix){jQuery.event.special[orig]={delegateType:fix,bindType:fix,handle:function(event){var ret,target=this,related=event.relatedTarget,handleObj=event.handleObj;if(!related||related!==target&&!jQuery.contains(target,related)){event.type=handleObj.origType;ret=handleObj.handler.apply(this,arguments);event.type=fix}return ret}}});if(!support.focusinBubbles){jQuery.each({focus:"focusin",blur:"focusout"},function(orig,fix){var handler=function(event){jQuery.event.simulate(fix,event.target,jQuery.event.fix(event),true)};jQuery.event.special[fix]={setup:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix);if(!attaches){doc.addEventListener(orig,handler,true)}data_priv.access(doc,fix,(attaches||0)+1)},teardown:function(){var doc=this.ownerDocument||this,attaches=data_priv.access(doc,fix)-1;if(!attaches){doc.removeEventListener(orig,handler,true);data_priv.remove(doc,fix)}else{data_priv.access(doc,fix,attaches)}}}})}jQuery.fn.extend({on:function(types,selector,data,fn,one){var origFn,type;if(typeof types==="object"){if(typeof selector!=="string"){data=data||selector;selector=undefined}for(type in types){this.on(type,selector,data,types[type],one)}return this}if(data==null&&fn==null){fn=selector;data=selector=undefined}else if(fn==null){if(typeof selector==="string"){fn=data;data=undefined}else{fn=data;data=selector;selector=undefined}}if(fn===false){fn=returnFalse}else if(!fn){return this}if(one===1){origFn=fn;fn=function(event){jQuery().off(event);return origFn.apply(this,arguments)};fn.guid=origFn.guid||(origFn.guid=jQuery.guid++)}return this.each(function(){jQuery.event.add(this,types,fn,data,selector)})},one:function(types,selector,data,fn){return this.on(types,selector,data,fn,1)},off:function(types,selector,fn){var handleObj,type;if(types&&types.preventDefault&&types.handleObj){handleObj=types.handleObj;jQuery(types.delegateTarget).off(handleObj.namespace?handleObj.origType+"."+handleObj.namespace:handleObj.origType,handleObj.selector,handleObj.handler);return this}if(typeof types==="object"){for(type in types){this.off(type,selector,types[type])}return this}if(selector===false||typeof selector==="function"){fn=selector;selector=undefined}if(fn===false){fn=returnFalse}return this.each(function(){jQuery.event.remove(this,types,fn,selector)})},trigger:function(type,data){return this.each(function(){jQuery.event.trigger(type,data,this)})},triggerHandler:function(type,data){var elem=this[0];if(elem){return jQuery.event.trigger(type,data,elem,true)}}});var rxhtmlTag=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,rtagName=/<([\w:]+)/,rhtml=/<|&#?\w+;/,rnoInnerhtml=/<(?:script|style|link)/i,rchecked=/checked\s*(?:[^=]|=\s*.checked.)/i,rscriptType=/^$|\/(?:java|ecma)script/i,rscriptTypeMasked=/^true\/(.*)/,rcleanScript=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,wrapMap={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option;wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead;wrapMap.th=wrapMap.td;function manipulationTarget(elem,content){return jQuery.nodeName(elem,"table")&&jQuery.nodeName(content.nodeType!==11?content:content.firstChild,"tr")?elem.getElementsByTagName("tbody")[0]||elem.appendChild(elem.ownerDocument.createElement("tbody")):elem}function disableScript(elem){elem.type=(elem.getAttribute("type")!==null)+"/"+elem.type;return elem}function restoreScript(elem){var match=rscriptTypeMasked.exec(elem.type);if(match){elem.type=match[1]}else{elem.removeAttribute("type")}return elem}function setGlobalEval(elems,refElements){var i=0,l=elems.length;for(;i<l;i++){data_priv.set(elems[i],"globalEval",!refElements||data_priv.get(refElements[i],"globalEval"))}}function cloneCopyEvent(src,dest){var i,l,type,pdataOld,pdataCur,udataOld,udataCur,events;if(dest.nodeType!==1){return}if(data_priv.hasData(src)){pdataOld=data_priv.access(src);pdataCur=data_priv.set(dest,pdataOld);events=pdataOld.events;if(events){delete pdataCur.handle;pdataCur.events={};for(type in events){for(i=0,l=events[type].length;i<l;i++){jQuery.event.add(dest,type,events[type][i])}}}}if(data_user.hasData(src)){udataOld=data_user.access(src);udataCur=jQuery.extend({},udataOld);data_user.set(dest,udataCur)}}function getAll(context,tag){var ret=context.getElementsByTagName?context.getElementsByTagName(tag||"*"):context.querySelectorAll?context.querySelectorAll(tag||"*"):[];return tag===undefined||tag&&jQuery.nodeName(context,tag)?jQuery.merge([context],ret):ret}function fixInput(src,dest){var nodeName=dest.nodeName.toLowerCase();if(nodeName==="input"&&rcheckableType.test(src.type)){dest.checked=src.checked}else if(nodeName==="input"||nodeName==="textarea"){dest.defaultValue=src.defaultValue}}jQuery.extend({clone:function(elem,dataAndEvents,deepDataAndEvents){var i,l,srcElements,destElements,clone=elem.cloneNode(true),inPage=jQuery.contains(elem.ownerDocument,elem);if(!support.noCloneChecked&&(elem.nodeType===1||elem.nodeType===11)&&!jQuery.isXMLDoc(elem)){destElements=getAll(clone);srcElements=getAll(elem);for(i=0,l=srcElements.length;i<l;i++){fixInput(srcElements[i],destElements[i])}}if(dataAndEvents){if(deepDataAndEvents){srcElements=srcElements||getAll(elem);destElements=destElements||getAll(clone);for(i=0,l=srcElements.length;i<l;i++){cloneCopyEvent(srcElements[i],destElements[i])}}else{cloneCopyEvent(elem,clone)}}destElements=getAll(clone,"script");if(destElements.length>0){setGlobalEval(destElements,!inPage&&getAll(elem,"script"))}return clone},buildFragment:function(elems,context,scripts,selection){var elem,tmp,tag,wrap,contains,j,fragment=context.createDocumentFragment(),nodes=[],i=0,l=elems.length;for(;i<l;i++){elem=elems[i];if(elem||elem===0){if(jQuery.type(elem)==="object"){jQuery.merge(nodes,elem.nodeType?[elem]:elem)}else if(!rhtml.test(elem)){nodes.push(context.createTextNode(elem))}else{tmp=tmp||fragment.appendChild(context.createElement("div"));tag=(rtagName.exec(elem)||["",""])[1].toLowerCase();wrap=wrapMap[tag]||wrapMap._default;tmp.innerHTML=wrap[1]+elem.replace(rxhtmlTag,"<$1></$2>")+wrap[2];j=wrap[0];while(j--){tmp=tmp.lastChild}jQuery.merge(nodes,tmp.childNodes);tmp=fragment.firstChild;tmp.textContent=""}}}fragment.textContent="";i=0;while(elem=nodes[i++]){if(selection&&jQuery.inArray(elem,selection)!==-1){continue}contains=jQuery.contains(elem.ownerDocument,elem);tmp=getAll(fragment.appendChild(elem),"script");if(contains){setGlobalEval(tmp)}if(scripts){j=0;while(elem=tmp[j++]){if(rscriptType.test(elem.type||"")){scripts.push(elem)}}}}return fragment},cleanData:function(elems){var data,elem,type,key,special=jQuery.event.special,i=0;for(;(elem=elems[i])!==undefined;i++){if(jQuery.acceptData(elem)){key=elem[data_priv.expando];if(key&&(data=data_priv.cache[key])){if(data.events){for(type in data.events){if(special[type]){jQuery.event.remove(elem,type)}else{jQuery.removeEvent(elem,type,data.handle)}}}if(data_priv.cache[key]){delete data_priv.cache[key]}}}delete data_user.cache[elem[data_user.expando]]}}});jQuery.fn.extend({text:function(value){return access(this,function(value){return value===undefined?jQuery.text(this):this.empty().each(function(){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){this.textContent=value}})},null,value,arguments.length)},append:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.appendChild(elem)}})},prepend:function(){return this.domManip(arguments,function(elem){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var target=manipulationTarget(this,elem);target.insertBefore(elem,target.firstChild)}})},before:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this)}})},after:function(){return this.domManip(arguments,function(elem){if(this.parentNode){this.parentNode.insertBefore(elem,this.nextSibling)}})},remove:function(selector,keepData){var elem,elems=selector?jQuery.filter(selector,this):this,i=0;for(;(elem=elems[i])!=null;i++){if(!keepData&&elem.nodeType===1){jQuery.cleanData(getAll(elem))}if(elem.parentNode){if(keepData&&jQuery.contains(elem.ownerDocument,elem)){setGlobalEval(getAll(elem,"script"))}elem.parentNode.removeChild(elem)}}return this},empty:function(){var elem,i=0;for(;(elem=this[i])!=null;i++){if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.textContent=""}}return this},clone:function(dataAndEvents,deepDataAndEvents){dataAndEvents=dataAndEvents==null?false:dataAndEvents;deepDataAndEvents=deepDataAndEvents==null?dataAndEvents:deepDataAndEvents;return this.map(function(){return jQuery.clone(this,dataAndEvents,deepDataAndEvents)})},html:function(value){return access(this,function(value){var elem=this[0]||{},i=0,l=this.length;if(value===undefined&&elem.nodeType===1){return elem.innerHTML}if(typeof value==="string"&&!rnoInnerhtml.test(value)&&!wrapMap[(rtagName.exec(value)||["",""])[1].toLowerCase()]){value=value.replace(rxhtmlTag,"<$1></$2>");try{for(;i<l;i++){elem=this[i]||{};if(elem.nodeType===1){jQuery.cleanData(getAll(elem,false));elem.innerHTML=value}}elem=0}catch(e){}}if(elem){this.empty().append(value)}},null,value,arguments.length)},replaceWith:function(){var arg=arguments[0];this.domManip(arguments,function(elem){arg=this.parentNode;jQuery.cleanData(getAll(this));if(arg){arg.replaceChild(elem,this)}});return arg&&(arg.length||arg.nodeType)?this:this.remove()},detach:function(selector){return this.remove(selector,true)},domManip:function(args,callback){args=concat.apply([],args);var fragment,first,scripts,hasScripts,node,doc,i=0,l=this.length,set=this,iNoClone=l-1,value=args[0],isFunction=jQuery.isFunction(value);if(isFunction||l>1&&typeof value==="string"&&!support.checkClone&&rchecked.test(value)){return this.each(function(index){var self=set.eq(index);if(isFunction){args[0]=value.call(this,index,self.html())}self.domManip(args,callback)})}if(l){fragment=jQuery.buildFragment(args,this[0].ownerDocument,false,this);first=fragment.firstChild;if(fragment.childNodes.length===1){fragment=first}if(first){scripts=jQuery.map(getAll(fragment,"script"),disableScript);hasScripts=scripts.length;for(;i<l;i++){node=fragment;if(i!==iNoClone){node=jQuery.clone(node,true,true);if(hasScripts){jQuery.merge(scripts,getAll(node,"script"))}}callback.call(this[i],node,i)}if(hasScripts){doc=scripts[scripts.length-1].ownerDocument;jQuery.map(scripts,restoreScript);for(i=0;i<hasScripts;i++){node=scripts[i];if(rscriptType.test(node.type||"")&&!data_priv.access(node,"globalEval")&&jQuery.contains(doc,node)){if(node.src){if(jQuery._evalUrl){jQuery._evalUrl(node.src)}}else{jQuery.globalEval(node.textContent.replace(rcleanScript,""))}}}}}}return this}});jQuery.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(name,original){jQuery.fn[name]=function(selector){var elems,ret=[],insert=jQuery(selector),last=insert.length-1,i=0;for(;i<=last;i++){elems=i===last?this:this.clone(true);jQuery(insert[i])[original](elems);push.apply(ret,elems.get())}return this.pushStack(ret)}});var iframe,elemdisplay={};function actualDisplay(name,doc){var style,elem=jQuery(doc.createElement(name)).appendTo(doc.body),display=window.getDefaultComputedStyle&&(style=window.getDefaultComputedStyle(elem[0]))?style.display:jQuery.css(elem[0],"display");elem.detach();return display}function defaultDisplay(nodeName){var doc=document,display=elemdisplay[nodeName];if(!display){display=actualDisplay(nodeName,doc);if(display==="none"||!display){iframe=(iframe||jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);doc=iframe[0].contentDocument;doc.write();doc.close();display=actualDisplay(nodeName,doc);iframe.detach()}elemdisplay[nodeName]=display}return display}var rmargin=/^margin/;var rnumnonpx=new RegExp("^("+pnum+")(?!px)[a-z%]+$","i");var getStyles=function(elem){if(elem.ownerDocument.defaultView.opener){return elem.ownerDocument.defaultView.getComputedStyle(elem,null)}return window.getComputedStyle(elem,null)};function curCSS(elem,name,computed){var width,minWidth,maxWidth,ret,style=elem.style;computed=computed||getStyles(elem);if(computed){ret=computed.getPropertyValue(name)||computed[name]}if(computed){if(ret===""&&!jQuery.contains(elem.ownerDocument,elem)){ret=jQuery.style(elem,name)}if(rnumnonpx.test(ret)&&rmargin.test(name)){width=style.width;minWidth=style.minWidth;maxWidth=style.maxWidth;style.minWidth=style.maxWidth=style.width=ret;ret=computed.width;style.width=width;style.minWidth=minWidth;style.maxWidth=maxWidth}}return ret!==undefined?ret+"":ret}function addGetHookIf(conditionFn,hookFn){return{get:function(){if(conditionFn()){delete this.get;return}return(this.get=hookFn).apply(this,arguments)}}}(function(){var pixelPositionVal,boxSizingReliableVal,docElem=document.documentElement,container=document.createElement("div"),div=document.createElement("div");if(!div.style){return}div.style.backgroundClip="content-box";div.cloneNode(true).style.backgroundClip="";support.clearCloneStyle=div.style.backgroundClip==="content-box";container.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;"+"position:absolute";container.appendChild(div);function computePixelPositionAndBoxSizingReliable(){div.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;"+"box-sizing:border-box;display:block;margin-top:1%;top:1%;"+"border:1px;padding:1px;width:4px;position:absolute";div.innerHTML="";docElem.appendChild(container);var divStyle=window.getComputedStyle(div,null);pixelPositionVal=divStyle.top!=="1%";boxSizingReliableVal=divStyle.width==="4px";docElem.removeChild(container)}if(window.getComputedStyle){jQuery.extend(support,{pixelPosition:function(){computePixelPositionAndBoxSizingReliable();return pixelPositionVal},boxSizingReliable:function(){if(boxSizingReliableVal==null){computePixelPositionAndBoxSizingReliable()}return boxSizingReliableVal},reliableMarginRight:function(){var ret,marginDiv=div.appendChild(document.createElement("div"));marginDiv.style.cssText=div.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;"+"box-sizing:content-box;display:block;margin:0;border:0;padding:0";marginDiv.style.marginRight=marginDiv.style.width="0";div.style.width="1px";docElem.appendChild(container);ret=!parseFloat(window.getComputedStyle(marginDiv,null).marginRight);docElem.removeChild(container);div.removeChild(marginDiv);return ret}})}})();jQuery.swap=function(elem,options,callback,args){var ret,name,old={};for(name in options){old[name]=elem.style[name];elem.style[name]=options[name]}ret=callback.apply(elem,args||[]);for(name in options){elem.style[name]=old[name]}return ret};var rdisplayswap=/^(none|table(?!-c[ea]).+)/,rnumsplit=new RegExp("^("+pnum+")(.*)$","i"),rrelNum=new RegExp("^([+-])=("+pnum+")","i"),cssShow={position:"absolute",visibility:"hidden",display:"block"},cssNormalTransform={letterSpacing:"0",fontWeight:"400"},cssPrefixes=["Webkit","O","Moz","ms"];function vendorPropName(style,name){if(name in style){return name}var capName=name[0].toUpperCase()+name.slice(1),origName=name,i=cssPrefixes.length;while(i--){name=cssPrefixes[i]+capName;if(name in style){return name}}return origName}function setPositiveNumber(elem,value,subtract){var matches=rnumsplit.exec(value);return matches?Math.max(0,matches[1]-(subtract||0))+(matches[2]||"px"):value}function augmentWidthOrHeight(elem,name,extra,isBorderBox,styles){var i=extra===(isBorderBox?"border":"content")?4:name==="width"?1:0,val=0;for(;i<4;i+=2){if(extra==="margin"){val+=jQuery.css(elem,extra+cssExpand[i],true,styles)}if(isBorderBox){if(extra==="content"){val-=jQuery.css(elem,"padding"+cssExpand[i],true,styles)}if(extra!=="margin"){val-=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}else{val+=jQuery.css(elem,"padding"+cssExpand[i],true,styles);if(extra!=="padding"){val+=jQuery.css(elem,"border"+cssExpand[i]+"Width",true,styles)}}}return val}function getWidthOrHeight(elem,name,extra){var valueIsBorderBox=true,val=name==="width"?elem.offsetWidth:elem.offsetHeight,styles=getStyles(elem),isBorderBox=jQuery.css(elem,"boxSizing",false,styles)==="border-box";if(val<=0||val==null){val=curCSS(elem,name,styles);if(val<0||val==null){val=elem.style[name]}if(rnumnonpx.test(val)){return val}valueIsBorderBox=isBorderBox&&(support.boxSizingReliable()||val===elem.style[name]);val=parseFloat(val)||0}return val+augmentWidthOrHeight(elem,name,extra||(isBorderBox?"border":"content"),valueIsBorderBox,styles)+"px"}function showHide(elements,show){var display,elem,hidden,values=[],index=0,length=elements.length;for(;index<length;index++){elem=elements[index];if(!elem.style){continue}values[index]=data_priv.get(elem,"olddisplay");display=elem.style.display;if(show){if(!values[index]&&display==="none"){elem.style.display=""}if(elem.style.display===""&&isHidden(elem)){values[index]=data_priv.access(elem,"olddisplay",defaultDisplay(elem.nodeName))}}else{hidden=isHidden(elem);if(display!=="none"||!hidden){data_priv.set(elem,"olddisplay",hidden?display:jQuery.css(elem,"display"))}}}for(index=0;index<length;index++){elem=elements[index];if(!elem.style){continue}if(!show||elem.style.display==="none"||elem.style.display===""){elem.style.display=show?values[index]||"":"none"}}return elements}jQuery.extend({cssHooks:{opacity:{get:function(elem,computed){if(computed){var ret=curCSS(elem,"opacity");return ret===""?"1":ret}}}},cssNumber:{columnCount:true,fillOpacity:true,flexGrow:true,flexShrink:true,fontWeight:true,lineHeight:true,opacity:true,order:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":"cssFloat"},style:function(elem,name,value,extra){if(!elem||elem.nodeType===3||elem.nodeType===8||!elem.style){return}var ret,type,hooks,origName=jQuery.camelCase(name),style=elem.style;name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(value!==undefined){type=typeof value;if(type==="string"&&(ret=rrelNum.exec(value))){value=(ret[1]+1)*ret[2]+parseFloat(jQuery.css(elem,name));type="number"}if(value==null||value!==value){return}if(type==="number"&&!jQuery.cssNumber[origName]){value+="px"}if(!support.clearCloneStyle&&value===""&&name.indexOf("background")===0){style[name]="inherit"}if(!hooks||!("set"in hooks)||(value=hooks.set(elem,value,extra))!==undefined){style[name]=value}}else{if(hooks&&"get"in hooks&&(ret=hooks.get(elem,false,extra))!==undefined){return ret}return style[name]}},css:function(elem,name,extra,styles){var val,num,hooks,origName=jQuery.camelCase(name);name=jQuery.cssProps[origName]||(jQuery.cssProps[origName]=vendorPropName(elem.style,origName));hooks=jQuery.cssHooks[name]||jQuery.cssHooks[origName];if(hooks&&"get"in hooks){val=hooks.get(elem,true,extra)}if(val===undefined){val=curCSS(elem,name,styles)}if(val==="normal"&&name in cssNormalTransform){val=cssNormalTransform[name]}if(extra===""||extra){num=parseFloat(val);return extra===true||jQuery.isNumeric(num)?num||0:val}return val}});jQuery.each(["height","width"],function(i,name){jQuery.cssHooks[name]={get:function(elem,computed,extra){if(computed){return rdisplayswap.test(jQuery.css(elem,"display"))&&elem.offsetWidth===0?jQuery.swap(elem,cssShow,function(){return getWidthOrHeight(elem,name,extra)}):getWidthOrHeight(elem,name,extra)}},set:function(elem,value,extra){var styles=extra&&getStyles(elem);return setPositiveNumber(elem,value,extra?augmentWidthOrHeight(elem,name,extra,jQuery.css(elem,"boxSizing",false,styles)==="border-box",styles):0)}}});jQuery.cssHooks.marginRight=addGetHookIf(support.reliableMarginRight,function(elem,computed){if(computed){return jQuery.swap(elem,{display:"inline-block"},curCSS,[elem,"marginRight"])}});jQuery.each({margin:"",padding:"",border:"Width"},function(prefix,suffix){jQuery.cssHooks[prefix+suffix]={expand:function(value){var i=0,expanded={},parts=typeof value==="string"?value.split(" "):[value];for(;i<4;i++){expanded[prefix+cssExpand[i]+suffix]=parts[i]||parts[i-2]||parts[0]}return expanded}};if(!rmargin.test(prefix)){jQuery.cssHooks[prefix+suffix].set=setPositiveNumber}});jQuery.fn.extend({css:function(name,value){return access(this,function(elem,name,value){var styles,len,map={},i=0;if(jQuery.isArray(name)){styles=getStyles(elem);len=name.length;for(;i<len;i++){map[name[i]]=jQuery.css(elem,name[i],false,styles)}return map}return value!==undefined?jQuery.style(elem,name,value):jQuery.css(elem,name)},name,value,arguments.length>1)},show:function(){return showHide(this,true)},hide:function(){return showHide(this)},toggle:function(state){if(typeof state==="boolean"){return state?this.show():this.hide()}return this.each(function(){if(isHidden(this)){jQuery(this).show()}else{jQuery(this).hide()}})}});function Tween(elem,options,prop,end,easing){return new Tween.prototype.init(elem,options,prop,end,easing)}jQuery.Tween=Tween;Tween.prototype={constructor:Tween,init:function(elem,options,prop,end,easing,unit){this.elem=elem;this.prop=prop;this.easing=easing||"swing";this.options=options;this.start=this.now=this.cur();this.end=end;this.unit=unit||(jQuery.cssNumber[prop]?"":"px")},cur:function(){var hooks=Tween.propHooks[this.prop];return hooks&&hooks.get?hooks.get(this):Tween.propHooks._default.get(this)},run:function(percent){var eased,hooks=Tween.propHooks[this.prop];if(this.options.duration){this.pos=eased=jQuery.easing[this.easing](percent,this.options.duration*percent,0,1,this.options.duration)}else{this.pos=eased=percent}this.now=(this.end-this.start)*eased+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(hooks&&hooks.set){hooks.set(this)}else{Tween.propHooks._default.set(this)}return this}};Tween.prototype.init.prototype=Tween.prototype;Tween.propHooks={_default:{get:function(tween){var result;if(tween.elem[tween.prop]!=null&&(!tween.elem.style||tween.elem.style[tween.prop]==null)){return tween.elem[tween.prop]}result=jQuery.css(tween.elem,tween.prop,"");return!result||result==="auto"?0:result},set:function(tween){if(jQuery.fx.step[tween.prop]){jQuery.fx.step[tween.prop](tween)}else if(tween.elem.style&&(tween.elem.style[jQuery.cssProps[tween.prop]]!=null||jQuery.cssHooks[tween.prop])){jQuery.style(tween.elem,tween.prop,tween.now+tween.unit);
}else{tween.elem[tween.prop]=tween.now}}}};Tween.propHooks.scrollTop=Tween.propHooks.scrollLeft={set:function(tween){if(tween.elem.nodeType&&tween.elem.parentNode){tween.elem[tween.prop]=tween.now}}};jQuery.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2}};jQuery.fx=Tween.prototype.init;jQuery.fx.step={};var fxNow,timerId,rfxtypes=/^(?:toggle|show|hide)$/,rfxnum=new RegExp("^(?:([+-])=|)("+pnum+")([a-z%]*)$","i"),rrun=/queueHooks$/,animationPrefilters=[defaultPrefilter],tweeners={"*":[function(prop,value){var tween=this.createTween(prop,value),target=tween.cur(),parts=rfxnum.exec(value),unit=parts&&parts[3]||(jQuery.cssNumber[prop]?"":"px"),start=(jQuery.cssNumber[prop]||unit!=="px"&&+target)&&rfxnum.exec(jQuery.css(tween.elem,prop)),scale=1,maxIterations=20;if(start&&start[3]!==unit){unit=unit||start[3];parts=parts||[];start=+target||1;do{scale=scale||".5";start=start/scale;jQuery.style(tween.elem,prop,start+unit)}while(scale!==(scale=tween.cur()/target)&&scale!==1&&--maxIterations)}if(parts){start=tween.start=+start||+target||0;tween.unit=unit;tween.end=parts[1]?start+(parts[1]+1)*parts[2]:+parts[2]}return tween}]};function createFxNow(){setTimeout(function(){fxNow=undefined});return fxNow=jQuery.now()}function genFx(type,includeWidth){var which,i=0,attrs={height:type};includeWidth=includeWidth?1:0;for(;i<4;i+=2-includeWidth){which=cssExpand[i];attrs["margin"+which]=attrs["padding"+which]=type}if(includeWidth){attrs.opacity=attrs.width=type}return attrs}function createTween(value,prop,animation){var tween,collection=(tweeners[prop]||[]).concat(tweeners["*"]),index=0,length=collection.length;for(;index<length;index++){if(tween=collection[index].call(animation,prop,value)){return tween}}}function defaultPrefilter(elem,props,opts){var prop,value,toggle,tween,hooks,oldfire,display,checkDisplay,anim=this,orig={},style=elem.style,hidden=elem.nodeType&&isHidden(elem),dataShow=data_priv.get(elem,"fxshow");if(!opts.queue){hooks=jQuery._queueHooks(elem,"fx");if(hooks.unqueued==null){hooks.unqueued=0;oldfire=hooks.empty.fire;hooks.empty.fire=function(){if(!hooks.unqueued){oldfire()}}}hooks.unqueued++;anim.always(function(){anim.always(function(){hooks.unqueued--;if(!jQuery.queue(elem,"fx").length){hooks.empty.fire()}})})}if(elem.nodeType===1&&("height"in props||"width"in props)){opts.overflow=[style.overflow,style.overflowX,style.overflowY];display=jQuery.css(elem,"display");checkDisplay=display==="none"?data_priv.get(elem,"olddisplay")||defaultDisplay(elem.nodeName):display;if(checkDisplay==="inline"&&jQuery.css(elem,"float")==="none"){style.display="inline-block"}}if(opts.overflow){style.overflow="hidden";anim.always(function(){style.overflow=opts.overflow[0];style.overflowX=opts.overflow[1];style.overflowY=opts.overflow[2]})}for(prop in props){value=props[prop];if(rfxtypes.exec(value)){delete props[prop];toggle=toggle||value==="toggle";if(value===(hidden?"hide":"show")){if(value==="show"&&dataShow&&dataShow[prop]!==undefined){hidden=true}else{continue}}orig[prop]=dataShow&&dataShow[prop]||jQuery.style(elem,prop)}else{display=undefined}}if(!jQuery.isEmptyObject(orig)){if(dataShow){if("hidden"in dataShow){hidden=dataShow.hidden}}else{dataShow=data_priv.access(elem,"fxshow",{})}if(toggle){dataShow.hidden=!hidden}if(hidden){jQuery(elem).show()}else{anim.done(function(){jQuery(elem).hide()})}anim.done(function(){var prop;data_priv.remove(elem,"fxshow");for(prop in orig){jQuery.style(elem,prop,orig[prop])}});for(prop in orig){tween=createTween(hidden?dataShow[prop]:0,prop,anim);if(!(prop in dataShow)){dataShow[prop]=tween.start;if(hidden){tween.end=tween.start;tween.start=prop==="width"||prop==="height"?1:0}}}}else if((display==="none"?defaultDisplay(elem.nodeName):display)==="inline"){style.display=display}}function propFilter(props,specialEasing){var index,name,easing,value,hooks;for(index in props){name=jQuery.camelCase(index);easing=specialEasing[name];value=props[index];if(jQuery.isArray(value)){easing=value[1];value=props[index]=value[0]}if(index!==name){props[name]=value;delete props[index]}hooks=jQuery.cssHooks[name];if(hooks&&"expand"in hooks){value=hooks.expand(value);delete props[name];for(index in value){if(!(index in props)){props[index]=value[index];specialEasing[index]=easing}}}else{specialEasing[name]=easing}}}function Animation(elem,properties,options){var result,stopped,index=0,length=animationPrefilters.length,deferred=jQuery.Deferred().always(function(){delete tick.elem}),tick=function(){if(stopped){return false}var currentTime=fxNow||createFxNow(),remaining=Math.max(0,animation.startTime+animation.duration-currentTime),temp=remaining/animation.duration||0,percent=1-temp,index=0,length=animation.tweens.length;for(;index<length;index++){animation.tweens[index].run(percent)}deferred.notifyWith(elem,[animation,percent,remaining]);if(percent<1&&length){return remaining}else{deferred.resolveWith(elem,[animation]);return false}},animation=deferred.promise({elem:elem,props:jQuery.extend({},properties),opts:jQuery.extend(true,{specialEasing:{}},options),originalProperties:properties,originalOptions:options,startTime:fxNow||createFxNow(),duration:options.duration,tweens:[],createTween:function(prop,end){var tween=jQuery.Tween(elem,animation.opts,prop,end,animation.opts.specialEasing[prop]||animation.opts.easing);animation.tweens.push(tween);return tween},stop:function(gotoEnd){var index=0,length=gotoEnd?animation.tweens.length:0;if(stopped){return this}stopped=true;for(;index<length;index++){animation.tweens[index].run(1)}if(gotoEnd){deferred.resolveWith(elem,[animation,gotoEnd])}else{deferred.rejectWith(elem,[animation,gotoEnd])}return this}}),props=animation.props;propFilter(props,animation.opts.specialEasing);for(;index<length;index++){result=animationPrefilters[index].call(animation,elem,props,animation.opts);if(result){return result}}jQuery.map(props,createTween,animation);if(jQuery.isFunction(animation.opts.start)){animation.opts.start.call(elem,animation)}jQuery.fx.timer(jQuery.extend(tick,{elem:elem,anim:animation,queue:animation.opts.queue}));return animation.progress(animation.opts.progress).done(animation.opts.done,animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always)}jQuery.Animation=jQuery.extend(Animation,{tweener:function(props,callback){if(jQuery.isFunction(props)){callback=props;props=["*"]}else{props=props.split(" ")}var prop,index=0,length=props.length;for(;index<length;index++){prop=props[index];tweeners[prop]=tweeners[prop]||[];tweeners[prop].unshift(callback)}},prefilter:function(callback,prepend){if(prepend){animationPrefilters.unshift(callback)}else{animationPrefilters.push(callback)}}});jQuery.speed=function(speed,easing,fn){var opt=speed&&typeof speed==="object"?jQuery.extend({},speed):{complete:fn||!fn&&easing||jQuery.isFunction(speed)&&speed,duration:speed,easing:fn&&easing||easing&&!jQuery.isFunction(easing)&&easing};opt.duration=jQuery.fx.off?0:typeof opt.duration==="number"?opt.duration:opt.duration in jQuery.fx.speeds?jQuery.fx.speeds[opt.duration]:jQuery.fx.speeds._default;if(opt.queue==null||opt.queue===true){opt.queue="fx"}opt.old=opt.complete;opt.complete=function(){if(jQuery.isFunction(opt.old)){opt.old.call(this)}if(opt.queue){jQuery.dequeue(this,opt.queue)}};return opt};jQuery.fn.extend({fadeTo:function(speed,to,easing,callback){return this.filter(isHidden).css("opacity",0).show().end().animate({opacity:to},speed,easing,callback)},animate:function(prop,speed,easing,callback){var empty=jQuery.isEmptyObject(prop),optall=jQuery.speed(speed,easing,callback),doAnimation=function(){var anim=Animation(this,jQuery.extend({},prop),optall);if(empty||data_priv.get(this,"finish")){anim.stop(true)}};doAnimation.finish=doAnimation;return empty||optall.queue===false?this.each(doAnimation):this.queue(optall.queue,doAnimation)},stop:function(type,clearQueue,gotoEnd){var stopQueue=function(hooks){var stop=hooks.stop;delete hooks.stop;stop(gotoEnd)};if(typeof type!=="string"){gotoEnd=clearQueue;clearQueue=type;type=undefined}if(clearQueue&&type!==false){this.queue(type||"fx",[])}return this.each(function(){var dequeue=true,index=type!=null&&type+"queueHooks",timers=jQuery.timers,data=data_priv.get(this);if(index){if(data[index]&&data[index].stop){stopQueue(data[index])}}else{for(index in data){if(data[index]&&data[index].stop&&rrun.test(index)){stopQueue(data[index])}}}for(index=timers.length;index--;){if(timers[index].elem===this&&(type==null||timers[index].queue===type)){timers[index].anim.stop(gotoEnd);dequeue=false;timers.splice(index,1)}}if(dequeue||!gotoEnd){jQuery.dequeue(this,type)}})},finish:function(type){if(type!==false){type=type||"fx"}return this.each(function(){var index,data=data_priv.get(this),queue=data[type+"queue"],hooks=data[type+"queueHooks"],timers=jQuery.timers,length=queue?queue.length:0;data.finish=true;jQuery.queue(this,type,[]);if(hooks&&hooks.stop){hooks.stop.call(this,true)}for(index=timers.length;index--;){if(timers[index].elem===this&&timers[index].queue===type){timers[index].anim.stop(true);timers.splice(index,1)}}for(index=0;index<length;index++){if(queue[index]&&queue[index].finish){queue[index].finish.call(this)}}delete data.finish})}});jQuery.each(["toggle","show","hide"],function(i,name){var cssFn=jQuery.fn[name];jQuery.fn[name]=function(speed,easing,callback){return speed==null||typeof speed==="boolean"?cssFn.apply(this,arguments):this.animate(genFx(name,true),speed,easing,callback)}});jQuery.each({slideDown:genFx("show"),slideUp:genFx("hide"),slideToggle:genFx("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(name,props){jQuery.fn[name]=function(speed,easing,callback){return this.animate(props,speed,easing,callback)}});jQuery.timers=[];jQuery.fx.tick=function(){var timer,i=0,timers=jQuery.timers;fxNow=jQuery.now();for(;i<timers.length;i++){timer=timers[i];if(!timer()&&timers[i]===timer){timers.splice(i--,1)}}if(!timers.length){jQuery.fx.stop()}fxNow=undefined};jQuery.fx.timer=function(timer){jQuery.timers.push(timer);if(timer()){jQuery.fx.start()}else{jQuery.timers.pop()}};jQuery.fx.interval=13;jQuery.fx.start=function(){if(!timerId){timerId=setInterval(jQuery.fx.tick,jQuery.fx.interval)}};jQuery.fx.stop=function(){clearInterval(timerId);timerId=null};jQuery.fx.speeds={slow:600,fast:200,_default:400};jQuery.fn.delay=function(time,type){time=jQuery.fx?jQuery.fx.speeds[time]||time:time;type=type||"fx";return this.queue(type,function(next,hooks){var timeout=setTimeout(next,time);hooks.stop=function(){clearTimeout(timeout)}})};(function(){var input=document.createElement("input"),select=document.createElement("select"),opt=select.appendChild(document.createElement("option"));input.type="checkbox";support.checkOn=input.value!=="";support.optSelected=opt.selected;select.disabled=true;support.optDisabled=!opt.disabled;input=document.createElement("input");input.value="t";input.type="radio";support.radioValue=input.value==="t"})();var nodeHook,boolHook,attrHandle=jQuery.expr.attrHandle;jQuery.fn.extend({attr:function(name,value){return access(this,jQuery.attr,name,value,arguments.length>1)},removeAttr:function(name){return this.each(function(){jQuery.removeAttr(this,name)})}});jQuery.extend({attr:function(elem,name,value){var hooks,ret,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}if(typeof elem.getAttribute===strundefined){return jQuery.prop(elem,name,value)}if(nType!==1||!jQuery.isXMLDoc(elem)){name=name.toLowerCase();hooks=jQuery.attrHooks[name]||(jQuery.expr.match.bool.test(name)?boolHook:nodeHook)}if(value!==undefined){if(value===null){jQuery.removeAttr(elem,name)}else if(hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined){return ret}else{elem.setAttribute(name,value+"");return value}}else if(hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null){return ret}else{ret=jQuery.find.attr(elem,name);return ret==null?undefined:ret}},removeAttr:function(elem,value){var name,propName,i=0,attrNames=value&&value.match(rnotwhite);if(attrNames&&elem.nodeType===1){while(name=attrNames[i++]){propName=jQuery.propFix[name]||name;if(jQuery.expr.match.bool.test(name)){elem[propName]=false}elem.removeAttribute(name)}}},attrHooks:{type:{set:function(elem,value){if(!support.radioValue&&value==="radio"&&jQuery.nodeName(elem,"input")){var val=elem.value;elem.setAttribute("type",value);if(val){elem.value=val}return value}}}}});boolHook={set:function(elem,value,name){if(value===false){jQuery.removeAttr(elem,name)}else{elem.setAttribute(name,name)}return name}};jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g),function(i,name){var getter=attrHandle[name]||jQuery.find.attr;attrHandle[name]=function(elem,name,isXML){var ret,handle;if(!isXML){handle=attrHandle[name];attrHandle[name]=ret;ret=getter(elem,name,isXML)!=null?name.toLowerCase():null;attrHandle[name]=handle}return ret}});var rfocusable=/^(?:input|select|textarea|button)$/i;jQuery.fn.extend({prop:function(name,value){return access(this,jQuery.prop,name,value,arguments.length>1)},removeProp:function(name){return this.each(function(){delete this[jQuery.propFix[name]||name]})}});jQuery.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(elem,name,value){var ret,hooks,notxml,nType=elem.nodeType;if(!elem||nType===3||nType===8||nType===2){return}notxml=nType!==1||!jQuery.isXMLDoc(elem);if(notxml){name=jQuery.propFix[name]||name;hooks=jQuery.propHooks[name]}if(value!==undefined){return hooks&&"set"in hooks&&(ret=hooks.set(elem,value,name))!==undefined?ret:elem[name]=value}else{return hooks&&"get"in hooks&&(ret=hooks.get(elem,name))!==null?ret:elem[name]}},propHooks:{tabIndex:{get:function(elem){return elem.hasAttribute("tabindex")||rfocusable.test(elem.nodeName)||elem.href?elem.tabIndex:-1}}}});if(!support.optSelected){jQuery.propHooks.selected={get:function(elem){var parent=elem.parentNode;if(parent&&parent.parentNode){parent.parentNode.selectedIndex}return null}}}jQuery.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){jQuery.propFix[this.toLowerCase()]=this});var rclass=/[\t\r\n\f]/g;jQuery.fn.extend({addClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).addClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):" ");if(cur){j=0;while(clazz=classes[j++]){if(cur.indexOf(" "+clazz+" ")<0){cur+=clazz+" "}}finalValue=jQuery.trim(cur);if(elem.className!==finalValue){elem.className=finalValue}}}}return this},removeClass:function(value){var classes,elem,cur,clazz,j,finalValue,proceed=arguments.length===0||typeof value==="string"&&value,i=0,len=this.length;if(jQuery.isFunction(value)){return this.each(function(j){jQuery(this).removeClass(value.call(this,j,this.className))})}if(proceed){classes=(value||"").match(rnotwhite)||[];for(;i<len;i++){elem=this[i];cur=elem.nodeType===1&&(elem.className?(" "+elem.className+" ").replace(rclass," "):"");if(cur){j=0;while(clazz=classes[j++]){while(cur.indexOf(" "+clazz+" ")>=0){cur=cur.replace(" "+clazz+" "," ")}}finalValue=value?jQuery.trim(cur):"";if(elem.className!==finalValue){elem.className=finalValue}}}}return this},toggleClass:function(value,stateVal){var type=typeof value;if(typeof stateVal==="boolean"&&type==="string"){return stateVal?this.addClass(value):this.removeClass(value)}if(jQuery.isFunction(value)){return this.each(function(i){jQuery(this).toggleClass(value.call(this,i,this.className,stateVal),stateVal)})}return this.each(function(){if(type==="string"){var className,i=0,self=jQuery(this),classNames=value.match(rnotwhite)||[];while(className=classNames[i++]){if(self.hasClass(className)){self.removeClass(className)}else{self.addClass(className)}}}else if(type===strundefined||type==="boolean"){if(this.className){data_priv.set(this,"__className__",this.className)}this.className=this.className||value===false?"":data_priv.get(this,"__className__")||""}})},hasClass:function(selector){var className=" "+selector+" ",i=0,l=this.length;for(;i<l;i++){if(this[i].nodeType===1&&(" "+this[i].className+" ").replace(rclass," ").indexOf(className)>=0){return true}}return false}});var rreturn=/\r/g;jQuery.fn.extend({val:function(value){var hooks,ret,isFunction,elem=this[0];if(!arguments.length){if(elem){hooks=jQuery.valHooks[elem.type]||jQuery.valHooks[elem.nodeName.toLowerCase()];if(hooks&&"get"in hooks&&(ret=hooks.get(elem,"value"))!==undefined){return ret}ret=elem.value;return typeof ret==="string"?ret.replace(rreturn,""):ret==null?"":ret}return}isFunction=jQuery.isFunction(value);return this.each(function(i){var val;if(this.nodeType!==1){return}if(isFunction){val=value.call(this,i,jQuery(this).val())}else{val=value}if(val==null){val=""}else if(typeof val==="number"){val+=""}else if(jQuery.isArray(val)){val=jQuery.map(val,function(value){return value==null?"":value+""})}hooks=jQuery.valHooks[this.type]||jQuery.valHooks[this.nodeName.toLowerCase()];if(!hooks||!("set"in hooks)||hooks.set(this,val,"value")===undefined){this.value=val}})}});jQuery.extend({valHooks:{option:{get:function(elem){var val=jQuery.find.attr(elem,"value");return val!=null?val:jQuery.trim(jQuery.text(elem))}},select:{get:function(elem){var value,option,options=elem.options,index=elem.selectedIndex,one=elem.type==="select-one"||index<0,values=one?null:[],max=one?index+1:options.length,i=index<0?max:one?index:0;for(;i<max;i++){option=options[i];if((option.selected||i===index)&&(support.optDisabled?!option.disabled:option.getAttribute("disabled")===null)&&(!option.parentNode.disabled||!jQuery.nodeName(option.parentNode,"optgroup"))){value=jQuery(option).val();if(one){return value}values.push(value)}}return values},set:function(elem,value){var optionSet,option,options=elem.options,values=jQuery.makeArray(value),i=options.length;while(i--){option=options[i];if(option.selected=jQuery.inArray(option.value,values)>=0){optionSet=true}}if(!optionSet){elem.selectedIndex=-1}return values}}}});jQuery.each(["radio","checkbox"],function(){jQuery.valHooks[this]={set:function(elem,value){if(jQuery.isArray(value)){return elem.checked=jQuery.inArray(jQuery(elem).val(),value)>=0}}};if(!support.checkOn){jQuery.valHooks[this].get=function(elem){return elem.getAttribute("value")===null?"on":elem.value}}});jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(i,name){jQuery.fn[name]=function(data,fn){return arguments.length>0?this.on(name,null,data,fn):this.trigger(name)}});jQuery.fn.extend({hover:function(fnOver,fnOut){return this.mouseenter(fnOver).mouseleave(fnOut||fnOver)},bind:function(types,data,fn){return this.on(types,null,data,fn)},unbind:function(types,fn){return this.off(types,null,fn)},delegate:function(selector,types,data,fn){return this.on(types,selector,data,fn)},undelegate:function(selector,types,fn){return arguments.length===1?this.off(selector,"**"):this.off(types,selector||"**",fn)}});var nonce=jQuery.now();var rquery=/\?/;jQuery.parseJSON=function(data){return JSON.parse(data+"")};jQuery.parseXML=function(data){var xml,tmp;if(!data||typeof data!=="string"){return null}try{tmp=new DOMParser;xml=tmp.parseFromString(data,"text/xml")}catch(e){xml=undefined}if(!xml||xml.getElementsByTagName("parsererror").length){jQuery.error("Invalid XML: "+data)}return xml};var rhash=/#.*$/,rts=/([?&])_=[^&]*/,rheaders=/^(.*?):[ \t]*([^\r\n]*)$/gm,rlocalProtocol=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,rnoContent=/^(?:GET|HEAD)$/,rprotocol=/^\/\//,rurl=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,prefilters={},transports={},allTypes="*/".concat("*"),ajaxLocation=window.location.href,ajaxLocParts=rurl.exec(ajaxLocation.toLowerCase())||[];function addToPrefiltersOrTransports(structure){return function(dataTypeExpression,func){if(typeof dataTypeExpression!=="string"){func=dataTypeExpression;dataTypeExpression="*"}var dataType,i=0,dataTypes=dataTypeExpression.toLowerCase().match(rnotwhite)||[];if(jQuery.isFunction(func)){while(dataType=dataTypes[i++]){if(dataType[0]==="+"){dataType=dataType.slice(1)||"*";(structure[dataType]=structure[dataType]||[]).unshift(func)}else{(structure[dataType]=structure[dataType]||[]).push(func)}}}}}function inspectPrefiltersOrTransports(structure,options,originalOptions,jqXHR){var inspected={},seekingTransport=structure===transports;function inspect(dataType){var selected;inspected[dataType]=true;jQuery.each(structure[dataType]||[],function(_,prefilterOrFactory){var dataTypeOrTransport=prefilterOrFactory(options,originalOptions,jqXHR);if(typeof dataTypeOrTransport==="string"&&!seekingTransport&&!inspected[dataTypeOrTransport]){options.dataTypes.unshift(dataTypeOrTransport);inspect(dataTypeOrTransport);return false}else if(seekingTransport){return!(selected=dataTypeOrTransport)}});return selected}return inspect(options.dataTypes[0])||!inspected["*"]&&inspect("*")}function ajaxExtend(target,src){var key,deep,flatOptions=jQuery.ajaxSettings.flatOptions||{};for(key in src){if(src[key]!==undefined){(flatOptions[key]?target:deep||(deep={}))[key]=src[key]}}if(deep){jQuery.extend(true,target,deep)}return target}function ajaxHandleResponses(s,jqXHR,responses){var ct,type,finalDataType,firstDataType,contents=s.contents,dataTypes=s.dataTypes;while(dataTypes[0]==="*"){dataTypes.shift();if(ct===undefined){ct=s.mimeType||jqXHR.getResponseHeader("Content-Type")}}if(ct){for(type in contents){if(contents[type]&&contents[type].test(ct)){dataTypes.unshift(type);break}}}if(dataTypes[0]in responses){finalDataType=dataTypes[0]}else{for(type in responses){if(!dataTypes[0]||s.converters[type+" "+dataTypes[0]]){finalDataType=type;break}if(!firstDataType){firstDataType=type}}finalDataType=finalDataType||firstDataType}if(finalDataType){if(finalDataType!==dataTypes[0]){dataTypes.unshift(finalDataType)}return responses[finalDataType]}}function ajaxConvert(s,response,jqXHR,isSuccess){var conv2,current,conv,tmp,prev,converters={},dataTypes=s.dataTypes.slice();if(dataTypes[1]){for(conv in s.converters){converters[conv.toLowerCase()]=s.converters[conv]}}current=dataTypes.shift();while(current){if(s.responseFields[current]){jqXHR[s.responseFields[current]]=response}if(!prev&&isSuccess&&s.dataFilter){response=s.dataFilter(response,s.dataType)}prev=current;current=dataTypes.shift();if(current){if(current==="*"){current=prev}else if(prev!=="*"&&prev!==current){conv=converters[prev+" "+current]||converters["* "+current];if(!conv){for(conv2 in converters){tmp=conv2.split(" ");if(tmp[1]===current){conv=converters[prev+" "+tmp[0]]||converters["* "+tmp[0]];if(conv){if(conv===true){conv=converters[conv2]}else if(converters[conv2]!==true){current=tmp[0];dataTypes.unshift(tmp[1])}break}}}}if(conv!==true){if(conv&&s["throws"]){response=conv(response)}else{try{response=conv(response)}catch(e){return{state:"parsererror",error:conv?e:"No conversion from "+prev+" to "+current}}}}}}}return{state:"success",data:response}}jQuery.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ajaxLocation,type:"GET",isLocal:rlocalProtocol.test(ajaxLocParts[1]),global:true,processData:true,async:true,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":allTypes,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":true,"text json":jQuery.parseJSON,"text xml":jQuery.parseXML},flatOptions:{url:true,context:true}},ajaxSetup:function(target,settings){return settings?ajaxExtend(ajaxExtend(target,jQuery.ajaxSettings),settings):ajaxExtend(jQuery.ajaxSettings,target)},ajaxPrefilter:addToPrefiltersOrTransports(prefilters),ajaxTransport:addToPrefiltersOrTransports(transports),ajax:function(url,options){if(typeof url==="object"){options=url;url=undefined}options=options||{};var transport,cacheURL,responseHeadersString,responseHeaders,timeoutTimer,parts,fireGlobals,i,s=jQuery.ajaxSetup({},options),callbackContext=s.context||s,globalEventContext=s.context&&(callbackContext.nodeType||callbackContext.jquery)?jQuery(callbackContext):jQuery.event,deferred=jQuery.Deferred(),completeDeferred=jQuery.Callbacks("once memory"),statusCode=s.statusCode||{},requestHeaders={},requestHeadersNames={},state=0,strAbort="canceled",jqXHR={readyState:0,getResponseHeader:function(key){var match;if(state===2){if(!responseHeaders){responseHeaders={};while(match=rheaders.exec(responseHeadersString)){responseHeaders[match[1].toLowerCase()]=match[2]}}match=responseHeaders[key.toLowerCase()]}return match==null?null:match},getAllResponseHeaders:function(){return state===2?responseHeadersString:null},setRequestHeader:function(name,value){var lname=name.toLowerCase();if(!state){name=requestHeadersNames[lname]=requestHeadersNames[lname]||name;requestHeaders[name]=value}return this},overrideMimeType:function(type){if(!state){s.mimeType=type}return this},statusCode:function(map){var code;if(map){if(state<2){for(code in map){statusCode[code]=[statusCode[code],map[code]]}}else{jqXHR.always(map[jqXHR.status])}}return this},abort:function(statusText){var finalText=statusText||strAbort;if(transport){transport.abort(finalText)}done(0,finalText);return this}};deferred.promise(jqXHR).complete=completeDeferred.add;jqXHR.success=jqXHR.done;jqXHR.error=jqXHR.fail;s.url=((url||s.url||ajaxLocation)+"").replace(rhash,"").replace(rprotocol,ajaxLocParts[1]+"//");s.type=options.method||options.type||s.method||s.type;s.dataTypes=jQuery.trim(s.dataType||"*").toLowerCase().match(rnotwhite)||[""];if(s.crossDomain==null){parts=rurl.exec(s.url.toLowerCase());s.crossDomain=!!(parts&&(parts[1]!==ajaxLocParts[1]||parts[2]!==ajaxLocParts[2]||(parts[3]||(parts[1]==="http:"?"80":"443"))!==(ajaxLocParts[3]||(ajaxLocParts[1]==="http:"?"80":"443"))))}if(s.data&&s.processData&&typeof s.data!=="string"){s.data=jQuery.param(s.data,s.traditional)}inspectPrefiltersOrTransports(prefilters,s,options,jqXHR);if(state===2){return jqXHR}fireGlobals=jQuery.event&&s.global;if(fireGlobals&&jQuery.active++===0){jQuery.event.trigger("ajaxStart")}s.type=s.type.toUpperCase();s.hasContent=!rnoContent.test(s.type);cacheURL=s.url;if(!s.hasContent){if(s.data){cacheURL=s.url+=(rquery.test(cacheURL)?"&":"?")+s.data;delete s.data}if(s.cache===false){s.url=rts.test(cacheURL)?cacheURL.replace(rts,"$1_="+nonce++):cacheURL+(rquery.test(cacheURL)?"&":"?")+"_="+nonce++}}if(s.ifModified){if(jQuery.lastModified[cacheURL]){jqXHR.setRequestHeader("If-Modified-Since",jQuery.lastModified[cacheURL])}if(jQuery.etag[cacheURL]){jqXHR.setRequestHeader("If-None-Match",jQuery.etag[cacheURL])}}if(s.data&&s.hasContent&&s.contentType!==false||options.contentType){jqXHR.setRequestHeader("Content-Type",s.contentType)}jqXHR.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+(s.dataTypes[0]!=="*"?", "+allTypes+"; q=0.01":""):s.accepts["*"]);for(i in s.headers){jqXHR.setRequestHeader(i,s.headers[i])}if(s.beforeSend&&(s.beforeSend.call(callbackContext,jqXHR,s)===false||state===2)){return jqXHR.abort()}strAbort="abort";for(i in{success:1,error:1,complete:1}){jqXHR[i](s[i])}transport=inspectPrefiltersOrTransports(transports,s,options,jqXHR);if(!transport){done(-1,"No Transport")}else{jqXHR.readyState=1;if(fireGlobals){globalEventContext.trigger("ajaxSend",[jqXHR,s])}if(s.async&&s.timeout>0){timeoutTimer=setTimeout(function(){jqXHR.abort("timeout")},s.timeout)}try{state=1;transport.send(requestHeaders,done)}catch(e){if(state<2){done(-1,e)}else{throw e}}}function done(status,nativeStatusText,responses,headers){var isSuccess,success,error,response,modified,statusText=nativeStatusText;if(state===2){return}state=2;if(timeoutTimer){clearTimeout(timeoutTimer)}transport=undefined;responseHeadersString=headers||"";jqXHR.readyState=status>0?4:0;isSuccess=status>=200&&status<300||status===304;if(responses){response=ajaxHandleResponses(s,jqXHR,responses)}response=ajaxConvert(s,response,jqXHR,isSuccess);if(isSuccess){if(s.ifModified){modified=jqXHR.getResponseHeader("Last-Modified");if(modified){jQuery.lastModified[cacheURL]=modified}modified=jqXHR.getResponseHeader("etag");if(modified){jQuery.etag[cacheURL]=modified}}if(status===204||s.type==="HEAD"){statusText="nocontent"}else if(status===304){statusText="notmodified"}else{statusText=response.state;success=response.data;error=response.error;isSuccess=!error}}else{error=statusText;if(status||!statusText){statusText="error";if(status<0){status=0}}}jqXHR.status=status;jqXHR.statusText=(nativeStatusText||statusText)+"";if(isSuccess){deferred.resolveWith(callbackContext,[success,statusText,jqXHR])}else{deferred.rejectWith(callbackContext,[jqXHR,statusText,error])}jqXHR.statusCode(statusCode);statusCode=undefined;if(fireGlobals){globalEventContext.trigger(isSuccess?"ajaxSuccess":"ajaxError",[jqXHR,s,isSuccess?success:error])}completeDeferred.fireWith(callbackContext,[jqXHR,statusText]);if(fireGlobals){globalEventContext.trigger("ajaxComplete",[jqXHR,s]);if(!--jQuery.active){jQuery.event.trigger("ajaxStop")}}}return jqXHR},getJSON:function(url,data,callback){return jQuery.get(url,data,callback,"json")},getScript:function(url,callback){return jQuery.get(url,undefined,callback,"script")}});jQuery.each(["get","post"],function(i,method){jQuery[method]=function(url,data,callback,type){if(jQuery.isFunction(data)){type=type||callback;callback=data;data=undefined}return jQuery.ajax({url:url,type:method,dataType:type,data:data,success:callback})}});jQuery._evalUrl=function(url){return jQuery.ajax({url:url,type:"GET",dataType:"script",async:false,global:false,"throws":true})};jQuery.fn.extend({wrapAll:function(html){var wrap;if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapAll(html.call(this,i))})}if(this[0]){wrap=jQuery(html,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){wrap.insertBefore(this[0])}wrap.map(function(){var elem=this;while(elem.firstElementChild){elem=elem.firstElementChild}return elem}).append(this)}return this},wrapInner:function(html){if(jQuery.isFunction(html)){return this.each(function(i){jQuery(this).wrapInner(html.call(this,i))})}return this.each(function(){var self=jQuery(this),contents=self.contents();if(contents.length){contents.wrapAll(html)}else{self.append(html)}})},wrap:function(html){var isFunction=jQuery.isFunction(html);return this.each(function(i){jQuery(this).wrapAll(isFunction?html.call(this,i):html)})},unwrap:function(){return this.parent().each(function(){if(!jQuery.nodeName(this,"body")){jQuery(this).replaceWith(this.childNodes)}}).end()}});jQuery.expr.filters.hidden=function(elem){return elem.offsetWidth<=0&&elem.offsetHeight<=0};jQuery.expr.filters.visible=function(elem){return!jQuery.expr.filters.hidden(elem)};var r20=/%20/g,rbracket=/\[\]$/,rCRLF=/\r?\n/g,rsubmitterTypes=/^(?:submit|button|image|reset|file)$/i,rsubmittable=/^(?:input|select|textarea|keygen)/i;function buildParams(prefix,obj,traditional,add){var name;if(jQuery.isArray(obj)){jQuery.each(obj,function(i,v){if(traditional||rbracket.test(prefix)){add(prefix,v)}else{buildParams(prefix+"["+(typeof v==="object"?i:"")+"]",v,traditional,add)}})}else if(!traditional&&jQuery.type(obj)==="object"){for(name in obj){buildParams(prefix+"["+name+"]",obj[name],traditional,add)}}else{add(prefix,obj)}}jQuery.param=function(a,traditional){var prefix,s=[],add=function(key,value){value=jQuery.isFunction(value)?value():value==null?"":value;s[s.length]=encodeURIComponent(key)+"="+encodeURIComponent(value);
};if(traditional===undefined){traditional=jQuery.ajaxSettings&&jQuery.ajaxSettings.traditional}if(jQuery.isArray(a)||a.jquery&&!jQuery.isPlainObject(a)){jQuery.each(a,function(){add(this.name,this.value)})}else{for(prefix in a){buildParams(prefix,a[prefix],traditional,add)}}return s.join("&").replace(r20,"+")};jQuery.fn.extend({serialize:function(){return jQuery.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var elements=jQuery.prop(this,"elements");return elements?jQuery.makeArray(elements):this}).filter(function(){var type=this.type;return this.name&&!jQuery(this).is(":disabled")&&rsubmittable.test(this.nodeName)&&!rsubmitterTypes.test(type)&&(this.checked||!rcheckableType.test(type))}).map(function(i,elem){var val=jQuery(this).val();return val==null?null:jQuery.isArray(val)?jQuery.map(val,function(val){return{name:elem.name,value:val.replace(rCRLF,"\r\n")}}):{name:elem.name,value:val.replace(rCRLF,"\r\n")}}).get()}});jQuery.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var xhrId=0,xhrCallbacks={},xhrSuccessStatus={0:200,1223:204},xhrSupported=jQuery.ajaxSettings.xhr();if(window.attachEvent){window.attachEvent("onunload",function(){for(var key in xhrCallbacks){xhrCallbacks[key]()}})}support.cors=!!xhrSupported&&"withCredentials"in xhrSupported;support.ajax=xhrSupported=!!xhrSupported;jQuery.ajaxTransport(function(options){var callback;if(support.cors||xhrSupported&&!options.crossDomain){return{send:function(headers,complete){var i,xhr=options.xhr(),id=++xhrId;xhr.open(options.type,options.url,options.async,options.username,options.password);if(options.xhrFields){for(i in options.xhrFields){xhr[i]=options.xhrFields[i]}}if(options.mimeType&&xhr.overrideMimeType){xhr.overrideMimeType(options.mimeType)}if(!options.crossDomain&&!headers["X-Requested-With"]){headers["X-Requested-With"]="XMLHttpRequest"}for(i in headers){xhr.setRequestHeader(i,headers[i])}callback=function(type){return function(){if(callback){delete xhrCallbacks[id];callback=xhr.onload=xhr.onerror=null;if(type==="abort"){xhr.abort()}else if(type==="error"){complete(xhr.status,xhr.statusText)}else{complete(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,typeof xhr.responseText==="string"?{text:xhr.responseText}:undefined,xhr.getAllResponseHeaders())}}}};xhr.onload=callback();xhr.onerror=callback("error");callback=xhrCallbacks[id]=callback("abort");try{xhr.send(options.hasContent&&options.data||null)}catch(e){if(callback){throw e}}},abort:function(){if(callback){callback()}}}}});jQuery.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(text){jQuery.globalEval(text);return text}}});jQuery.ajaxPrefilter("script",function(s){if(s.cache===undefined){s.cache=false}if(s.crossDomain){s.type="GET"}});jQuery.ajaxTransport("script",function(s){if(s.crossDomain){var script,callback;return{send:function(_,complete){script=jQuery("<script>").prop({async:true,charset:s.scriptCharset,src:s.url}).on("load error",callback=function(evt){script.remove();callback=null;if(evt){complete(evt.type==="error"?404:200,evt.type)}});document.head.appendChild(script[0])},abort:function(){if(callback){callback()}}}}});var oldCallbacks=[],rjsonp=/(=)\?(?=&|$)|\?\?/;jQuery.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var callback=oldCallbacks.pop()||jQuery.expando+"_"+nonce++;this[callback]=true;return callback}});jQuery.ajaxPrefilter("json jsonp",function(s,originalSettings,jqXHR){var callbackName,overwritten,responseContainer,jsonProp=s.jsonp!==false&&(rjsonp.test(s.url)?"url":typeof s.data==="string"&&!(s.contentType||"").indexOf("application/x-www-form-urlencoded")&&rjsonp.test(s.data)&&"data");if(jsonProp||s.dataTypes[0]==="jsonp"){callbackName=s.jsonpCallback=jQuery.isFunction(s.jsonpCallback)?s.jsonpCallback():s.jsonpCallback;if(jsonProp){s[jsonProp]=s[jsonProp].replace(rjsonp,"$1"+callbackName)}else if(s.jsonp!==false){s.url+=(rquery.test(s.url)?"&":"?")+s.jsonp+"="+callbackName}s.converters["script json"]=function(){if(!responseContainer){jQuery.error(callbackName+" was not called")}return responseContainer[0]};s.dataTypes[0]="json";overwritten=window[callbackName];window[callbackName]=function(){responseContainer=arguments};jqXHR.always(function(){window[callbackName]=overwritten;if(s[callbackName]){s.jsonpCallback=originalSettings.jsonpCallback;oldCallbacks.push(callbackName)}if(responseContainer&&jQuery.isFunction(overwritten)){overwritten(responseContainer[0])}responseContainer=overwritten=undefined});return"script"}});jQuery.parseHTML=function(data,context,keepScripts){if(!data||typeof data!=="string"){return null}if(typeof context==="boolean"){keepScripts=context;context=false}context=context||document;var parsed=rsingleTag.exec(data),scripts=!keepScripts&&[];if(parsed){return[context.createElement(parsed[1])]}parsed=jQuery.buildFragment([data],context,scripts);if(scripts&&scripts.length){jQuery(scripts).remove()}return jQuery.merge([],parsed.childNodes)};var _load=jQuery.fn.load;jQuery.fn.load=function(url,params,callback){if(typeof url!=="string"&&_load){return _load.apply(this,arguments)}var selector,type,response,self=this,off=url.indexOf(" ");if(off>=0){selector=jQuery.trim(url.slice(off));url=url.slice(0,off)}if(jQuery.isFunction(params)){callback=params;params=undefined}else if(params&&typeof params==="object"){type="POST"}if(self.length>0){jQuery.ajax({url:url,type:type,dataType:"html",data:params}).done(function(responseText){response=arguments;self.html(selector?jQuery("<div>").append(jQuery.parseHTML(responseText)).find(selector):responseText)}).complete(callback&&function(jqXHR,status){self.each(callback,response||[jqXHR.responseText,status,jqXHR])})}return this};jQuery.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,type){jQuery.fn[type]=function(fn){return this.on(type,fn)}});jQuery.expr.filters.animated=function(elem){return jQuery.grep(jQuery.timers,function(fn){return elem===fn.elem}).length};var docElem=window.document.documentElement;function getWindow(elem){return jQuery.isWindow(elem)?elem:elem.nodeType===9&&elem.defaultView}jQuery.offset={setOffset:function(elem,options,i){var curPosition,curLeft,curCSSTop,curTop,curOffset,curCSSLeft,calculatePosition,position=jQuery.css(elem,"position"),curElem=jQuery(elem),props={};if(position==="static"){elem.style.position="relative"}curOffset=curElem.offset();curCSSTop=jQuery.css(elem,"top");curCSSLeft=jQuery.css(elem,"left");calculatePosition=(position==="absolute"||position==="fixed")&&(curCSSTop+curCSSLeft).indexOf("auto")>-1;if(calculatePosition){curPosition=curElem.position();curTop=curPosition.top;curLeft=curPosition.left}else{curTop=parseFloat(curCSSTop)||0;curLeft=parseFloat(curCSSLeft)||0}if(jQuery.isFunction(options)){options=options.call(elem,i,curOffset)}if(options.top!=null){props.top=options.top-curOffset.top+curTop}if(options.left!=null){props.left=options.left-curOffset.left+curLeft}if("using"in options){options.using.call(elem,props)}else{curElem.css(props)}}};jQuery.fn.extend({offset:function(options){if(arguments.length){return options===undefined?this:this.each(function(i){jQuery.offset.setOffset(this,options,i)})}var docElem,win,elem=this[0],box={top:0,left:0},doc=elem&&elem.ownerDocument;if(!doc){return}docElem=doc.documentElement;if(!jQuery.contains(docElem,elem)){return box}if(typeof elem.getBoundingClientRect!==strundefined){box=elem.getBoundingClientRect()}win=getWindow(doc);return{top:box.top+win.pageYOffset-docElem.clientTop,left:box.left+win.pageXOffset-docElem.clientLeft}},position:function(){if(!this[0]){return}var offsetParent,offset,elem=this[0],parentOffset={top:0,left:0};if(jQuery.css(elem,"position")==="fixed"){offset=elem.getBoundingClientRect()}else{offsetParent=this.offsetParent();offset=this.offset();if(!jQuery.nodeName(offsetParent[0],"html")){parentOffset=offsetParent.offset()}parentOffset.top+=jQuery.css(offsetParent[0],"borderTopWidth",true);parentOffset.left+=jQuery.css(offsetParent[0],"borderLeftWidth",true)}return{top:offset.top-parentOffset.top-jQuery.css(elem,"marginTop",true),left:offset.left-parentOffset.left-jQuery.css(elem,"marginLeft",true)}},offsetParent:function(){return this.map(function(){var offsetParent=this.offsetParent||docElem;while(offsetParent&&(!jQuery.nodeName(offsetParent,"html")&&jQuery.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return offsetParent||docElem})}});jQuery.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(method,prop){var top="pageYOffset"===prop;jQuery.fn[method]=function(val){return access(this,function(elem,method,val){var win=getWindow(elem);if(val===undefined){return win?win[prop]:elem[method]}if(win){win.scrollTo(!top?val:window.pageXOffset,top?val:window.pageYOffset)}else{elem[method]=val}},method,val,arguments.length,null)}});jQuery.each(["top","left"],function(i,prop){jQuery.cssHooks[prop]=addGetHookIf(support.pixelPosition,function(elem,computed){if(computed){computed=curCSS(elem,prop);return rnumnonpx.test(computed)?jQuery(elem).position()[prop]+"px":computed}})});jQuery.each({Height:"height",Width:"width"},function(name,type){jQuery.each({padding:"inner"+name,content:type,"":"outer"+name},function(defaultExtra,funcName){jQuery.fn[funcName]=function(margin,value){var chainable=arguments.length&&(defaultExtra||typeof margin!=="boolean"),extra=defaultExtra||(margin===true||value===true?"margin":"border");return access(this,function(elem,type,value){var doc;if(jQuery.isWindow(elem)){return elem.document.documentElement["client"+name]}if(elem.nodeType===9){doc=elem.documentElement;return Math.max(elem.body["scroll"+name],doc["scroll"+name],elem.body["offset"+name],doc["offset"+name],doc["client"+name])}return value===undefined?jQuery.css(elem,type,extra):jQuery.style(elem,type,value,extra)},type,chainable?margin:undefined,chainable,null)}})});jQuery.fn.size=function(){return this.length};jQuery.fn.andSelf=jQuery.fn.addBack;if(typeof define==="function"&&define.amd){define("jquery",[],function(){return jQuery})}var _jQuery=window.jQuery,_$=window.$;jQuery.noConflict=function(deep){if(window.$===jQuery){window.$=_$}if(deep&&window.jQuery===jQuery){window.jQuery=_jQuery}return jQuery};if(typeof noGlobal===strundefined){window.jQuery=window.$=jQuery}return jQuery})},{}],5:[function(require,module,exports){(function(){"use strict";var util=require("./util");var hasOwn={}.hasOwnProperty;function Component(parser,matchCache,qualifierName,qualifier,arg,args,name){this.arg=arg;this.args=args;this.matchCache=matchCache;this.name=name;this.parser=parser;this.qualifier=qualifier;this.qualifierName=qualifierName}util.extend(Component.prototype,{match:function(text,offset,options){var component=this,match,subMatch;if(hasOwn.call(component.matchCache,offset)){return component.matchCache[offset]}subMatch=component.qualifier(text,offset,component.arg,component.args,options);if(subMatch===null){component.matchCache[offset]=null;return null}if(options.ignoreWhitespace!==false){component.parser.logFurthestMatch(subMatch,offset+subMatch.textOffset)}else{component.parser.logFurthestIgnoreMatch(subMatch,offset+subMatch.textOffset)}if(component.name!==null||component.args.allowMerge===false||component.args.captureOffsetAs){match={components:{},textLength:subMatch.textLength,textOffset:subMatch.textOffset};if(subMatch.name){match.components.name=subMatch.name}if(component.name!==null){match.components[component.name]=subMatch.components}if(component.args.captureOffsetAs){(function(offset){match.components[component.args.captureOffsetAs]={line:util.getLineNumber(text,offset),offset:offset}})(offset+match.textOffset)}}else{if(util.isArray(subMatch.components)){if(allElementsAreStrings(subMatch.components)){match={components:subMatch.components.join(""),textLength:subMatch.textLength}}else{match={components:{},textLength:subMatch.textLength};util.each(subMatch.components,function(value){if(util.isPlainObject(value)){util.copy(match.components,value)}})}if(subMatch.name){match.components.name=subMatch.name}match.textOffset=subMatch.textOffset}else{match=subMatch}}component.matchCache[offset]=match;return match}});function allElementsAreStrings(array){var allStrings=true;util.each(array,function(element){if(!util.isString(element)){allStrings=false;return false}});return allStrings}module.exports=Component})()},{"./util":55}],6:[function(require,module,exports){(function(){"use strict";var util=require("./util"),Exception=require("./Exception/Exception"),Promise=require("./Promise");function Engine(parser,interpreter){this.interpreter=interpreter;this.parser=parser}util.extend(Engine.prototype,{configure:function(options){this.interpreter.configure(options)},execute:function(code,path){var ast,engine=this,promise=new Promise;path=arguments.length>1?path:null;engine.parser.getState().setPath(path);engine.interpreter.getState().setPath(path);try{ast=engine.parser.parse(code);engine.interpreter.interpret(ast).done(function(value,type){promise.resolve(value,type)}).fail(function(exception){promise.reject(exception)})}catch(exception){if(!(exception instanceof Exception)){throw exception}promise.reject(exception)}return promise},expose:function(object,name){this.interpreter.expose(object,name)},getEnvironment:function(){return this.interpreter.getEnvironment()},getStderr:function(){return this.interpreter.stderr},getStdin:function(){return this.interpreter.stdin},getStdout:function(){return this.interpreter.stdout}});module.exports=Engine})()},{"./Exception/Exception":8,"./Promise":13,"./util":55}],7:[function(require,module,exports){(function(){"use strict";var util=require("./util");function EventEmitter(){this.listeners={}}util.extend(EventEmitter.prototype,{emit:function(eventName){var args=[].slice.call(arguments,1),eventEmitter=this,listeners=eventEmitter.listeners[eventName];if(listeners){util.each(listeners,function(listener){listener.callback.apply(eventEmitter,args)})}return eventEmitter},off:function(eventName,filter,callback){var eventEmitter=this,listeners=eventEmitter.listeners[eventName];if(util.isFunction(filter)){callback=filter;filter=null}if(listeners){util.each(listeners,function(listener,index){if(listener.callback===callback&&listener.filter===filter){listeners.splice(index,1);return false}})}return eventEmitter},on:function(eventName,filter,callback){var eventEmitter=this;if(!eventEmitter.listeners[eventName]){eventEmitter.listeners[eventName]=[]}if(util.isFunction(filter)){callback=filter;filter=null}if(filter){callback=function(callback){return function(){var actualArgs=[].slice.call(arguments),match=true;util.each(filter,function(expectedArg,index){if(actualArgs[index]!==expectedArg){match=false;return false}});if(match){callback.apply(eventEmitter,actualArgs.slice(filter.length))}}}(callback)}eventEmitter.listeners[eventName].push({callback:callback,filter:filter});return eventEmitter},one:function(eventName,filter,callback){var eventEmitter=this;return eventEmitter.on(eventName,filter,function proxy(){eventEmitter.off(eventName,filter,proxy);callback.apply(this,arguments)})}});module.exports=EventEmitter})()},{"./util":55}],8:[function(require,module,exports){(function(){"use strict";var util=require("./../util");function Exception(message){this.message=message}util.inherit(Exception).from(Error);util.extend(Exception.prototype,{type:"Exception",getMessage:function(){return this.message}});module.exports=Exception})()},{"./../util":55}],9:[function(require,module,exports){(function(){"use strict";var util=require("./../util"),Exception=require("./Exception");function ParseException(message,text,furthestMatch,furthestMatchOffset,furthestIgnoreMatch,furthestIgnoreMatchOffset){Exception.call(this,message);this.furthestIgnoreMatch=furthestIgnoreMatch;this.furthestIgnoreMatchOffset=furthestIgnoreMatchOffset;this.furthestMatch=furthestMatch;this.furthestMatchOffset=furthestMatchOffset;this.text=text}util.inherit(ParseException).from(Exception);util.extend(ParseException.prototype,{getFurthestMatchEnd:function(){var exception=this;if(exception.furthestIgnoreMatchOffset>exception.furthestMatchOffset){return exception.furthestIgnoreMatchOffset+exception.furthestIgnoreMatch.textLength}return exception.furthestMatchOffset+exception.furthestMatch.textLength},getLineNumber:function(){var exception=this;return util.getLineNumber(exception.text,exception.getFurthestMatchEnd())},getText:function(){return this.text},unexpectedEndOfInput:function(){var exception=this;return exception.getFurthestMatchEnd()===exception.text.length}});module.exports=ParseException})()},{"./../util":55,"./Exception":8}],10:[function(require,module,exports){(function(){"use strict";var util=require("./util"),Exception=require("./Exception/Exception");var hasOwn={}.hasOwnProperty;function Interpreter(spec,stdin,stdout,stderr,options){this.engine=null;this.environment=null;this.options=options||{};this.spec=spec;this.state=null;this.stderr=stderr;this.stdin=stdin;this.stdout=stdout}util.extend(Interpreter.prototype,{configure:function(options){util.extend(this.options,options)},expose:function(object,name){var globalScope=this.getEnvironment().getGlobalScope();globalScope.expose(object,name)},getEnvironment:function(){var interpreter=this;if(!interpreter.environment){interpreter.environment=new interpreter.spec.Environment(interpreter.getState())}return interpreter.environment},getState:function(){var interpreter=this,spec=interpreter.spec;if(!interpreter.state&&spec.State){interpreter.state=new spec.State(interpreter.stdout,interpreter.stderr,interpreter.engine,interpreter.options)}return interpreter.state},interpret:function(node,data){var interpreter=this,nodeName,spec=interpreter.spec,stderr=interpreter.stderr,stdin=interpreter.stdin,stdout=interpreter.stdout;if(!hasOwn.call(node,"name")){throw new Exception("Interpreter.interpret() :: Invalid AST node provided")}if(arguments.length===1){data=interpreter.getState()}nodeName=node.name;if(!hasOwn.call(spec.nodes,nodeName)){throw new Exception('Interpreter.interpret() :: Spec does not define how to handle node "'+nodeName+'"')}return spec.nodes[nodeName].call(interpreter,node,function(node,newData){if(arguments.length===1){newData=data}else if(newData&&typeof newData==="object"){newData=util.extend({},data,newData)}if(util.isString(node)){return node}else{return interpreter.interpret(node,newData)}},data,stdin,stdout,stderr)},setEngine:function(engine){this.engine=engine}});module.exports=Interpreter})()},{"./Exception/Exception":8,"./util":55}],11:[function(require,module,exports){(function(){"use strict";var util=require("./util"),Engine=require("./Engine"),Interpreter=require("./Interpreter"),Parser=require("./Parser"),Stream=require("./Stream");function Language(name,grammarSpec,interpreterSpec){this.name=name;this.grammarSpec=grammarSpec;this.interpreterSpec=interpreterSpec}util.extend(Language.prototype,{createEngine:function(options){var language=this,stderr=new Stream,stdin=new Stream,stdout=new Stream,interpreter=new Interpreter(language.interpreterSpec,stdin,stdout,stderr,options),parser=new Parser(language.grammarSpec,stderr),engine=new Engine(parser,interpreter);interpreter.setEngine(engine);return engine},createParser:function(){var language=this,stderr=new Stream,parser=new Parser(language.grammarSpec,stderr);return parser},getName:function(){return this.name}});module.exports=Language})()},{"./Engine":6,"./Interpreter":10,"./Parser":12,"./Stream":52,"./util":55}],12:[function(require,module,exports){(function(){"use strict";var util=require("./util"),Component=require("./Component"),Exception=require("./Exception/Exception"),ParseException=require("./Exception/Parse"),Rule=require("./Rule");var hasOwn={}.hasOwnProperty;function Parser(grammarSpec,stderr){this.errorHandler=null;this.furthestIgnoreMatch=null;this.furthestIgnoreMatchOffset=-1;this.furthestMatch=null;this.furthestMatchOffset=-1;this.grammarSpec=grammarSpec;this.matchCaches=[];this.state=null;this.stderr=stderr;(function(parser){function anchorRegex(regex){if(regex.source.charAt(0)!=="^"){regex=new RegExp("^(?:"+regex.source+")",regex.toString().match(/[^\/]*$/)[0])}return regex}function createMatchCache(){var matchCache={};parser.matchCaches.push(matchCache);return matchCache}var qualifiers={allOf:function(text,offset,arg,args,options){var matches=[],textLength=0,textOffset=null;util.each(arg,function(component){var componentMatch=component.match(text,offset+(textOffset||0)+textLength,options);if(componentMatch===null){matches=null;return false}textLength+=componentMatch.textLength;matches.push(componentMatch.components);if(textOffset===null){textOffset=componentMatch.textOffset}else{textLength+=componentMatch.textOffset}});return matches?{components:matches,textLength:textLength,textOffset:textOffset||0}:null},oneOf:function(text,offset,arg,args,options){var match=null;util.each(arg,function(component){var componentMatch=component.match(text,offset,options);if(componentMatch!==null){match=componentMatch;return false}});return match},oneOrMoreOf:function(text,offset,arg,args,options){var componentMatch,matches=[],textLength=0,textOffset=null;while((componentMatch=arg.match(text,offset+(textOffset||0)+textLength,options))!==null){textLength+=componentMatch.textLength;matches.push(componentMatch.components);if(textOffset===null){textOffset=componentMatch.textOffset}else{textLength+=componentMatch.textOffset}}return matches.length>0?{components:matches,textLength:textLength,textOffset:textOffset||0}:null},optionally:function(text,offset,arg,args,options){var match=arg.match(text,offset,options);if(match){if(args.wrapInArray){return{components:[match.components],textLength:match.textLength,textOffset:match.textOffset}}return match}return{components:args.wrapInArray?[]:"",textLength:0,textOffset:0}},rule:function(text,offset,arg,args,options){var expectedText=hasOwn.call(args,"text")?args.text:null,match=arg.match(text,offset,options);if(match===null){return null}return expectedText===null||text.substr(offset+match.textOffset,match.textLength)===expectedText?match:null},what:function(text,offset,arg,args,options){var captureIndex,match,result,whitespaceLength=0;function skipWhitespace(){var match;if(parser.ignoreRule&&options.ignoreWhitespace!==false&&args.ignoreWhitespace!==false){while(match=parser.ignoreRule.match(text,offset+whitespaceLength,{ignoreWhitespace:false})){whitespaceLength+=match.textLength}}}function replace(string){if(args.replace){util.each(args.replace,function(data){string=string.replace(data.pattern,data.replacement)})}return string}if(util.isString(arg)){skipWhitespace();if(text.substr(offset+whitespaceLength,arg.length)===arg){return{components:arg,textLength:arg.length,textOffset:whitespaceLength}}}else if(arg instanceof RegExp){skipWhitespace();match=text.substr(offset+whitespaceLength).match(arg);if(match){captureIndex=args.captureIndex||0;return{components:replace(match[captureIndex]),textLength:match[0].length,textOffset:whitespaceLength}}}else if(arg instanceof Component){result=arg.match(text,offset,options);if(util.isString(result)){result=replace(result)}else if(result&&util.isString(result.components)){result.components=replace(result.components)}return result}else if(util.isFunction(arg)){skipWhitespace();return arg(text,offset,whitespaceLength,options)}else{throw new Exception('Parser "what" qualifier :: Invalid argument "'+arg+'"')}return null},zeroOrMoreOf:function(text,offset,arg,args,options){var componentMatch,matches=[],textLength=0,textOffset=null;while(componentMatch=arg.match(text,offset+(textOffset||0)+textLength,options)){textLength+=componentMatch.textLength;matches.push(componentMatch.components);if(textOffset===null){textOffset=componentMatch.textOffset}else{textLength+=componentMatch.textOffset}}return{components:matches,textLength:textLength,textOffset:textOffset||0}}},rules={};rules["<BOF>"]=new Rule("<BOF>",null,null);rules["<BOF>"].setComponent(new Component(parser,createMatchCache(),"what",qualifiers.what,function(text,offset,textOffset){return offset===0?{components:"",textLength:0,textOffset:textOffset}:null},{},null));rules["<EOF>"]=new Rule("<EOF>",null,null);rules["<EOF>"].setComponent(new Component(parser,createMatchCache(),"what",qualifiers.what,function(text,offset,textOffset){return offset+textOffset===text.length?{components:"",textLength:0,textOffset:textOffset}:null},{},null));util.each(grammarSpec.rules,function(ruleSpec,name){var rule;rule=new Rule(name,ruleSpec.captureAs||null,ruleSpec.ifNoMatch||null,ruleSpec.processor||null,ruleSpec.options||null);rules[name]=rule});util.each(grammarSpec.rules,function(ruleSpec,name){function createComponent(componentSpec){var arg,args={},name=null,qualifierName=null;if(util.isArray(componentSpec)){qualifierName="allOf";arg=[];util.each(componentSpec,function(componentSpec,index){arg[index]=createComponent(componentSpec)})}else if(util.isString(componentSpec)){qualifierName="rule";arg=rules[componentSpec];if(!arg){throw new Exception('Parser :: Invalid component - no rule with name "'+componentSpec+'" exists')}}else if(componentSpec instanceof RegExp){componentSpec=anchorRegex(componentSpec);qualifierName="what";arg=componentSpec}else if(util.isPlainObject(componentSpec)){util.each(qualifiers,function(qualifier,name){var value;if(hasOwn.call(componentSpec,name)){value=componentSpec[name];qualifierName=name;if(qualifierName==="oneOf"){arg=[];util.each(value,function(value,index){arg[index]=createComponent(value)})}else if(qualifierName==="optionally"){arg=createComponent(value)}else{arg=value instanceof RegExp?anchorRegex(value):createComponent(value)}return false}});if(!qualifierName){if(Object.keys(componentSpec).length!==1){throw new Exception("Parser :: Invalid component - no valid qualifier referenced by spec: "+JSON.stringify(componentSpec))}(function(){var name=Object.keys(componentSpec)[0];qualifierName="rule";arg=rules[name];if(!arg){throw new Exception('Parser :: Invalid component - no rule with name "'+name+'" exists')}args.text=componentSpec[name]})()}util.each(componentSpec,function(value,name){if(name!==qualifierName&&name!=="name"){args[name]=value}});if(hasOwn.call(componentSpec,"name")){name=componentSpec.name}}else{throw new Exception('Parser :: Invalid componentSpec "'+componentSpec+'" specified')}if(!qualifiers[qualifierName]){throw new Exception('Parser :: Invalid component - qualifier name "'+qualifierName+'" is invalid')}return new Component(parser,createMatchCache(),qualifierName,qualifiers[qualifierName],arg,args,name)}rules[name].setComponent(createComponent(ruleSpec.components||ruleSpec))});parser.ignoreRule=rules[grammarSpec.ignore]||null;parser.startRule=rules[grammarSpec.start]})(this)}util.extend(Parser.prototype,{getErrorHandler:function(){var parser=this;if(!parser.errorHandler&&parser.grammarSpec.ErrorHandler){parser.errorHandler=new parser.grammarSpec.ErrorHandler(parser.stderr,parser.getState())}return parser.errorHandler},getState:function(){var parser=this;if(!parser.state&&parser.grammarSpec.State){parser.state=new parser.grammarSpec.State}return parser.state},logFurthestIgnoreMatch:function(match,offset){var parser=this;if(offset>=parser.furthestIgnoreMatchOffset&&match.textLength>0){parser.furthestIgnoreMatch=match;parser.furthestIgnoreMatchOffset=offset}},logFurthestMatch:function(match,offset){var parser=this;if(offset>=parser.furthestMatchOffset&&match.textLength>0){parser.furthestMatch=match;parser.furthestMatchOffset=offset}},parse:function(text,options){var parser=this,errorHandler=parser.getErrorHandler(),rule=parser.startRule,match;util.each(parser.matchCaches,function(matchCache){util.each(matchCache,function(value,name){delete matchCache[name]})});parser.furthestIgnoreMatch=null;parser.furthestIgnoreMatchOffset=-1;parser.furthestMatch=null;parser.furthestMatchOffset=-1;match=rule.match(text,0,options);if(errorHandler&&(match===null||match.textLength<text.length)){errorHandler.handle(new ParseException("Parser.parse() :: Unexpected "+(match?'"'+text.charAt(match.textLength)+'"':"$end"),text,parser.furthestMatch,parser.furthestMatchOffset,parser.furthestIgnoreMatch,parser.furthestIgnoreMatchOffset))}return match!==null?match.components:null}});module.exports=Parser})()},{"./Component":5,"./Exception/Exception":8,"./Exception/Parse":9,"./Rule":50,"./util":55}],13:[function(require,module,exports){(function(){"use strict";var util=require("./util"),SimplePromise=require("./SimplePromise");var parent=SimplePromise.prototype,slice=[].slice;function Promise(){SimplePromise.call(this)}util.inherit(Promise).from(SimplePromise);util.extend(Promise.prototype,{always:function(callback){return this.then(callback,callback)},done:function(callback){return this.then(callback)},fail:function(callback){return this.then(null,callback)},resolve:function(){return parent.resolve.call(this,slice.call(arguments))},then:function(onResolve,onReject){return parent.then.call(this,onResolve?function(args){onResolve.apply(null,args)}:null,onReject)}});module.exports=Promise})()},{"./SimplePromise":51,"./util":55}],14:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../util");var Syntax=estraverse.Syntax;function BlockContext(functionContext){this.functionContext=functionContext;this.switchCases=[];this.transformNext=null}util.extend(BlockContext.prototype,{addAssignment:function(name){var context=this,index=context.functionContext.getNextStatementIndex();return{assign:function(expressionNode){if(!expressionNode){throw new Error("Expression node must be specified")}context.functionContext.addAssignment(index,name);context.switchCases[index]=createSwitchCase({type:Syntax.ExpressionStatement,expression:{type:Syntax.AssignmentExpression,operator:"=",left:{type:Syntax.Identifier,name:name},right:expressionNode}},index)}}},getSwitchStatement:function(){var switchCases=[];util.each(this.switchCases,function(switchCase){if(switchCase){if(util.isArray(switchCase)){[].push.apply(switchCases,switchCase)}else{switchCases.push(switchCase)}}});return{type:Syntax.SwitchStatement,discriminant:{type:Syntax.Identifier,name:"statementIndex"},cases:switchCases}},prepareStatement:function(){var context=this,endIndex=null,index=context.functionContext.getNextStatementIndex();return{assign:function(statementNode,nextIndex){var i,switchCases=[];if(context.transformNext){statementNode=context.transformNext(statementNode);context.transformNext=null}if(!endIndex){endIndex=context.functionContext.getCurrentStatementIndex()}for(i=index;i<endIndex-1;i++){switchCases.push({type:Syntax.SwitchCase,test:{type:Syntax.Literal,value:i},consequent:i===index?[esprima.parse("statementIndex = "+(index+1)+";").body[0]]:[]})}switchCases.push(createSwitchCase(statementNode,endIndex-1,nextIndex));context.switchCases[index]=switchCases},captureEndIndex:function(){endIndex=context.functionContext.getCurrentStatementIndex()},getEndIndex:function(){return endIndex},getIndex:function(){return index}}},transformNextStatement:function(transformer){this.transformNext=transformer}});function createSwitchCase(statementNode,index,nextIndex){if(!nextIndex){nextIndex=index+1}return{type:Syntax.SwitchCase,test:{type:Syntax.Literal,value:index},consequent:[statementNode,esprima.parse("statementIndex = "+nextIndex+";").body[0]]}}module.exports=BlockContext})()},{"./../util":55,esprima:122,estraverse:123}],15:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var ELEMENTS="elements",Syntax=estraverse.Syntax;function ArrayExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ArrayExpressionTranspiler.prototype,{
getNodeType:function(){return Syntax.ArrayExpression},transpile:function(node,parent,functionContext,blockContext){var transpiler=this;return{type:Syntax.ArrayExpression,elements:transpiler.expressionTranspiler.transpileArray(node[ELEMENTS],node,functionContext,blockContext)}}});module.exports=ArrayExpressionTranspiler})()},{"./../../util":55,estraverse:123}],16:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var LEFT="left",OPERATOR="operator",RIGHT="right",Syntax=estraverse.Syntax;function AssignmentExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(AssignmentExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.AssignmentExpression},transpile:function(node,parent,functionContext,blockContext){var left,right,transpiler=this;left=transpiler.expressionTranspiler.transpile(node[LEFT],node,functionContext,blockContext,{assignment:true});if(node[OPERATOR]==="="){right=node[RIGHT]}else{right={type:Syntax.BinaryExpression,operator:node[OPERATOR].charAt(0),left:node[LEFT],right:node[RIGHT]}}right=transpiler.expressionTranspiler.transpile(right,node,functionContext,blockContext);return{type:Syntax.AssignmentExpression,operator:"=",left:left,right:right}}});module.exports=AssignmentExpressionTranspiler})()},{"./../../util":55,estraverse:123}],17:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var LEFT="left",OPERATOR="operator",RIGHT="right",Syntax=estraverse.Syntax;function BinaryExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(BinaryExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.BinaryExpression},transpile:function(node,parent,functionContext,blockContext){var left,right,transpiler=this;left=transpiler.expressionTranspiler.transpile(node[LEFT],node,functionContext,blockContext);right=transpiler.expressionTranspiler.transpile(node[RIGHT],node,functionContext,blockContext);return{type:Syntax.BinaryExpression,operator:node[OPERATOR],left:left,right:right}}});module.exports=BinaryExpressionTranspiler})()},{"./../../util":55,estraverse:123}],18:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var ARGUMENTS="arguments",CALLEE="callee",OBJECT="object",TYPE="type",Syntax=estraverse.Syntax;function CallExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(CallExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.CallExpression},transpile:function(node,parent,functionContext,blockContext){var args=node[ARGUMENTS],assignments,callee,callNode,transpiler=this,tempNameForAssignment;functionContext.clearLastAssignments();callee=transpiler.expressionTranspiler.transpile(node[CALLEE],node,functionContext,blockContext);assignments=functionContext.getLastAssignments();args=transpiler.expressionTranspiler.transpileArray(args,node,functionContext,blockContext);if(node[CALLEE][TYPE]===Syntax.MemberExpression){args=[assignments.length>1?{type:Syntax.Identifier,name:assignments[assignments.length-2]}:node[CALLEE][OBJECT]].concat(args);callee={type:Syntax.MemberExpression,object:callee,property:{type:Syntax.Identifier,name:"call"},computed:false}}callNode={type:Syntax.CallExpression,callee:callee,arguments:args};if(parent[TYPE]===Syntax.ExpressionStatement){return callNode}tempNameForAssignment=functionContext.getTempName();blockContext.addAssignment(tempNameForAssignment).assign(callNode);return{type:Syntax.Identifier,name:tempNameForAssignment}}});module.exports=CallExpressionTranspiler})()},{"./../../util":55,estraverse:123}],19:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var TYPE="type",hasOwn={}.hasOwnProperty;function ExpressionTranspiler(){this.transpilers={}}util.extend(ExpressionTranspiler.prototype,{addTranspiler:function(transpiler){this.transpilers[transpiler.getNodeType()]=transpiler},transpile:function(node,parent,functionContext,blockContext){var transpiler=this;if(!hasOwn.call(transpiler.transpilers,node[TYPE])){return node}return transpiler.transpilers[node[TYPE]].transpile(node,parent,functionContext,blockContext)},transpileArray:function(array,parent,functionContext,blockContext){var result=[],transpiler=this;util.each(array,function(expressionNode){result.push(transpiler.transpile(expressionNode,parent,functionContext,blockContext))});return result}});module.exports=ExpressionTranspiler})()},{"./../../util":55,estraverse:123}],20:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var Syntax=estraverse.Syntax;function FunctionExpressionTranspiler(statementTranspiler,expressionTranspiler,functionTranspiler){this.expressionTranspiler=expressionTranspiler;this.functionTranspiler=functionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(FunctionExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.FunctionExpression},transpile:function(node,parent,functionContext,blockContext){return this.functionTranspiler.transpile(node,parent,functionContext,blockContext)}});module.exports=FunctionExpressionTranspiler})()},{"./../../util":55,estraverse:123}],21:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var LEFT="left",NAME="name",TYPE="type",Syntax=estraverse.Syntax;function IdentifierTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(IdentifierTranspiler.prototype,{getNodeType:function(){return Syntax.Identifier},transpile:function(node,parent,functionContext,blockContext){var isDefined=functionContext.hasVariableDefined(node[NAME])||parent[TYPE]===Syntax.AssignmentExpression&&node===parent[LEFT];return{type:Syntax.Identifier,name:isDefined?node[NAME]:functionContext.getTempNameForVariable(node[NAME],blockContext)}}});module.exports=IdentifierTranspiler})()},{"./../../util":55,estraverse:123}],22:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var LEFT="left",OPERATOR="operator",RIGHT="right",Syntax=estraverse.Syntax;function LogicalExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(LogicalExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.LogicalExpression},transpile:function(node,parent,functionContext,blockContext){var condition,left,right,rightSideBlockContext,statement,tempName,transpiler=this;left=transpiler.expressionTranspiler.transpile(node[LEFT],node,functionContext,blockContext);statement=blockContext.prepareStatement();rightSideBlockContext=new BlockContext(functionContext);right=transpiler.expressionTranspiler.transpile(node[RIGHT],node,functionContext,rightSideBlockContext);condition=node[OPERATOR]==="||"?{type:Syntax.UnaryExpression,operator:"!",prefix:true,argument:left}:left;statement.assign({type:Syntax.IfStatement,test:{type:Syntax.LogicalExpression,operator:"||",left:{type:Syntax.BinaryExpression,operator:">",left:{type:Syntax.Identifier,name:"statementIndex"},right:{type:Syntax.Literal,value:statement.getIndex()+1}},right:condition},consequent:{type:Syntax.BlockStatement,body:[rightSideBlockContext.getSwitchStatement()]}});tempName=functionContext.getTempName();blockContext.addAssignment(tempName).assign({type:Syntax.LogicalExpression,operator:node[OPERATOR],left:left,right:right});return{type:Syntax.Identifier,name:tempName}}});module.exports=LogicalExpressionTranspiler})()},{"../BlockContext":14,"./../../util":55,estraverse:123}],23:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var OBJECT="object",PROPERTY="property",TYPE="type",Syntax=estraverse.Syntax;function MemberExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(MemberExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.MemberExpression},transpile:function(node,parent,functionContext,blockContext){var memberExpression,object=this.expressionTranspiler.transpile(node[OBJECT],node,functionContext,blockContext),propertyTempName;memberExpression={type:Syntax.MemberExpression,object:object,property:node[PROPERTY]};if(parent[TYPE]===Syntax.AssignmentExpression){return memberExpression}propertyTempName=functionContext.getTempName();blockContext.addAssignment(propertyTempName).assign(memberExpression);return{type:Syntax.Identifier,name:propertyTempName}}});module.exports=MemberExpressionTranspiler})()},{"./../../util":55,estraverse:123}],24:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var PROPERTIES="properties",Syntax=estraverse.Syntax;function ObjectExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ObjectExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.ObjectExpression},transpile:function(node,parent,functionContext,blockContext){var transpiler=this;return{type:Syntax.ObjectExpression,properties:transpiler.expressionTranspiler.transpileArray(node[PROPERTIES],node,functionContext,blockContext)}}});module.exports=ObjectExpressionTranspiler})()},{"./../../util":55,estraverse:123}],25:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var KEY="key",KIND="kind",VALUE="value",Syntax=estraverse.Syntax;function PropertyTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(PropertyTranspiler.prototype,{getNodeType:function(){return Syntax.Property},transpile:function(node,parent,functionContext,blockContext){var transpiler=this;return{type:Syntax.Property,key:node[KEY],value:transpiler.expressionTranspiler.transpile(node[VALUE],node,functionContext,blockContext),kind:node[KIND]}}});module.exports=PropertyTranspiler})()},{"./../../util":55,estraverse:123}],26:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var EXPRESSIONS="expressions",Syntax=estraverse.Syntax;function SequenceExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(SequenceExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.SequenceExpression},transpile:function(node,parent,functionContext,blockContext){var expressions=[],transpiler=this;util.each(node[EXPRESSIONS],function(expression){expressions.push(transpiler.expressionTranspiler.transpile(expression,node,functionContext,blockContext))});return{type:Syntax.SequenceExpression,expressions:expressions}}});module.exports=SequenceExpressionTranspiler})()},{"./../../util":55,estraverse:123}],27:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var ARGUMENT="argument",COMPUTED="computed",NAME="name",OBJECT="object",OPERATOR="operator",PREFIX="prefix",PROPERTY="property",TYPE="type",Syntax=estraverse.Syntax;function UpdateExpressionTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(UpdateExpressionTranspiler.prototype,{getNodeType:function(){return Syntax.UpdateExpression},transpile:function(node,parent,functionContext,blockContext){var expression,object=null,objectTempName=null,resultTempName;if(node[ARGUMENT][TYPE]===Syntax.MemberExpression){object=this.expressionTranspiler.transpile(node[ARGUMENT][OBJECT],node,functionContext,blockContext);object={type:Syntax.MemberExpression,object:object,property:node[ARGUMENT][COMPUTED]?this.expressionTranspiler.transpile(node[ARGUMENT][PROPERTY],node[ARGUMENT],functionContext,blockContext):node[ARGUMENT][PROPERTY],computed:node[ARGUMENT][COMPUTED]};objectTempName=functionContext.getTempName();blockContext.addAssignment(objectTempName).assign(object);expression={type:Syntax.Identifier,name:objectTempName}}else{expression=this.expressionTranspiler.transpile(node[ARGUMENT],node,functionContext,blockContext)}resultTempName=functionContext.getTempName();blockContext.addAssignment(resultTempName).assign({type:Syntax.BinaryExpression,left:expression,operator:node[OPERATOR].charAt(0),right:{type:Syntax.Literal,value:1}});blockContext.prepareStatement().assign({type:Syntax.ExpressionStatement,expression:{type:Syntax.AssignmentExpression,left:object?object:node[ARGUMENT],operator:"=",right:{type:Syntax.Identifier,name:resultTempName}}});return{type:Syntax.Identifier,name:node[PREFIX]?resultTempName:functionContext.getLastTempNameForVariable(node[ARGUMENT][NAME])}}});module.exports=UpdateExpressionTranspiler})()},{"./../../util":55,estraverse:123}],28:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../util");var DECLARATIONS="declarations",ID="id",NAME="name",Syntax=estraverse.Syntax;function FunctionContext(){this.assignmentVariables={};this.functionDeclarations=[];this.labelIndex=-1;this.labelUsed=false;this.labelUseds=[];this.lastAssignments=[];this.lastTempNames={};this.nextStatementIndex=0;this.nextTempIndex=0;this.parameters=[];this.variables=[]}util.extend(FunctionContext.prototype,{addAssignment:function(index,variableName){var context=this;context.assignmentVariables[index]=variableName;context.lastAssignments.push(variableName)},addFunctionDeclaration:function(declaration){this.functionDeclarations.push(declaration)},addParameter:function(name){this.parameters.push(name)},addVariable:function(name){this.variables.push(name)},clearLastAssignments:function(){this.lastAssignments=[]},getCurrentStatementIndex:function(){return this.nextStatementIndex},getLabel:function(){var context=this;context.labelUsed=true;return"label"+context.labelIndex},getLastAssignments:function(){var context=this,lastAssignments=context.lastAssignments;context.lastAssignments=[];return lastAssignments},getNextStatementIndex:function(){return this.nextStatementIndex++},getStatements:function(switchStatement){var assignmentProperties=[],declaration=esprima.parse("var statementIndex = 0;").body[0],functionContext=this,index,statements=[],stateProperties=[],stateSetup=esprima.parse("if (Resumable._resumeState_) { statementIndex = Resumable._resumeState_.statementIndex; }").body[0];util.each(functionContext.variables,function(name){declaration[DECLARATIONS].push({type:Syntax.VariableDeclarator,id:{type:Syntax.Identifier,name:name},init:null})});util.each(functionContext.parameters.concat(functionContext.variables),function(name){stateProperties.push({type:Syntax.Property,kind:"init",key:{type:Syntax.Identifier,name:name},value:{type:Syntax.Identifier,name:name}})});for(index=0;index<functionContext.nextTempIndex;index++){stateProperties.push({type:Syntax.Property,kind:"init",key:{type:Syntax.Identifier,name:"temp"+index},value:{type:Syntax.Identifier,name:"temp"+index}});declaration.declarations.push({type:Syntax.VariableDeclarator,id:{type:Syntax.Identifier,name:"temp"+index},init:null});stateSetup.consequent.body.push({type:Syntax.ExpressionStatement,expression:{type:Syntax.AssignmentExpression,operator:"=",left:{type:Syntax.Identifier,name:"temp"+index},right:esprima.parse("Resumable._resumeState_.temp"+index).body[0].expression}})}stateSetup.consequent.body.push(esprima.parse("Resumable._resumeState_ = null;").body[0]);util.each(functionContext.assignmentVariables,function(variableName,statementIndex){assignmentProperties.push({type:Syntax.Property,kind:"init",key:{type:Syntax.Literal,value:statementIndex},value:{type:Syntax.Literal,value:variableName}})},{keys:true});statements.push(declaration);[].push.apply(statements,functionContext.functionDeclarations);statements.push({type:Syntax.ReturnStatement,argument:{type:Syntax.CallExpression,arguments:[{type:Syntax.ThisExpression}],callee:{type:Syntax.MemberExpression,object:{type:Syntax.FunctionExpression,id:{type:Syntax.Identifier,name:"resumableScope"},params:[],body:{type:Syntax.BlockStatement,body:[stateSetup,{type:Syntax.TryStatement,block:{type:Syntax.BlockStatement,body:[switchStatement]},handler:{type:Syntax.CatchClause,param:{type:Syntax.Identifier,name:"e"},body:{type:Syntax.BlockStatement,body:[{type:Syntax.IfStatement,test:esprima.parse("e instanceof Resumable.PauseException").body[0].expression,consequent:{type:Syntax.BlockStatement,body:[{type:Syntax.ExpressionStatement,expression:{type:Syntax.CallExpression,callee:{type:Syntax.MemberExpression,object:{type:Syntax.Identifier,name:"e"},property:{type:Syntax.Identifier,name:"add"},computed:false},arguments:[{type:Syntax.ObjectExpression,properties:[{type:Syntax.Property,kind:"init",key:{type:Syntax.Identifier,name:"func"},value:{type:Syntax.Identifier,name:"resumableScope"}},{type:Syntax.Property,kind:"init",key:{type:Syntax.Identifier,name:"statementIndex"},value:{type:Syntax.BinaryExpression,operator:"+",left:{type:Syntax.Identifier,name:"statementIndex"},right:{type:Syntax.Literal,value:1}}},{type:Syntax.Property,kind:"init",key:{type:Syntax.Identifier,name:"assignments"},value:{type:Syntax.ObjectExpression,properties:assignmentProperties}}].concat(stateProperties)}]}}]}},{type:Syntax.ThrowStatement,argument:{type:Syntax.Identifier,name:"e"}}]}}}]}},property:{type:Syntax.Identifier,name:"call"}}}});return statements},getTempName:function(){return"temp"+this.nextTempIndex++},getTempNameForVariable:function(variableName,blockContext){var context=this,tempName;tempName=context.getTempName();context.lastTempNames[variableName]=tempName;blockContext.addAssignment(tempName).assign({type:Syntax.Identifier,name:variableName});return tempName},getLastTempName:function(){return"temp"+(this.nextTempIndex-1)},getLastTempNameForVariable:function(variableName){return this.lastTempNames[variableName]},hasVariableDefined:function(name){var isDefined=false;util.each(this.functionDeclarations,function(functionDeclaration){if(functionDeclaration[ID]&&functionDeclaration[ID][NAME]===name){isDefined=true;return false}});util.each(this.variables,function(variable){if(variable===name){isDefined=true}});return isDefined},isLabelUsed:function(){var context=this;return context.labelUsed},popLabelableContext:function(){var context=this;context.labelUsed=context.labelUseds.pop();context.labelIndex--},pushLabelableContext:function(){var context=this;context.labelUseds.push(context.labelUsed);context.labelUsed=false;context.labelIndex++}});module.exports=FunctionContext})()},{"./../util":55,esprima:122,estraverse:123}],29:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../util"),BlockContext=require("./BlockContext"),FunctionContext=require("./FunctionContext");var BODY="body",ID="id",NAME="name",PARAMS="params",TYPE="type",Syntax=estraverse.Syntax;function FunctionTranspiler(statementTranspiler){this.statementTranspiler=statementTranspiler}util.extend(FunctionTranspiler.prototype,{transpile:function(node){var newNode,transpiler=this,ownFunctionContext=new FunctionContext,ownBlockContext=new BlockContext(ownFunctionContext),statements=[];util.each(node[PARAMS],function(param){ownFunctionContext.addParameter(param[NAME])});if(node[BODY][BODY].length>0){transpiler.statementTranspiler.transpileArray(node[BODY][BODY],node,ownFunctionContext,ownBlockContext);statements=ownFunctionContext.getStatements(ownBlockContext.getSwitchStatement())}newNode={type:node[TYPE],id:node[ID],params:node[PARAMS],body:{type:Syntax.BlockStatement,body:statements}};return newNode}});module.exports=FunctionTranspiler})()},{"./../util":55,"./BlockContext":14,"./FunctionContext":28,esprima:122,estraverse:123}],30:[function(require,module,exports){(function(){"use strict";var util=require("./../util");function PauseException(resumer){this.promise=null;this.resumer=resumer;this.states=[]}util.extend(PauseException.prototype,{add:function(state){this.states.push(state)},now:function(){throw this},resume:function(result){var exception=this;try{exception.resumer(exception.promise,result,exception.states)}catch(e){if(e instanceof PauseException){throw e}exception.promise.reject(e)}},setPromise:function(promise){this.promise=promise}});module.exports=PauseException})()},{"./../util":55}],31:[function(require,module,exports){(function(){"use strict";var escodegen=require("escodegen"),esprima=require("esprima"),util=require("./../util"),PauseException=require("./PauseException"),Promise=require("./../Promise");function Resumable(transpiler){this.transpiler=transpiler}util.extend(Resumable,{_resumeState_:null,PauseException:PauseException});util.extend(Resumable.prototype,{createPause:function(){var pause=new PauseException(function(promise,result,states){var i,lastResult=result,state;for(i=0;i<states.length;i++){state=states[i];if(state.assignments[state.statementIndex-1]){state[state.assignments[state.statementIndex-1]]=lastResult}Resumable._resumeState_=state;try{lastResult=state.func()}catch(e){if(e instanceof PauseException){e.setPromise(promise);return}throw e}}promise.resolve()});return pause},execute:function(code,options){var ast=esprima.parse(code),expose,func,names=["Resumable"],promise=new Promise,transpiledCode,values=[Resumable];options=options||{};expose=options.expose||{};util.each(expose,function(value,name){names.push(name);values.push(value)},{keys:true});ast=this.transpiler.transpile(ast);transpiledCode=escodegen.generate(ast,{format:{indent:{style:"    ",base:0}}});func=new Function(names,"return "+transpiledCode);try{func.apply(null,values)()}catch(e){if(e instanceof PauseException){e.setPromise(promise)}else{promise.reject(e)}return promise}promise.resolve();return promise}});module.exports=Resumable})()},{"./../Promise":13,"./../util":55,"./PauseException":30,escodegen:104,esprima:122}],32:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var BODY="body",Syntax=estraverse.Syntax;function BlockStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(BlockStatementTranspiler.prototype,{getNodeType:function(){return Syntax.BlockStatement},transpile:function(node,parent,functionContext,blockContext){var transpiler=this,ownBlockContext=new BlockContext(functionContext),statement=blockContext.prepareStatement();transpiler.statementTranspiler.transpileArray(node[BODY],node,functionContext,ownBlockContext);statement.assign({type:Syntax.BlockStatement,body:[ownBlockContext.getSwitchStatement()]})}});module.exports=BlockStatementTranspiler})()},{"../BlockContext":14,"./../../util":55,estraverse:123}],33:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var LABEL="label",Syntax=estraverse.Syntax;function BreakStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(BreakStatementTranspiler.prototype,{getNodeType:function(){return Syntax.BreakStatement},transpile:function(node,parent,functionContext,blockContext){var label=node[LABEL]?node[LABEL]:{type:Syntax.Identifier,name:functionContext.getLabel()};blockContext.prepareStatement().assign({type:Syntax.BreakStatement,label:label})}});module.exports=BreakStatementTranspiler})()},{"./../../util":55,estraverse:123}],34:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var LABEL="label",Syntax=estraverse.Syntax;function ContinueStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ContinueStatementTranspiler.prototype,{getNodeType:function(){return Syntax.ContinueStatement},transpile:function(node,parent,functionContext,blockContext){var label=node[LABEL]?node[LABEL]:{type:Syntax.Identifier,name:functionContext.getLabel()};blockContext.prepareStatement().assign({type:Syntax.ContinueStatement,label:label})}});module.exports=ContinueStatementTranspiler})()},{"./../../util":55,estraverse:123}],35:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var BODY="body",TEST="test",Syntax=estraverse.Syntax;function DoWhileStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(DoWhileStatementTranspiler.prototype,{getNodeType:function(){return Syntax.DoWhileStatement},transpile:function(node,parent,functionContext,blockContext){var forNode,ownBlockContext=new BlockContext(functionContext),transpiler=this,expression,statement;functionContext.pushLabelableContext();statement=blockContext.prepareStatement();transpiler.statementTranspiler.transpileArray(node[BODY][BODY],node,functionContext,ownBlockContext);expression=transpiler.expressionTranspiler.transpile(node[TEST],node,functionContext,ownBlockContext);ownBlockContext.prepareStatement().assign({type:Syntax.IfStatement,test:{type:Syntax.UnaryExpression,operator:"!",prefix:true,argument:expression},consequent:{type:Syntax.BlockStatement,body:[{type:Syntax.BreakStatement,label:{type:Syntax.Identifier,name:functionContext.getLabel()}}]}});forNode={type:Syntax.ForStatement,init:null,test:null,update:null,body:{type:Syntax.BlockStatement,body:[esprima.parse("statementIndex = "+(statement.getIndex()+1)+";").body[0],ownBlockContext.getSwitchStatement()]}};statement.assign(functionContext.isLabelUsed()?{type:Syntax.LabeledStatement,label:{type:Syntax.Identifier,name:functionContext.getLabel()},body:forNode}:forNode);functionContext.popLabelableContext()}});module.exports=DoWhileStatementTranspiler})()},{"../BlockContext":14,"./../../util":55,esprima:122,estraverse:123}],36:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var EXPRESSION="expression",Syntax=estraverse.Syntax;function ExpressionStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ExpressionStatementTranspiler.prototype,{getNodeType:function(){return Syntax.ExpressionStatement},transpile:function(node,parent,functionContext,blockContext){var expression=this.expressionTranspiler.transpile(node[EXPRESSION],node,functionContext,blockContext);blockContext.prepareStatement().assign({type:Syntax.ExpressionStatement,expression:expression})}});module.exports=ExpressionStatementTranspiler})()},{"./../../util":55,estraverse:123}],37:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var BODY="body",INIT="init",TEST="test",UPDATE="update",Syntax=estraverse.Syntax;function ForStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ForStatementTranspiler.prototype,{getNodeType:function(){return Syntax.ForStatement},transpile:function(node,parent,functionContext,blockContext){var forNode,ownBlockContext=new BlockContext(functionContext),transpiler=this,expression,statement;functionContext.pushLabelableContext();if(node[INIT]){expression=transpiler.expressionTranspiler.transpile(node[INIT],node,functionContext,blockContext);blockContext.prepareStatement().assign({type:Syntax.ExpressionStatement,expression:expression})}statement=blockContext.prepareStatement();if(node[TEST]){expression=transpiler.expressionTranspiler.transpile(node[TEST],node,functionContext,ownBlockContext);ownBlockContext.prepareStatement().assign({type:Syntax.IfStatement,test:{type:Syntax.UnaryExpression,operator:"!",prefix:true,argument:expression},consequent:{type:Syntax.BlockStatement,body:[{type:Syntax.BreakStatement,label:{type:Syntax.Identifier,name:functionContext.getLabel()}}]}})}transpiler.statementTranspiler.transpileArray(node[BODY][BODY],node,functionContext,ownBlockContext);if(node[UPDATE]){expression=transpiler.expressionTranspiler.transpile(node[UPDATE],node,functionContext,ownBlockContext);ownBlockContext.prepareStatement().assign({type:Syntax.ExpressionStatement,expression:expression})}forNode={type:Syntax.ForStatement,init:null,test:null,update:null,body:{type:Syntax.BlockStatement,body:[ownBlockContext.getSwitchStatement(),esprima.parse("statementIndex = "+(statement.getIndex()+1)+";").body[0]]}};statement.assign(functionContext.isLabelUsed()?{type:Syntax.LabeledStatement,label:{type:Syntax.Identifier,name:functionContext.getLabel()},body:forNode}:forNode);functionContext.popLabelableContext()}});module.exports=ForStatementTranspiler})()},{"../BlockContext":14,"./../../util":55,esprima:122,estraverse:123}],38:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var Syntax=estraverse.Syntax;function FunctionDeclarationTranspiler(statementTranspiler,expressionTranspiler,functionTranspiler){this.expressionTranspiler=expressionTranspiler;this.functionTranspiler=functionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(FunctionDeclarationTranspiler.prototype,{getNodeType:function(){return Syntax.FunctionDeclaration},transpile:function(node,parent,functionContext,blockContext){var newNode=this.functionTranspiler.transpile(node,parent,functionContext,blockContext);functionContext.addFunctionDeclaration(newNode)}});module.exports=FunctionDeclarationTranspiler})()},{"./../../util":55,estraverse:123}],39:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var ALTERNATE="alternate",CONSEQUENT="consequent",TEST="test",Syntax=estraverse.Syntax;function IfStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(IfStatementTranspiler.prototype,{getNodeType:function(){return Syntax.IfStatement},transpile:function(node,parent,functionContext,blockContext){var alternateStatement,consequentStatement,transpiler=this,expression=transpiler.expressionTranspiler.transpile(node[TEST],node,functionContext,blockContext);consequentStatement=blockContext.prepareStatement();consequentStatement.assign({type:Syntax.IfStatement,test:{type:Syntax.LogicalExpression,operator:"||",left:{type:Syntax.BinaryExpression,operator:">",left:{type:Syntax.Identifier,name:"statementIndex"},right:{type:Syntax.Literal,value:consequentStatement.getIndex()+1}},right:expression},consequent:transpiler.statementTranspiler.transpileBlock(node[CONSEQUENT],node,functionContext)
});if(node[ALTERNATE]){alternateStatement=blockContext.prepareStatement();alternateStatement.assign({type:Syntax.IfStatement,test:{type:Syntax.LogicalExpression,operator:"||",left:{type:Syntax.BinaryExpression,operator:">",left:{type:Syntax.Identifier,name:"statementIndex"},right:{type:Syntax.Literal,value:alternateStatement.getIndex()+1}},right:{type:Syntax.UnaryExpression,operator:"!",prefix:true,argument:expression}},consequent:transpiler.statementTranspiler.transpileBlock(node[ALTERNATE],node,functionContext)})}}});module.exports=IfStatementTranspiler})()},{"./../../util":55,estraverse:123}],40:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var BODY="body",LABEL="label",Syntax=estraverse.Syntax;function LabeledStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(LabeledStatementTranspiler.prototype,{getNodeType:function(){return Syntax.LabeledStatement},transpile:function(node,parent,functionContext,blockContext){var label=node[LABEL],transpiler=this;blockContext.transformNextStatement(function(node){return{type:Syntax.LabeledStatement,label:label,body:node}});transpiler.statementTranspiler.transpile(node[BODY],node,functionContext,blockContext)}});module.exports=LabeledStatementTranspiler})()},{"./../../util":55,estraverse:123}],41:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext"),FunctionContext=require("../FunctionContext");var BODY="body",Syntax=estraverse.Syntax;function ProgramTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ProgramTranspiler.prototype,{getNodeType:function(){return Syntax.Program},transpile:function(node){var transpiler=this,functionContext=new FunctionContext,blockContext=new BlockContext(functionContext);transpiler.statementTranspiler.transpileArray(node[BODY],node,functionContext,blockContext);return{type:Syntax.Program,body:[{type:Syntax.ExpressionStatement,expression:{type:Syntax.FunctionExpression,id:null,params:[],body:{type:Syntax.BlockStatement,body:functionContext.getStatements(blockContext.getSwitchStatement())}}}]}}});module.exports=ProgramTranspiler})()},{"../BlockContext":14,"../FunctionContext":28,"./../../util":55,estraverse:123}],42:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var ARGUMENT="argument",Syntax=estraverse.Syntax;function ReturnStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ReturnStatementTranspiler.prototype,{getNodeType:function(){return Syntax.ReturnStatement},transpile:function(node,parent,functionContext,blockContext){var expression=this.expressionTranspiler.transpile(node[ARGUMENT],node,functionContext,blockContext);blockContext.prepareStatement().assign({type:Syntax.ReturnStatement,argument:expression})}});module.exports=ReturnStatementTranspiler})()},{"./../../util":55,estraverse:123}],43:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var BODY="body",TYPE="type",hasOwn={}.hasOwnProperty,Syntax=estraverse.Syntax;function StatementTranspiler(expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.transpilers={}}util.extend(StatementTranspiler.prototype,{addTranspiler:function(transpiler){this.transpilers[transpiler.getNodeType()]=transpiler},transpile:function(node,parent,functionContext,blockContext){var transpiler=this;if(!hasOwn.call(transpiler.transpilers,node[TYPE])){throw new Error('Unsupported type "'+node[TYPE]+'"')}return transpiler.transpilers[node[TYPE]].transpile(node,parent,functionContext,blockContext)},transpileBlock:function(node,parent,functionContext){var transpiler=this,ownBlockContext=new BlockContext(functionContext);if(node[TYPE]===Syntax.BlockStatement){transpiler.transpileArray(node[BODY],parent,functionContext,ownBlockContext)}else{transpiler.transpile(node,parent,functionContext,ownBlockContext)}return{type:Syntax.BlockStatement,body:[ownBlockContext.getSwitchStatement()]}},transpileArray:function(array,parent,functionContext,blockContext){var transpiler=this;util.each(array,function(statementNode){transpiler.transpile(statementNode,parent,functionContext,blockContext)})}});module.exports=StatementTranspiler})()},{"../BlockContext":14,"./../../util":55,estraverse:123}],44:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var ARGUMENT="argument",Syntax=estraverse.Syntax;function ThrowStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(ThrowStatementTranspiler.prototype,{getNodeType:function(){return Syntax.ThrowStatement},transpile:function(node,parent,functionContext,blockContext){var expression=this.expressionTranspiler.transpile(node[ARGUMENT],node,functionContext,blockContext);blockContext.prepareStatement().assign({type:Syntax.ThrowStatement,argument:expression})}});module.exports=ThrowStatementTranspiler})()},{"./../../util":55,estraverse:123}],45:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var BLOCK="block",BODY="body",HANDLERS="handlers",FINALIZER="finalizer",NAME="name",PARAM="param",Syntax=estraverse.Syntax;function TryStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(TryStatementTranspiler.prototype,{getNodeType:function(){return Syntax.TryStatement},transpile:function(node,parent,functionContext,blockContext){var handlers=[],ownBlockContext=new BlockContext(functionContext),statement,transpiler=this,tryNode;statement=blockContext.prepareStatement();transpiler.statementTranspiler.transpileArray(node[BLOCK][BODY],node,functionContext,ownBlockContext);tryNode={type:Syntax.TryStatement,block:{type:Syntax.BlockStatement,body:[ownBlockContext.getSwitchStatement()]}};if(node[HANDLERS]){handlers=[];util.each(node[HANDLERS],function(handler){var catchClauseBlockContext=new BlockContext(functionContext);transpiler.statementTranspiler.transpileArray(handler[BODY][BODY],handler,functionContext,catchClauseBlockContext);handlers.push({type:Syntax.CatchClause,param:handler[PARAM],body:{type:Syntax.BlockStatement,body:[{type:Syntax.IfStatement,test:esprima.parse(handler[PARAM][NAME]+" instanceof Resumable.PauseException").body[0].expression,consequent:{type:Syntax.BlockStatement,body:[{type:Syntax.ThrowStatement,argument:handler[PARAM]}]}},catchClauseBlockContext.getSwitchStatement()]}})});tryNode[HANDLERS]=handlers}if(node[FINALIZER]){tryNode[FINALIZER]=node[FINALIZER]}statement.assign(tryNode)}});module.exports=TryStatementTranspiler})()},{"../BlockContext":14,"./../../util":55,esprima:122,estraverse:123}],46:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util");var DECLARATIONS="declarations",ID="id",INIT="init",NAME="name",Syntax=estraverse.Syntax;function VariableDeclarationTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(VariableDeclarationTranspiler.prototype,{getNodeType:function(){return Syntax.VariableDeclaration},transpile:function(node,parent,functionContext,blockContext){var transpiler=this;util.each(node[DECLARATIONS],function(declaration){var expression;functionContext.addVariable(declaration[ID][NAME]);if(declaration[INIT]!==null){expression=transpiler.expressionTranspiler.transpile(declaration[INIT],node,functionContext,blockContext);blockContext.prepareStatement().assign({type:Syntax.ExpressionStatement,expression:{type:Syntax.AssignmentExpression,operator:"=",left:declaration[ID],right:expression}})}})}});module.exports=VariableDeclarationTranspiler})()},{"./../../util":55,estraverse:123}],47:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var BODY="body",TEST="test",Syntax=estraverse.Syntax;function WhileStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(WhileStatementTranspiler.prototype,{getNodeType:function(){return Syntax.WhileStatement},transpile:function(node,parent,functionContext,blockContext){var forNode,ownBlockContext=new BlockContext(functionContext),transpiler=this,expression,statement;functionContext.pushLabelableContext();statement=blockContext.prepareStatement();expression=transpiler.expressionTranspiler.transpile(node[TEST],node,functionContext,ownBlockContext);ownBlockContext.prepareStatement().assign({type:Syntax.IfStatement,test:{type:Syntax.UnaryExpression,operator:"!",prefix:true,argument:expression},consequent:{type:Syntax.BlockStatement,body:[{type:Syntax.BreakStatement,label:{type:Syntax.Identifier,name:functionContext.getLabel()}}]}});transpiler.statementTranspiler.transpileArray(node[BODY][BODY],node,functionContext,ownBlockContext);forNode={type:Syntax.ForStatement,init:null,test:null,update:null,body:{type:Syntax.BlockStatement,body:[ownBlockContext.getSwitchStatement(),esprima.parse("statementIndex = "+(statement.getIndex()+1)+";").body[0]]}};statement.assign(functionContext.isLabelUsed()?{type:Syntax.LabeledStatement,label:{type:Syntax.Identifier,name:functionContext.getLabel()},body:forNode}:forNode);functionContext.popLabelableContext()}});module.exports=WhileStatementTranspiler})()},{"../BlockContext":14,"./../../util":55,esprima:122,estraverse:123}],48:[function(require,module,exports){(function(){"use strict";var estraverse=require("estraverse"),util=require("./../../util"),BlockContext=require("../BlockContext");var BODY="body",OBJECT="object",Syntax=estraverse.Syntax;function WithStatementTranspiler(statementTranspiler,expressionTranspiler){this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(WithStatementTranspiler.prototype,{getNodeType:function(){return Syntax.WithStatement},transpile:function(node,parent,functionContext,blockContext){var transpiler=this,object=this.expressionTranspiler.transpile(node[OBJECT],node,functionContext,blockContext),ownBlockContext=new BlockContext(functionContext),statement=blockContext.prepareStatement();transpiler.statementTranspiler.transpileArray(node[BODY][BODY],node,functionContext,ownBlockContext);statement.assign({type:Syntax.WithStatement,object:object,body:{type:Syntax.BlockStatement,body:[ownBlockContext.getSwitchStatement()]}})}});module.exports=WithStatementTranspiler})()},{"../BlockContext":14,"./../../util":55,estraverse:123}],49:[function(require,module,exports){(function(){"use strict";var esprima=require("esprima"),estraverse=require("estraverse"),util=require("./../util"),ArrayExpressionTranspiler=require("./ExpressionTranspiler/ArrayExpressionTranspiler"),AssignmentExpressionTranspiler=require("./ExpressionTranspiler/AssignmentExpressionTranspiler"),BinaryExpressionTranspiler=require("./ExpressionTranspiler/BinaryExpressionTranspiler"),BlockStatementTranspiler=require("./StatementTranspiler/BlockStatementTranspiler"),BreakStatementTranspiler=require("./StatementTranspiler/BreakStatementTranspiler"),CallExpressionTranspiler=require("./ExpressionTranspiler/CallExpressionTranspiler"),ContinueStatementTranspiler=require("./StatementTranspiler/ContinueStatementTranspiler"),DoWhileStatementTranspiler=require("./StatementTranspiler/DoWhileStatementTranspiler"),ExpressionStatementTranspiler=require("./StatementTranspiler/ExpressionStatementTranspiler"),ExpressionTranspiler=require("./ExpressionTranspiler/ExpressionTranspiler"),ForStatementTranspiler=require("./StatementTranspiler/ForStatementTranspiler"),FunctionDeclarationTranspiler=require("./StatementTranspiler/FunctionDeclarationTranspiler"),FunctionExpressionTranspiler=require("./ExpressionTranspiler/FunctionExpressionTranspiler"),FunctionTranspiler=require("./FunctionTranspiler"),IdentifierTranspiler=require("./ExpressionTranspiler/IdentifierTranspiler"),IfStatementTranspiler=require("./StatementTranspiler/IfStatementTranspiler"),LabeledStatementTranspiler=require("./StatementTranspiler/LabeledStatementTranspiler"),LogicalExpressionTranspiler=require("./ExpressionTranspiler/LogicalExpressionTranspiler"),MemberExpressionTranspiler=require("./ExpressionTranspiler/MemberExpressionTranspiler"),ObjectExpressionTranspiler=require("./ExpressionTranspiler/ObjectExpressionTranspiler"),ProgramTranspiler=require("./StatementTranspiler/ProgramTranspiler"),PropertyTranspiler=require("./ExpressionTranspiler/PropertyTranspiler"),ReturnStatementTranspiler=require("./StatementTranspiler/ReturnStatementTranspiler"),SequenceExpressionTranspiler=require("./ExpressionTranspiler/SequenceExpressionTranspiler"),StatementTranspiler=require("./StatementTranspiler/StatementTranspiler"),ThrowStatementTranspiler=require("./StatementTranspiler/ThrowStatementTranspiler"),TryStatementTranspiler=require("./StatementTranspiler/TryStatementTranspiler"),UpdateExpressionTranspiler=require("./ExpressionTranspiler/UpdateExpressionTranspiler"),VariableDeclarationTranspiler=require("./StatementTranspiler/VariableDeclarationTranspiler"),WhileStatementTranspiler=require("./StatementTranspiler/WhileStatementTranspiler"),WithStatementTranspiler=require("./StatementTranspiler/WithStatementTranspiler");require("escodegen");function Transpiler(){var expressionTranspiler=new ExpressionTranspiler,statementTranspiler=new StatementTranspiler,functionTranspiler=new FunctionTranspiler(statementTranspiler);util.each([BlockStatementTranspiler,BreakStatementTranspiler,ContinueStatementTranspiler,DoWhileStatementTranspiler,ExpressionStatementTranspiler,ForStatementTranspiler,IfStatementTranspiler,LabeledStatementTranspiler,ProgramTranspiler,ReturnStatementTranspiler,ThrowStatementTranspiler,TryStatementTranspiler,VariableDeclarationTranspiler,WhileStatementTranspiler,WithStatementTranspiler],function(Class){statementTranspiler.addTranspiler(new Class(statementTranspiler,expressionTranspiler))});statementTranspiler.addTranspiler(new FunctionDeclarationTranspiler(statementTranspiler,expressionTranspiler,functionTranspiler));util.each([ArrayExpressionTranspiler,AssignmentExpressionTranspiler,BinaryExpressionTranspiler,CallExpressionTranspiler,IdentifierTranspiler,LogicalExpressionTranspiler,MemberExpressionTranspiler,ObjectExpressionTranspiler,PropertyTranspiler,SequenceExpressionTranspiler,UpdateExpressionTranspiler],function(Class){expressionTranspiler.addTranspiler(new Class(statementTranspiler,expressionTranspiler))});expressionTranspiler.addTranspiler(new FunctionExpressionTranspiler(statementTranspiler,expressionTranspiler,functionTranspiler));this.expressionTranspiler=expressionTranspiler;this.statementTranspiler=statementTranspiler}util.extend(Transpiler.prototype,{transpile:function(ast){return this.statementTranspiler.transpile(ast,null)}});module.exports=Transpiler})()},{"./../util":55,"./ExpressionTranspiler/ArrayExpressionTranspiler":15,"./ExpressionTranspiler/AssignmentExpressionTranspiler":16,"./ExpressionTranspiler/BinaryExpressionTranspiler":17,"./ExpressionTranspiler/CallExpressionTranspiler":18,"./ExpressionTranspiler/ExpressionTranspiler":19,"./ExpressionTranspiler/FunctionExpressionTranspiler":20,"./ExpressionTranspiler/IdentifierTranspiler":21,"./ExpressionTranspiler/LogicalExpressionTranspiler":22,"./ExpressionTranspiler/MemberExpressionTranspiler":23,"./ExpressionTranspiler/ObjectExpressionTranspiler":24,"./ExpressionTranspiler/PropertyTranspiler":25,"./ExpressionTranspiler/SequenceExpressionTranspiler":26,"./ExpressionTranspiler/UpdateExpressionTranspiler":27,"./FunctionTranspiler":29,"./StatementTranspiler/BlockStatementTranspiler":32,"./StatementTranspiler/BreakStatementTranspiler":33,"./StatementTranspiler/ContinueStatementTranspiler":34,"./StatementTranspiler/DoWhileStatementTranspiler":35,"./StatementTranspiler/ExpressionStatementTranspiler":36,"./StatementTranspiler/ForStatementTranspiler":37,"./StatementTranspiler/FunctionDeclarationTranspiler":38,"./StatementTranspiler/IfStatementTranspiler":39,"./StatementTranspiler/LabeledStatementTranspiler":40,"./StatementTranspiler/ProgramTranspiler":41,"./StatementTranspiler/ReturnStatementTranspiler":42,"./StatementTranspiler/StatementTranspiler":43,"./StatementTranspiler/ThrowStatementTranspiler":44,"./StatementTranspiler/TryStatementTranspiler":45,"./StatementTranspiler/VariableDeclarationTranspiler":46,"./StatementTranspiler/WhileStatementTranspiler":47,"./StatementTranspiler/WithStatementTranspiler":48,escodegen:104,esprima:122,estraverse:123}],50:[function(require,module,exports){(function(){"use strict";var util=require("./util");function Rule(name,captureName,ifNoMatch,processor,options){this.captureName=captureName;this.component=null;this.ifNoMatch=ifNoMatch;this.name=name;this.options=options;this.processor=processor}util.extend(Rule.prototype,{match:function(text,offset,options){var component,rule=this,match;options=options||{};match=rule.component.match(text,offset,options);if(match===null){return null}if(typeof match.components==="object"){util.copy(match.components,rule.options)}if(rule.ifNoMatch&&(!(component=match.components[rule.ifNoMatch.component])||component.length===0)){match={components:match.components[rule.ifNoMatch.capture],textOffset:match.textOffset,textLength:match.textLength}}else{if(!util.isString(match.components)&&!match.components.name){match.components.name=rule.captureName||rule.name}}if(rule.processor){match.components=rule.processor(match.components)}return match},setComponent:function(component){this.component=component}});module.exports=Rule})()},{"./util":55}],51:[function(require,module,exports){(function(){"use strict";var util=require("./util");var PENDING=0,REJECTED=1,RESOLVED=2;function Promise(){this.mode=PENDING;this.thens=[];this.value=null}util.extend(Promise.prototype,{reject:function(exception){var promise=this;if(promise.mode===PENDING){promise.mode=REJECTED;promise.value=exception;util.each(promise.thens,function(callbacks){if(callbacks.onReject){callbacks.onReject(exception)}})}return promise},resolve:function(result){var promise=this;if(promise.mode===PENDING){promise.mode=RESOLVED;promise.value=result;util.each(promise.thens,function(callbacks){if(callbacks.onResolve){callbacks.onResolve(result)}})}return promise},then:function(onResolve,onReject){var promise=this;if(promise.mode===PENDING){promise.thens.push({onReject:onReject,onResolve:onResolve})}else if(promise.mode===REJECTED){if(onReject){onReject(promise.value)}}else if(promise.mode===RESOLVED){if(onResolve){onResolve(promise.value)}}return promise}});module.exports=Promise})()},{"./util":55}],52:[function(require,module,exports){(function(){"use strict";var util=require("./util"),EventEmitter=require("./EventEmitter");function Stream(){EventEmitter.call(this);this.data=""}util.inherit(Stream).from(EventEmitter);util.extend(Stream.prototype,{read:function(length){var data,stream=this;if(!length&&length!==0){data=stream.data;stream.data=""}else{data=stream.data.substr(0,length);stream.data=stream.data.substr(length)}return data},readAll:function(){var stream=this;return stream.read(stream.data.length)},write:function(data){var stream=this;stream.data+=data;stream.emit("data",data)}});module.exports=Stream})()},{"./EventEmitter":7,"./util":55}],53:[function(require,module,exports){(function(){"use strict";var util=require("./util"),Engine=require("./Engine"),Exception=require("./Exception/Exception"),Language=require("./Language");var hasOwn={}.hasOwnProperty;function Uniter(options){this.languages={};this.options=options||{}}util.extend(Uniter.prototype,{createEngine:function(name,options){var language,uniter=this;options=util.extend({},uniter.options,options);if(!hasOwn.call(uniter.languages,name)){throw new Exception('Uniter.createEngine() :: Language with name "'+name+'" is not registered')}language=uniter.languages[name];return language.createEngine(options)},createParser:function(name){var language,uniter=this;if(!hasOwn.call(uniter.languages,name)){throw new Exception('Uniter.createParser() :: Language with name "'+name+'" is not registered')}language=uniter.languages[name];return language.createParser()},registerLanguage:function(language){var name,uniter=this;if(!(language instanceof Language)){throw new Exception('Uniter.registerLanguage() :: "language" must be a valid Language object')}name=language.getName();if(hasOwn.call(uniter.languages,name)){throw new Exception('Uniter.registerLanguage() :: Language with name "'+name+'" is already registered')}uniter.languages[name]=language}});module.exports=Uniter})()},{"./Engine":6,"./Exception/Exception":8,"./Language":11,"./util":55}],54:[function(require,module,exports){(function(){"use strict";var phpGrammarSpec=require("./../languages/PHP/grammar"),phpInterpreterSpec=require("./../languages/PHP/interpreter"),Language=require("./Language"),Uniter=require("./Uniter");var uniter=new Uniter;uniter.registerLanguage(new Language("PHP",phpGrammarSpec,phpInterpreterSpec));module.exports=uniter})()},{"./../languages/PHP/grammar":56,"./../languages/PHP/interpreter":59,"./Language":11,"./Uniter":53}],55:[function(require,module,exports){(function(){"use strict";var global=new Function("return this;")(),hasOwn={}.hasOwnProperty,inheritFrom=Object.create||function(from){function F(){}F.prototype=from;return new F},toString={}.toString,undef,util;util={copy:function(to,from){var key;for(key in from){if(hasOwn.call(from,key)){to[key]=from[key]}}},each:function(obj,callback,options){var key,length;if(!obj||typeof obj!=="object"){return}options=options||{};if("length"in obj&&!options.keys){for(key=0,length=obj.length;key<length;key+=1){if(callback.call(obj[key],obj[key],key,obj)===false){break}}}else{for(key in obj){if(hasOwn.call(obj,key)){if(callback.call(obj[key],obj[key],key,obj)===false){break}}}}},extend:function(target,source1,source2){util.each([source1,source2],function(obj){util.each(obj,function(val,key){target[key]=val},{keys:true})});return target},extendConfig:function(target,sources){util.each(sources,function(obj){util.each(obj,function(val,key){target[key]=key==="paths"?util.extend({},target[key],val):val},{keys:true})});return target},from:function(from){return{to:function(to,callback){var number;for(number=from;number<=to;number+=1){callback(number,number-from)}}}},getType:function(obj){return obj!=null&&{}.toString.call(obj).match(/\[object ([\s\S]*)\]/)[1]},global:global,getLineNumber:function(text,offset){function getCount(string,substring){return string.split(substring).length}return getCount(text.substr(0,offset),"\n")},heredoc:function(fn,variables){var match=function(){}.toString.call(fn).match(/\/\*<<<(\w+)[\r\n](?:([\s\S]*)[\r\n])?\1\s*\*\//),string;if(!match){throw new Error("util.heredoc() :: Function does not contain a heredoc")}string=match[2]||"";string=util.stringTemplate(string,variables);return string},inherit:function(To){return{from:function(From){To.prototype=inheritFrom(From.prototype);To.prototype.constructor=To}}},isNumber:function(value){return toString.call(value)==="[object Number]"},isArray:function(value){return toString.call(value)==="[object Array]"},isBoolean:function(value){return toString.call(value)==="[object Boolean]"},isFunction:function(value){return toString.call(value)==="[object Function]"},isPlainObject:function(value){return toString.call(value)==="[object Object]"&&!util.isUndefined(value)},isString:function(value){return typeof value==="string"||toString.call(value)==="[object String]"},isUndefined:function(obj){return obj===undef},regexEscape:function(text){return text.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},sortObject:function(object){var result;if(!util.isPlainObject(object)){return object}result={};util.each(Object.keys(object).sort(),function(name){result[name]=util.sortObject(object[name])});return result},stringTemplate:function(string,variables){util.each(variables,function(value,name){var pattern=new RegExp(("${"+name+"}").replace(/[^a-z0-9]/g,"\\$&"),"g");string=string.replace(pattern,value)},{keys:true});return string}};module.exports=util})()},{}],56:[function(require,module,exports){(function(){"use strict";var util=require("./../../js/util"),PHPErrorHandler=require("./grammar/ErrorHandler"),PHPGrammarState=require("./grammar/State");var uppercaseReplacements=[{pattern:/.*/g,replacement:function(all){return all.toUpperCase()}}],stringEscapeReplacements=[{pattern:/\\([\$efnrtv\\"])/g,replacement:function(all,chr){return{e:"",f:"\f",n:"\n",r:"\r",t:"	",v:"","\\":"\\",$:"$",'"':'"'}[chr]}}];module.exports={ErrorHandler:PHPErrorHandler,State:PHPGrammarState,ignore:"N_IGNORE",rules:{T_ABSTRACT:/abstract\b/i,T_AND_EQUAL:/&=/i,T_ARRAY:/array\b/i,T_ARRAY_CAST:/\(\s*array\s*\)/i,T_AS:/as\b/i,T_BAD_CHARACTER:/(?![\u0009\u000A\u000D])[\u0000-\u001F]/,T_BOOLEAN_AND:/&&/i,T_BOOLEAN_OR:/\|\|/,T_BOOL_CAST:/\(\s*bool(ean)?\s*\)/i,T_BREAK:/break\b/i,T_CALLABLE:/callable\b/i,T_CASE:/case\b/i,T_CATCH:/catch\b/i,T_CLASS:/class\b/i,T_CLASS_C:/__CLASS__/i,T_CLONE:/clone/i,T_CLOSE_TAG:/[?%]>\n?/,T_COMMENT:/(?:\/\/|#)(.*?)[\r\n]+|\/\*(?!\*)([\s\S]*?)\*\//,T_CONCAT_EQUAL:/\.=/,T_CONST:/const\b/i,T_CONSTANT_ENCAPSED_STRING:{oneOf:[{what:/'((?:[^']|\\')*)'/,captureIndex:1},{what:/"((?:(?!\$\{?[\$a-z0-9_]+)(?:[^\\"]|\\[\s\S]))*)"/,captureIndex:1,replace:stringEscapeReplacements}]},T_CONTINUE:/continue\b/i,T_CURLY_OPEN:/\{(?=\$)/,T_DEC:/--/i,T_DECLARE:/declare\b/i,T_DEFAULT:/default\b/i,T_DIR:/__DIR__\b/i,T_DIV_EQUAL:/\/=/,T_DNUMBER:/\d+\.\d+|\d\.\d+e\d+|\d+e[+-]\d+/i,T_DOC_COMMENT:/\/\*\*([\s\S]*?)\*\//,T_DO:/do\b/i,T_DOLLAR_OPEN_CURLY_BRACES:/\$\{/,T_DOUBLE_ARROW:/=>/,T_DOUBLE_CAST:/\((real|double|float)\)/i,T_DOUBLE_COLON:/::/i,T_ECHO:/echo\b/i,T_ELSE:/else\b/i,T_ELSEIF:/elseif\b/i,T_EMPTY:/empty\b/i,T_ENCAPSED_AND_WHITESPACE:/(?:[^"\${]|\\["\${])+/,T_ENDDECLARE:/enddeclare\b/i,T_ENDFOR:/endfor\b/i,T_ENDFOREACH:/endforeach\b/i,T_ENDIF:/endif\b/i,T_ENDSWITCH:/endswitch\b/i,T_ENDWHILE:/endwhile\b/i,T_END_HEREDOC:/(?!)/,T_EVAL:/eval\b/i,T_EXIT:/(?:exit|die)\b/i,T_EXTENDS:/extends\b/i,T_FILE:/__FILE__\b/i,T_FINAL:/final\b/i,T_FINALLY:/finally\b/i,T_FOR:/for\b/i,T_FOREACH:/foreach\b/i,T_FUNCTION:/function\b/i,T_FUNC_C:/__FUNCTION__\b/i,T_GLOBAL:/global\b/i,T_GOTO:/goto\b/i,T_HALT_COMPILER:/__halt_compiler(?=\(\)|\s|;)/,T_IF:/if\b/i,T_IMPLEMENTS:/implements\b/i,T_INC:/\+\+/,T_INCLUDE:/include\b/i,T_INCLUDE_ONCE:/include_once\b/i,T_INLINE_HTML:/(?:[^<]|<[^?%]|<\?(?!php)[\s\S]{3})+/,T_INSTANCEOF:/instanceof\b/i,T_INSTEADOF:/insteadof\b/i,T_INT_CAST:/\(\s*int(eger)?\s*\)/i,T_INTERFACE:/interface\b/i,T_ISSET:/isset\b/i,T_IS_EQUAL:/==(?!=)/i,T_IS_GREATER_OR_EQUAL:/>=/,T_IS_IDENTICAL:/===/i,T_IS_NOT_EQUAL:/!=|<>/,T_IS_NOT_IDENTICAL:/!==/,T_IS_SMALLER_OR_EQUAL:/<=/,T_LINE:/__LINE__\b/i,T_LIST:/list\b/i,T_LNUMBER:/\d+|0x[0-9a-f]/i,T_LOGICAL_AND:/and\b/i,T_LOGICAL_OR:/or\b/i,T_LOGICAL_XOR:/xor\b/i,T_METHOD_C:/__METHOD__\b/i,T_MINUS_EQUAL:/-=/i,T_ML_COMMENT:/(?!)/,T_MOD_EQUAL:/%=/i,T_MUL_EQUAL:/\*=/,T_NAMESPACE:/namespace\b/i,T_NS_C:/__NAMESPACE__\b/i,T_NS_SEPARATOR:/\\/,T_NEW:/new\b/i,T_NUM_STRING:/\d+/,T_OBJECT_CAST:/\(\s*object\s*\)/i,T_OBJECT_OPERATOR:/->/,T_OLD_FUNCTION:/old_function\b/i,T_OPEN_TAG:/(?:<\?(php)?|<%)\s?(?!=)/,T_OPEN_TAG_WITH_ECHO:/<[?%]=/,T_OR_EQUAL:/\|=/,T_PAAMAYIM_NEKUDOTAYIM:/::/i,T_PLUS_EQUAL:/\+=/,T_PRINT:/print\b/i,T_PRIVATE:/private\b/i,T_PUBLIC:/public\b/i,T_PROTECTED:/protected\b/i,T_REQUIRE:/require\b/i,T_REQUIRE_ONCE:/require_once\b/i,T_RETURN:/return\b/i,T_SL:/<</,T_SL_EQUAL:/<<=/,T_SR:/>>/,T_SR_EQUAL:/>>=/,T_START_HEREDOC:/<<<(["']?)([\$a-z0-9_]+)\1\n?/,T_STATIC:/static\b/i,T_STRING:/(?![\$0-9])[\$a-z0-9_]+/i,T_STRING_CAST:/\(\s*string\s*\)/i,T_STRING_VARNAME:/(?![\$0-9])[\$a-z0-9_]+/,T_SWITCH:/switch\b/i,T_THROW:/throw\b/i,T_TRAIT:/trait\b/i,T_TRAIT_C:/__TRAIT__\b/i,T_TRY:/try\b/i,T_UNSET:/unset\b/i,T_UNSET_CAST:/\(\s*unset\s*\)/i,T_USE:/use\b/i,T_VAR:/var\b/i,T_VARIABLE:{what:/\$([a-z0-9_]+)/i,captureIndex:1},T_WHILE:/while\b/i,T_WHITESPACE:/[\r\n\t ]+/,T_XOR_EQUAL:/\^=/i,T_YIELD:/yield\b/i,N_ARGUMENT:{oneOf:["N_DECORATED_ARGUMENT","N_VARIABLE"]},N_DECORATED_ARGUMENT:{captureAs:"N_ARGUMENT",components:{oneOf:[[{name:"variable",rule:"N_VARIABLE"},/=/,{name:"value",rule:"N_TERM"}],[{name:"type",oneOf:["N_NAMESPACE","T_STRING"]},{name:"variable",rule:"N_VARIABLE"},/=/,{name:"value",rule:"N_TERM"}],[{name:"type",oneOf:["N_NAMESPACE","T_STRING"]},{name:"variable",rule:"N_VARIABLE"}]]}},N_ARRAY_INDEX:{components:"N_EXPRESSION_LEVEL_2_A"},N_ARRAY_LITERAL:{components:["T_ARRAY",/\(/,{name:"elements",zeroOrMoreOf:[{oneOf:["N_KEY_VALUE_PAIR","N_EXPRESSION"]},{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/]},N_BOOLEAN:{components:{name:"bool",what:/true|false/i}},N_BREAK_STATEMENT:{components:["T_BREAK",{name:"levels",oneOf:["N_INTEGER","N_JUMP_ONE_LEVEL"]},/;/]},N_CASE:{components:["T_CASE",{name:"expression",what:"N_EXPRESSION"},/:/,{name:"body",zeroOrMoreOf:"N_STATEMENT"}]},N_CLASS_STATEMENT:{components:["T_CLASS",{name:"className",rule:"T_STRING"},{optionally:["T_EXTENDS",{name:"extend",oneOf:["N_NAMESPACE","T_STRING"]}]},{optionally:["T_IMPLEMENTS",{name:"implement",zeroOrMoreOf:[{oneOf:["N_NAMESPACE","T_STRING"]},{what:/(,|(?=\{))()/,captureIndex:2}]}]},/\{/,{name:"members",zeroOrMoreOf:{oneOf:["N_INSTANCE_PROPERTY_DEFINITION","N_STATIC_PROPERTY_DEFINITION","N_METHOD_DEFINITION","N_STATIC_METHOD_DEFINITION","N_CONSTANT_DEFINITION"]}},/\}/]},N_CLOSURE:{components:["T_FUNCTION",/\(/,{name:"args",zeroOrMoreOf:["N_ARGUMENT",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/,{oneOf:[["T_USE",/\(/,{name:"bindings",zeroOrMoreOf:["N_VARIABLE",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/],{name:"bindings",zeroOrMoreOf:{what:/(?!)/}}]},{name:"body",what:"N_STATEMENT"}]},N_COMMA_EXPRESSION:{components:{optionally:[{name:"expressions",zeroOrMoreOf:["N_EXPRESSION",{what:/(,|(?=[;\)]))()/,captureIndex:2}]},/(?=[;\)])/]}},N_COMPOUND_STATEMENT:{components:[/\{/,{name:"statements",zeroOrMoreOf:"N_STATEMENT"},/\}/]},N_CONSTANT_DEFINITION:{components:["T_CONST",{name:"constant",what:"T_STRING"},/=/,{name:"value",oneOf:["N_CLASS_CONSTANT","N_TERM"]},/;/]},N_CONTINUE_STATEMENT:{components:["T_CONTINUE",{name:"levels",oneOf:["N_INTEGER","N_JUMP_ONE_LEVEL"]},/;/]},N_DEFAULT_CASE:{components:["T_DEFAULT",/:/,{name:"body",zeroOrMoreOf:"N_STATEMENT"}]},N_ECHO_STATEMENT:{components:["T_ECHO",{name:"expression",what:"N_EXPRESSION"},/;/]},N_EMPTY_STATEMENT:{components:/;/},N_EXPRESSION:{components:{oneOf:["N_EXPRESSION_LEVEL_21"]}},N_EXPRESSION_LEVEL_0:{components:[{oneOf:["N_TERM",[/\(/,"N_EXPRESSION",/\)/]]}]},N_EXPRESSION_LEVEL_1_A:{captureAs:"N_NEW_EXPRESSION",components:{oneOf:[["T_NEW",{name:"className",oneOf:["N_NAMESPACED_REFERENCE","N_EXPRESSION_LEVEL_0"]},{optionally:[/\(/,{name:"args",zeroOrMoreOf:["N_EXPRESSION",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/]}],{name:"next",what:"N_EXPRESSION_LEVEL_0"}]},ifNoMatch:{component:"className",capture:"next"}},N_DO_WHILE_STATEMENT:{components:["T_DO",{name:"body",what:"N_STATEMENT"},"T_WHILE",/\(/,{name:"condition",what:"N_EXPRESSION"},/\)/,/;/]},N_EXPRESSION_LEVEL_1_B:{captureAs:"N_FUNCTION_CALL",components:{oneOf:[[{name:"func",oneOf:["N_NAMESPACED_REFERENCE","N_EXPRESSION_LEVEL_1_A"]
},[/\(/,{name:"args",zeroOrMoreOf:["N_EXPRESSION",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/]],{name:"next",what:"N_EXPRESSION_LEVEL_1_A"}]},ifNoMatch:{component:"func",capture:"next"}},N_EXPRESSION_LEVEL_1_D:{captureAs:"N_UNARY_EXPRESSION",components:[{name:"operator",optionally:"T_CLONE"},{name:"operand",what:"N_EXPRESSION_LEVEL_1_B"}],ifNoMatch:{component:"operator",capture:"operand"},options:{prefix:true}},N_EXPRESSION_LEVEL_2_A:{captureAs:"N_CLASS_CONSTANT",components:{oneOf:[[{name:"className",oneOf:["N_NAMESPACED_REFERENCE","N_EXPRESSION_LEVEL_1_D"]},"T_DOUBLE_COLON",{name:"constant",what:["T_STRING",/(?!\()/]}],{name:"next",what:"N_EXPRESSION_LEVEL_1_D"}]},ifNoMatch:{component:"constant",capture:"next"}},N_CLASS_CONSTANT:"N_EXPRESSION_LEVEL_2_A",N_EMPTY_ARRAY_INDEX:{captureAs:"N_ARRAY_INDEX",components:{name:"indices",what:[/\[/,/\]/]},options:{indices:true}},N_EXPRESSION_LEVEL_2_B:{components:[{name:"expression",oneOf:["N_EXPRESSION_LEVEL_2_A","N_NAMESPACED_REFERENCE"]},{name:"member",zeroOrMoreOf:{oneOf:[{name:"array_index",oneOf:["N_EMPTY_ARRAY_INDEX",{name:"indices",oneOrMoreOf:[/\[/,{name:"index",what:"N_EXPRESSION"},/\]/]}]},{name:"method_call",what:{name:"calls",oneOrMoreOf:["T_OBJECT_OPERATOR",{name:"func",oneOf:["N_STRING","N_VARIABLE"]},/\(/,{name:"args",zeroOrMoreOf:["N_EXPRESSION",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/]}},{name:"object_property",what:{name:"properties",oneOrMoreOf:["T_OBJECT_OPERATOR",{name:"property",what:"N_INSTANCE_MEMBER"},/(?!\()/]}},{name:"static_method_call",what:["T_DOUBLE_COLON",{name:"method",oneOf:["N_STRING","N_VARIABLE","N_VARIABLE_EXPRESSION"]},/\(/,{name:"args",zeroOrMoreOf:["N_EXPRESSION",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/]},{name:"static_property",what:["T_DOUBLE_COLON",{name:"property",what:"N_STATIC_MEMBER"}]}]}}],processor:function(node){var result;if(!node||!node.expression){return node}result=node.expression;util.each(node.member,function(member){if(member.array_index){result={name:"N_ARRAY_INDEX",array:result,indices:member.array_index.indices}}else if(member.method_call){result={name:"N_METHOD_CALL",object:result,calls:member.method_call.calls}}else if(member.object_property){result={name:"N_OBJECT_PROPERTY",object:result,properties:member.object_property.properties}}else if(member.static_method_call){result={name:"N_STATIC_METHOD_CALL",className:result,method:member.static_method_call.method,args:member.static_method_call.args}}else if(member.static_property){result={name:"N_STATIC_PROPERTY",className:result,property:member.static_property.property}}});return result}},N_EXPRESSION_LEVEL_3_A:{oneOf:["N_UNARY_PREFIX_EXPRESSION","N_UNARY_SUFFIX_EXPRESSION","N_EXPRESSION_LEVEL_2_B"]},N_EXPRESSION_LEVEL_3_B:{oneOf:["N_ARRAY_CAST","N_EXPRESSION_LEVEL_3_A"]},N_ARRAY_CAST:{components:["T_ARRAY_CAST",{name:"value",rule:"N_EXPRESSION_LEVEL_3_A"}]},N_UNARY_PREFIX_EXPRESSION:{captureAs:"N_UNARY_EXPRESSION",components:[{name:"operator",oneOf:["T_INC","T_DEC",/~/]},{name:"operand",what:"N_EXPRESSION_LEVEL_2_B"}],ifNoMatch:{component:"operator",capture:"operand"},options:{prefix:true}},N_UNARY_SUFFIX_EXPRESSION:{captureAs:"N_UNARY_EXPRESSION",components:[{name:"operand",what:"N_EXPRESSION_LEVEL_2_B"},{name:"operator",oneOf:["T_INC","T_DEC"]}],ifNoMatch:{component:"operator",capture:"operand"},options:{prefix:false}},N_EXPRESSION_LEVEL_4:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_3_B"},{name:"right",zeroOrMoreOf:[{name:"operator",what:"T_INSTANCEOF"},{name:"operand",what:"N_EXPRESSION_LEVEL_3_B"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_5:{captureAs:"N_UNARY_EXPRESSION",components:[{name:"operator",optionally:/!/},{name:"operand",what:"N_EXPRESSION_LEVEL_4"}],ifNoMatch:{component:"operator",capture:"operand"},options:{prefix:true}},N_EXPRESSION_LEVEL_6:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_5"},{name:"right",zeroOrMoreOf:[{name:"operator",oneOf:[/\*/,/\//,/%/]},{name:"operand",what:"N_EXPRESSION_LEVEL_5"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_7_A:{captureAs:"N_UNARY_EXPRESSION",components:[{name:"operator",optionally:/([+-])(?!\1)/},{name:"operand",what:"N_EXPRESSION_LEVEL_6"}],ifNoMatch:{component:"operator",capture:"operand"},options:{prefix:true}},N_EXPRESSION_LEVEL_7_B:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_7_A"},{name:"right",zeroOrMoreOf:[{name:"operator",oneOf:[/\+/,/-/,/\./]},{name:"operand",what:"N_EXPRESSION_LEVEL_7_A"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_8:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_7_B"},{name:"right",zeroOrMoreOf:[{name:"operator",oneOf:["T_SL","T_SR"]},{name:"operand",what:"N_EXPRESSION_LEVEL_7_B"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_9:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_8"},{name:"right",zeroOrMoreOf:[{name:"operator",oneOf:["T_IS_SMALLER_OR_EQUAL",/</,"T_IS_GREATER_OR_EQUAL",/>/]},{name:"operand",what:"N_EXPRESSION_LEVEL_8"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_10:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_9"},{name:"right",wrapInArray:true,optionally:[{name:"operator",oneOf:["T_IS_IDENTICAL","T_IS_EQUAL","T_IS_NOT_IDENTICAL","T_IS_NOT_EQUAL"]},{name:"operand",what:"N_EXPRESSION_LEVEL_9"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_11:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_10"},{name:"right",zeroOrMoreOf:[{name:"operator",what:/&/},{name:"operand",what:"N_EXPRESSION_LEVEL_10"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_12:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_11"},{name:"right",zeroOrMoreOf:[{name:"operator",what:/\^/},{name:"operand",what:"N_EXPRESSION_LEVEL_11"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_13:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_12"},{name:"right",zeroOrMoreOf:[{name:"operator",what:/\|/},{name:"operand",what:"N_EXPRESSION_LEVEL_12"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_14:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_13"},{name:"right",zeroOrMoreOf:[{name:"operator",what:/&&/},{name:"operand",what:"N_EXPRESSION_LEVEL_13"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_15:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_14"},{name:"right",zeroOrMoreOf:[{name:"operator",what:/\|\|/},{name:"operand",what:"N_EXPRESSION_LEVEL_14"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_16:{captureAs:"N_TERNARY",components:[{name:"condition",what:"N_EXPRESSION_LEVEL_15"},{name:"options",zeroOrMoreOf:[/\?/,{name:"consequent",what:"N_EXPRESSION_LEVEL_15"},/:/,{name:"alternate",what:"N_EXPRESSION_LEVEL_15"}]}],ifNoMatch:{component:"options",capture:"condition"}},N_EXPRESSION_LEVEL_17_A:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_16"},{name:"right",zeroOrMoreOf:[{name:"operator",what:/=/},{name:"operand",what:"N_EXPRESSION_LEVEL_16"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_17_B:{captureAs:"N_PRINT_EXPRESSION",components:{oneOf:[["T_PRINT",{name:"operand",what:"N_EXPRESSION_LEVEL_17_A"}],{name:"next",what:"N_EXPRESSION_LEVEL_17_A"}]},ifNoMatch:{component:"operand",capture:"next"}},N_EXPRESSION_LEVEL_18:{captureAs:"N_EXPRESSION",components:[{name:"left",what:"N_EXPRESSION_LEVEL_17_B"},{name:"right",zeroOrMoreOf:[{name:"operator",what:"T_LOGICAL_AND"},{name:"operand",what:"N_EXPRESSION_LEVEL_17_B"}]}],ifNoMatch:{component:"right",capture:"left"}},N_EXPRESSION_LEVEL_19:{components:"N_EXPRESSION_LEVEL_18"},N_EXPRESSION_LEVEL_20:{components:"N_EXPRESSION_LEVEL_19"},N_EXPRESSION_LEVEL_21:{components:"N_EXPRESSION_LEVEL_20"},N_EXPRESSION_STATEMENT:{components:[{name:"expression",what:"N_EXPRESSION"},/;/]},N_FLOAT:{components:{name:"number",what:"T_DNUMBER"}},N_FOR_STATEMENT:{components:["T_FOR",/\(/,{name:"initializer",what:"N_COMMA_EXPRESSION"},/;/,{name:"condition",what:"N_COMMA_EXPRESSION"},/;/,{name:"update",what:"N_COMMA_EXPRESSION"},/\)/,{name:"body",what:"N_STATEMENT"}]},N_FOREACH_STATEMENT:{components:["T_FOREACH",/\(/,{name:"array",rule:"N_EXPRESSION"},"T_AS",{optionally:[{name:"key",oneOf:["N_ARRAY_INDEX","N_VARIABLE"]},"T_DOUBLE_ARROW"]},{name:"value",oneOf:["N_ARRAY_INDEX","N_VARIABLE"]},/\)/,{name:"body",what:"N_STATEMENT"}]},N_FUNCTION_STATEMENT:{components:["T_FUNCTION",{name:"func",what:"T_STRING"},/\(/,{name:"args",zeroOrMoreOf:["N_ARGUMENT",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/,{name:"body",what:"N_STATEMENT"}]},N_GOTO_STATEMENT:{components:["T_GOTO",{name:"label",what:"T_STRING"},/;/]},N_IF_STATEMENT:{components:["T_IF",/\(/,{name:"condition",what:"N_EXPRESSION"},/\)/,{name:"consequentStatement",what:"N_STATEMENT"},{optionally:[/else(\b|(?=if\b))/,{name:"alternateStatement",what:"N_STATEMENT"}]}]},N_IGNORE:{components:{oneOrMoreOf:{oneOf:["T_WHITESPACE","T_COMMENT","T_DOC_COMMENT"]}}},N_INCLUDE_EXPRESSION:{components:["T_INCLUDE",{name:"path",what:"N_EXPRESSION"}]},N_INLINE_HTML_STATEMENT:[{oneOf:["T_CLOSE_TAG","<BOF>"]},{name:"html",what:"T_INLINE_HTML"},{oneOf:["T_OPEN_TAG","<EOF>"]}],N_INSTANCE_MEMBER:{components:{oneOf:["N_STRING","N_VARIABLE",[/\{/,"N_EXPRESSION",/\}/]]}},N_INSTANCE_PROPERTY_DEFINITION:{components:[{name:"visibility",oneOf:["T_PUBLIC","T_PRIVATE","T_PROTECTED"]},{name:"variable",what:"N_VARIABLE"},{optionally:[/=/,{name:"value",what:"N_TERM"}]},/;/]},N_INTEGER:{components:{name:"number",what:"T_LNUMBER"}},N_INTERFACE_METHOD_DEFINITION:{components:[{name:"visibility",oneOf:["T_PUBLIC","T_PRIVATE","T_PROTECTED"]},"T_FUNCTION",{name:"func",what:"T_STRING"},/\(/,{name:"args",zeroOrMoreOf:["N_ARGUMENT",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/,/;/]},N_INTERFACE_STATEMENT:{components:["T_INTERFACE",{name:"interfaceName",rule:"T_STRING"},{optionally:["T_EXTENDS",{name:"extend",oneOf:["N_NAMESPACE","T_STRING"]}]},/\{/,{name:"members",zeroOrMoreOf:{oneOf:["N_INTERFACE_METHOD_DEFINITION","N_STATIC_INTERFACE_METHOD_DEFINITION","N_CONSTANT_DEFINITION","N_INSTANCE_PROPERTY_DEFINITION","N_STATIC_PROPERTY_DEFINITION","N_METHOD_DEFINITION","N_STATIC_METHOD_DEFINITION"]}},/\}/]},N_ISSET:{components:["T_ISSET",/\(/,{name:"variables",zeroOrMoreOf:["N_EXPRESSION",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/]},N_JUMP_ONE_LEVEL:{captureAs:"N_INTEGER",components:{name:"number",what:/()/},options:{number:"1"}},N_KEY_VALUE_PAIR:{components:[{name:"key",what:"N_EXPRESSION"},"T_DOUBLE_ARROW",{name:"value",what:"N_EXPRESSION"}]},N_LABEL_STATEMENT:{components:[{name:"label",what:[/(?!default\b)/i,"T_STRING"]},/:/]},N_LIST:{components:["T_LIST",/\(/,{name:"elements",zeroOrMoreOf:{oneOf:[[{oneOf:["N_VARIABLE","N_ARRAY_INDEX"]},{what:/(,|(?=\)))()/,captureIndex:2}],"N_VOID"]}},/\)/]},N_MAGIC_CONSTANT:{components:{oneOf:["N_MAGIC_DIR_CONSTANT","N_MAGIC_FILE_CONSTANT","N_MAGIC_LINE_CONSTANT"]}},N_MAGIC_DIR_CONSTANT:{components:{what:"T_DIR",replace:uppercaseReplacements,allowMerge:false}},N_MAGIC_FILE_CONSTANT:{components:{what:"T_FILE",replace:uppercaseReplacements,allowMerge:false}},N_MAGIC_LINE_CONSTANT:{components:{what:"T_LINE",replace:uppercaseReplacements,captureOffsetAs:"offset"}},N_METHOD_DEFINITION:{components:[{name:"visibility",optionally:{oneOf:["T_PUBLIC","T_PRIVATE","T_PROTECTED"]}},"T_FUNCTION",{name:"func",what:"T_STRING"},/\(/,{name:"args",zeroOrMoreOf:["N_ARGUMENT",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/,{name:"body",what:"N_STATEMENT"}],processor:function(node){if(!node.visibility){node.visibility="public"}return node}},N_NAMESPACE:{components:[/(?!(?:new|use)\b)/i,{optionally:"T_STRING"},{oneOrMoreOf:["T_NS_SEPARATOR","T_STRING"]}]},N_NAMESPACE_STATEMENT:{components:["T_NAMESPACE",{name:"namespace",oneOf:["N_NAMESPACE","T_STRING"]},/;/,{name:"statements",zeroOrMoreOf:"N_NAMESPACE_SCOPED_STATEMENT"}]},N_NAMESPACED_REFERENCE:{captureAs:"N_STRING",components:{name:"string",what:"N_NAMESPACE"}},N_NULL:{allowMerge:false,what:/null\b/i},N_PROGRAM:{components:[{optionally:"T_OPEN_TAG"},{name:"statements",zeroOrMoreOf:"N_STATEMENT"},{oneOf:["T_CLOSE_TAG",{what:"<EOF>"}]}]},N_RETURN_STATEMENT:{components:["T_RETURN",{name:"expression",optionally:"N_EXPRESSION"},/;/]},N_STATEMENT:{components:{oneOf:["N_NAMESPACE_SCOPED_STATEMENT","N_NAMESPACE_STATEMENT"]}},N_NAMESPACE_SCOPED_STATEMENT:{components:{oneOf:["N_COMPOUND_STATEMENT","N_RETURN_STATEMENT","N_INLINE_HTML_STATEMENT","N_EMPTY_STATEMENT","N_ECHO_STATEMENT","N_BREAK_STATEMENT","N_CONTINUE_STATEMENT","N_EXPRESSION_STATEMENT","N_FUNCTION_STATEMENT","N_IF_STATEMENT","N_FOREACH_STATEMENT","N_FOR_STATEMENT","N_WHILE_STATEMENT","N_DO_WHILE_STATEMENT","N_CLASS_STATEMENT","N_INTERFACE_STATEMENT","N_SWITCH_STATEMENT","N_LABEL_STATEMENT","N_GOTO_STATEMENT","N_USE_STATEMENT","N_THROW_STATEMENT"]}},N_REQUIRE_EXPRESSION:{components:["T_REQUIRE",{name:"path",what:"N_EXPRESSION"}]},N_REQUIRE_ONCE_EXPRESSION:{components:["T_REQUIRE_ONCE",{name:"path",what:"N_EXPRESSION"}]},N_SELF:{allowMerge:false,what:/self\b(?=\s*::)/},N_STATIC_INTERFACE_METHOD_DEFINITION:{components:[{oneOf:[[{name:"visibility",rule:"N_VISIBILITY"},"T_STATIC"],["T_STATIC",{name:"visibility",rule:"N_VISIBILITY"}],"T_STATIC"]},"T_FUNCTION",{name:"method",what:"T_STRING"},/\(/,{name:"args",zeroOrMoreOf:["N_ARGUMENT",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/,/;/]},N_STATIC_MEMBER:{components:{oneOf:["N_STATIC_VARIABLE","N_STATIC_VARIABLE_EXPRESSION"]}},N_STATIC_METHOD_DEFINITION:{components:[{oneOf:[[{name:"visibility",rule:"N_VISIBILITY"},"T_STATIC"],["T_STATIC",{name:"visibility",rule:"N_VISIBILITY"}],"T_STATIC"]},"T_FUNCTION",{name:"method",what:"T_STRING"},/\(/,{name:"args",zeroOrMoreOf:["N_ARGUMENT",{what:/(,|(?=\)))()/,captureIndex:2}]},/\)/,{name:"body",what:"N_STATEMENT"}]},N_STATIC_VARIABLE:{captureAs:"N_STRING",components:{name:"string",rule:"T_VARIABLE"}},N_STATIC_VARIABLE_EXPRESSION:{oneOf:[[/\$/,"N_VARIABLE"],[/\$\{/,"N_EXPRESSION",/\}/]]},N_STATIC_PROPERTY_DEFINITION:{components:[{oneOf:[[{name:"visibility",rule:"N_VISIBILITY"},"T_STATIC"],["T_STATIC",{name:"visibility",rule:"N_VISIBILITY"}],"T_STATIC"]},{name:"variable",what:"N_VARIABLE"},{optionally:[/=/,{name:"value",what:"N_TERM"}]},/;/]},N_STRING:{components:{name:"string",what:"T_STRING"}},N_STRING_EXPRESSION:{components:[/"/,{name:"parts",oneOrMoreOf:{oneOf:["N_STRING_VARIABLE","N_STRING_VARIABLE_EXPRESSION","N_STRING_TEXT"]}},/"/]},N_STRING_LITERAL:{components:{oneOf:[{name:"string",what:"T_CONSTANT_ENCAPSED_STRING"},"N_STRING_EXPRESSION"]}},N_STRING_TEXT:{captureAs:"N_STRING_LITERAL",components:{name:"string",what:/(?:[^\\"\$]|\\[\s\S]|\$(?=\$))+/,ignoreWhitespace:false,replace:stringEscapeReplacements}},N_STRING_VARIABLE:{captureAs:"N_VARIABLE",components:[{oneOf:[{name:"variable",what:"T_VARIABLE"},{name:"variable",what:/\$\{([a-z0-9_]+)\}/i,captureIndex:1}]}]},N_STRING_VARIABLE_EXPRESSION:{captureAs:"N_VARIABLE_EXPRESSION",components:[{oneOf:[{name:"expression",what:[/\$\{(?=\$)/,"N_VARIABLE",/\}/]}]}]},N_SWITCH_STATEMENT:{components:["T_SWITCH",/\(/,{name:"expression",what:"N_EXPRESSION"},/\)/,/\{/,{name:"cases",zeroOrMoreOf:{oneOf:["N_CASE","N_DEFAULT_CASE"]}},/\}/]},N_TERM:{components:{oneOf:["N_VARIABLE","N_FLOAT","N_INTEGER","N_BOOLEAN","N_STRING_LITERAL","N_ARRAY_LITERAL","N_LIST","N_ISSET","N_CLOSURE","N_MAGIC_CONSTANT","N_REQUIRE_EXPRESSION","N_REQUIRE_ONCE_EXPRESSION","N_INCLUDE_EXPRESSION","N_SELF","N_NULL","N_NAMESPACED_REFERENCE","N_STRING"]}},N_THROW_STATEMENT:{components:["T_THROW",{name:"expression",rule:"N_EXPRESSION"},/;/]},N_USE_STATEMENT:{components:["T_USE",{name:"uses",oneOrMoreOf:[{name:"source",oneOf:["N_NAMESPACE","T_STRING"]},{optionally:["T_AS",{name:"alias",what:"T_STRING"}]}]},/;/]},N_VARIABLE:{components:[{optionally:{name:"reference",what:/&/}},{oneOf:[{name:"variable",what:"T_VARIABLE"},{name:"variable",what:/\$\{([a-z0-9_]+)\}/i,captureIndex:1}]}]},N_VARIABLE_EXPRESSION:{components:{name:"expression",rule:"N_STATIC_VARIABLE_EXPRESSION"}},N_VISIBILITY:{oneOf:["T_PUBLIC","T_PRIVATE","T_PROTECTED"]},N_VOID:{components:{name:"value",what:/,()/,captureIndex:1}},N_WHILE_STATEMENT:{components:["T_WHILE",/\(/,{name:"condition",what:"N_EXPRESSION"},/\)/,/\{/,{name:"statements",zeroOrMoreOf:"N_STATEMENT"},/\}/]}},start:"N_PROGRAM"}})()},{"./../../js/util":55,"./grammar/ErrorHandler":57,"./grammar/State":58}],57:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),PHPParseError=require("./../interpreter/Error/Parse");function ErrorHandler(stderr,state){this.state=state;this.stderr=stderr}util.extend(ErrorHandler.prototype,{handle:function(parseException){var handler=this,text=parseException.getText(),error,what;if(parseException.unexpectedEndOfInput()){what="$end"}else{what="'"+text.substr(parseException.getFurthestMatchEnd(),1)+"'"}error=new PHPParseError(PHPParseError.SYNTAX_UNEXPECTED,{file:handler.state.getPath(),line:parseException.getLineNumber(),what:what});if(handler.state.isMainProgram()){handler.stderr.write(error.message)}throw error}});module.exports=ErrorHandler})()},{"./../../../js/util":55,"./../interpreter/Error/Parse":67}],58:[function(require,module,exports){(function(){"use strict";var phpUtil=require("../util"),util=require("./../../../js/util");function State(){this.path=null}util.extend(State.prototype,{getPath:function(){return phpUtil.normalizeModulePath(this.path)},isMainProgram:function(){return this.path===null},setPath:function(path){this.path=path}});module.exports=State})()},{"../util":103,"./../../../js/util":55}],59:[function(require,module,exports){(function(){"use strict";var util=require("./../../js/util"),Call=require("./interpreter/Call"),Exception=require("./../../js/Exception/Exception"),KeyValuePair=require("./interpreter/KeyValuePair"),LabelRepository=require("./interpreter/LabelRepository"),List=require("./interpreter/List"),NamespaceScope=require("./interpreter/NamespaceScope"),ObjectValue=require("./interpreter/Value/Object"),PHPEnvironment=require("./interpreter/Environment"),PHPError=require("./interpreter/Error"),PHPFatalError=require("./interpreter/Error/Fatal"),PHPState=require("./interpreter/State"),Promise=require("./../../js/Promise"),Scope=require("./interpreter/Scope");var INCLUDE_OPTION="include",binaryOperatorToMethod={"+":"add","-":"subtract","*":"multiply","/":"divide",".":"concat","<<":"shiftLeftBy",">>":"shiftRightBy","==":"isEqualTo","!=":"isNotEqualTo","===":"isIdenticalTo","!==":"isNotIdenticalTo","<":"isLessThan","=":{"false":"setValue","true":"setReference"}},hasOwn={}.hasOwnProperty,unaryOperatorToMethod={prefix:{"+":"toPositive","-":"toNegative","++":"preIncrement","--":"preDecrement","~":"onesComplement","!":"logicalNot"},suffix:{"++":"postIncrement","--":"postDecrement"}};function evaluateModule(state,code,context,stdin,stdout,stderr){function include(path){var done=false,promise=new Promise,pause=null,result;function completeWith(moduleResult){if(pause){pause.resume(moduleResult)}else{result=moduleResult}}promise.done(function(contents){done=true;engine.execute(contents,path).done(function(resultNative){completeWith(valueFactory.coerce(resultNative))}).fail(function(exception){throw exception})}).fail(function(){done=true;callStack.raiseError(PHPError.E_WARNING,"include("+path+"): failed to open stream: No such file or directory");callStack.raiseError(PHPError.E_WARNING,"include(): Failed opening '"+path+"' for inclusion");completeWith(valueFactory.createNull())});if(!options[INCLUDE_OPTION]){throw new Exception('include() :: No "include" transport is available for loading the module.')}options[INCLUDE_OPTION](path,promise);if(done){return result}pause=resumable.createPause();pause.now()}var engine=state.getEngine(),exports={},globalNamespace=state.getGlobalNamespace(),valueFactory=state.getValueFactory(),promise=new Promise,referenceFactory=state.getReferenceFactory(),callStack=state.getCallStack(),globalScope=state.getGlobalScope(),options=state.getOptions(),resumable=state.getResumable(),tools={createClosure:function(func,scope){func.scopeWhenCreated=scope;return tools.valueFactory.createObject(func,globalNamespace.getClass("Closure"))},createInstance:function(namespaceScope,classNameValue,args){var className=classNameValue.getNative(),classObject=namespaceScope.getClass(className);return classObject.instantiate(args)},createKeyValuePair:function(key,value){return new KeyValuePair(key,value)},createList:function(elements){return new List(elements)},createNamespaceScope:function(namespace){return new NamespaceScope(globalNamespace,namespace)},getPath:function(){return valueFactory.createString(context.path)},getPathDirectory:function(){return valueFactory.createString(state.getPath().replace(/\/[^\/]+$/,""))},implyArray:function(variable){if(!variable.isDefined()||variable.getValue().getType()==="null"){variable.setValue(valueFactory.createArray([]))}return variable.getValue()},implyObject:function(variable){return variable.getValue()},include:include,popCall:function(){callStack.pop()},pushCall:function(thisObject,currentClass){var call;if(!valueFactory.isValue(thisObject)){thisObject=null}call=new Call(new Scope(callStack,valueFactory,thisObject,currentClass));callStack.push(call);return call},referenceFactory:referenceFactory,requireOnce:include,require:include,throwNoActiveClassScope:function(){throw new PHPFatalError(PHPFatalError.SELF_WHEN_NO_ACTIVE_CLASS)},valueFactory:valueFactory},PHPException=state.getPHPExceptionClass();callStack.push(new Call(globalScope));code="var namespaceScope = tools.createNamespaceScope(namespace), namespaceResult, scope = globalScope, currentClass = null;"+code;code+="return tools.valueFactory.createNull();";code="exports.result = (function () {"+code+"}());";resumable.execute(code,{expose:{exports:exports,stdin:stdin,stdout:stdout,stderr:stderr,tools:tools,callStack:callStack,globalScope:globalScope,namespace:globalNamespace}}).done(function(){promise.resolve(exports.result.getNative(),exports.result.getType())}).fail(function(exception){if(exception instanceof ObjectValue){(function(value){var exception=value.getNative();if(!exception instanceof PHPException){throw new Exception("Weird value class thrown: "+value.getClassName())}exception=new PHPFatalError(PHPFatalError.UNCAUGHT_EXCEPTION,{name:value.getClassName()});if(context.mainProgram){stderr.write(exception.message)}promise.reject(exception)})(exception);return promise}if(exception instanceof PHPError){if(context.mainProgram){stderr.write(exception.message)}return promise.reject(exception)}throw exception});return promise}function hoistDeclarations(statements){var declarations=[],nonDeclarations=[];util.each(statements,function(statement){if(/^N_(CLASS|FUNCTION)_STATEMENT$/.test(statement.name)){declarations.push(statement)}else{nonDeclarations.push(statement)}});return declarations.concat(nonDeclarations)}function interpretFunction(argNodes,bindingNodes,statementNode,interpret){var args=[],argumentAssignments="",bindingAssignments="",body=interpret(statementNode);util.each(bindingNodes,function(bindingNode){var methodSuffix=bindingNode.reference?"Reference":"Value",variableName=bindingNode.variable;bindingAssignments+='scope.getVariable("'+variableName+'").set'+methodSuffix+'(parentScope.getVariable("'+variableName+'").get'+methodSuffix+"());"});util.each(argNodes,function(argNode,index){var valueCode="$",variable;if(argNode.name==="N_ARGUMENT"){variable=argNode.variable.variable;valueCode+=variable;if(argNode.value){valueCode+=" || "+interpret(argNode.value)}}else{variable=argNode.variable;valueCode+=variable;if(!argNode.reference){valueCode+=".getValue()"}}if(argNode.reference){argumentAssignments+='scope.getVariable("'+variable+'").setReference('+valueCode+".getReference());"}else{argumentAssignments+='scope.getVariable("'+variable+'").setValue('+valueCode+");"}args[index]="$"+variable});body=argumentAssignments+bindingAssignments+body;body="var scope = tools.pushCall(this, currentClass).getScope(); try { "+body+" } finally { tools.popCall(); }";body="function ("+args.join(", ")+") {"+body+"}";if(bindingNodes&&bindingNodes.length>0){body="(function (parentScope) { return "+body+"; }(scope))"}return body}function processBlock(statements,interpret,context){var code="",labelRepository=context.labelRepository,statementDatas=[];util.each(statements,function(statement){var labels={},gotos={},statementCode;function onPendingLabel(label){gotos[label]=true}function onFoundLabel(label){labels[label]=true}labelRepository.on("pending label",onPendingLabel);labelRepository.on("found label",onFoundLabel);statementCode=interpret(statement,context);labelRepository.off("pending label",onPendingLabel);labelRepository.off("found label",onFoundLabel);statementDatas.push({code:statementCode,gotos:gotos,labels:labels,prefix:"",suffix:""})});util.each(statementDatas,function(statementData,index){if(index>0){util.each(Object.keys(statementData.labels),function(label){statementDatas[0].prefix="if (!"+"goingToLabel_"+label+") {"+statementDatas[0].prefix;statementData.prefix="}"+statementData.prefix})}});util.each(statementDatas,function(statementData,statementIndex){util.each(Object.keys(statementData.gotos),function(label){if(!hasOwn.call(statementData.labels,label)){util.each(statementDatas,function(otherStatementData,otherStatementIndex){if(otherStatementData!==statementData){if(hasOwn.call(otherStatementData.labels,label)){if(otherStatementIndex>statementIndex){statementData.prefix=label+": {"+statementData.prefix;otherStatementData.prefix="}"+otherStatementData.prefix}else{otherStatementData.prefix+="continue_"+label+": do {";statementData.suffix+="} while (goingToLabel_"+label+");"}}}})}})});util.each(statementDatas,function(statementData){code+=statementData.prefix+statementData.code+statementData.suffix});return code}module.exports={Environment:PHPEnvironment,State:PHPState,nodes:{N_ARRAY_CAST:function(node,interpret){return interpret(node.value,{getValue:true})+".coerceToArray()"},N_ARRAY_INDEX:function(node,interpret,context){var arrayVariableCode,indexValues=[],suffix="";if(node.indices!==true){util.each(node.indices,function(index){indexValues.push(interpret(index.index,{assignment:false,getValue:true}))})}if(context.assignment){arrayVariableCode="tools.implyArray("+interpret(node.array,{getValue:false})+")"}else{suffix=".getValue()";arrayVariableCode=interpret(node.array,{getValue:true})}if(indexValues.length>0){return arrayVariableCode+".getElementByKey("+indexValues.join(").getValue().getElementByKey(")+")"+suffix}return arrayVariableCode+".getElementByKey(tools.valueFactory.createInteger("+arrayVariableCode+".getLength()))"+suffix},N_ARRAY_LITERAL:function(node,interpret){var elementValues=[];util.each(node.elements,function(element){elementValues.push(interpret(element))});return"tools.valueFactory.createArray(["+elementValues.join(", ")+"])"},N_BOOLEAN:function(node){return"tools.valueFactory.createBoolean("+node.bool+")"},N_BREAK_STATEMENT:function(node,interpret,context){return"break switch_"+(context.switchCase.depth-(node.levels.number-1))+";"},N_CASE:function(node,interpret,context){var body="";util.each(node.body,function(statement){body+=interpret(statement)});return"if (switchMatched_"+context.switchCase.depth+" || switchExpression_"+context.switchCase.depth+".isEqualTo("+interpret(node.expression)+").getNative()) {switchMatched_"+context.switchCase.depth+" = true; "+body+"}"},N_CLASS_CONSTANT:function(node,interpret){return interpret(node.className,{getValue:true,allowBareword:true})+".getConstantByName("+JSON.stringify(node.constant)+", namespaceScope)"},N_CLASS_STATEMENT:function(node,interpret){var code,constantCodes=[],methodCodes=[],propertyCodes=[],staticPropertyCodes=[],superClass=node.extend?"namespaceScope.getClass("+JSON.stringify(node.extend)+")":"null",interfaces=JSON.stringify(node.implement||[]);util.each(node.members,function(member){var data=interpret(member,{inClass:true});if(member.name==="N_INSTANCE_PROPERTY_DEFINITION"){propertyCodes.push('"'+data.name+'": '+data.value)}else if(member.name==="N_STATIC_PROPERTY_DEFINITION"){staticPropertyCodes.push('"'+data.name+'": {visibility: '+data.visibility+", value: "+data.value+"}")}else if(member.name==="N_METHOD_DEFINITION"||member.name==="N_STATIC_METHOD_DEFINITION"){methodCodes.push('"'+data.name+'": '+data.body)}else if(member.name==="N_CONSTANT_DEFINITION"){constantCodes.push('"'+data.name+'": '+data.value)}});code="{superClass: "+superClass+", interfaces: "+interfaces+", staticProperties: {"+staticPropertyCodes.join(", ")+"}, properties: {"+propertyCodes.join(", ")+"}, methods: {"+methodCodes.join(", ")+"}, constants: {"+constantCodes.join(", ")+"}}";return"(function () {var currentClass = namespace.defineClass("+JSON.stringify(node.className)+", "+code+", namespaceScope);}());"},N_CLOSURE:function(node,interpret){var func=interpretFunction(node.args,node.bindings,node.body,interpret);return"tools.createClosure("+func+", scope)"},N_COMMA_EXPRESSION:function(node,interpret){var expressionCodes=[];util.each(node.expressions,function(expression){expressionCodes.push(interpret(expression))});return expressionCodes.join(",")},N_COMPOUND_STATEMENT:function(node,interpret,context){return processBlock(node.statements,interpret,context)},N_CONSTANT_DEFINITION:function(node,interpret){return{name:node.constant,value:"function () { return "+(node.value?interpret(node.value):"null")+"; }"}},N_CONTINUE_STATEMENT:function(node,interpret,context){return"break switch_"+(context.switchCase.depth-(node.levels.number-1))+";"},N_DEFAULT_CASE:function(node,interpret,context){var body="";util.each(node.body,function(statement){body+=interpret(statement)});return"if (!switchMatched_"+context.switchCase.depth+") {switchMatched_"+context.switchCase.depth+" = true; "+body+"}"},N_DO_WHILE_STATEMENT:function(node,interpret){var code=interpret(node.body);return"do {"+code+"} while ("+interpret(node.condition)+".coerceToBoolean().getNative());"},N_ECHO_STATEMENT:function(node,interpret){return"stdout.write("+interpret(node.expression)+".coerceToString().getNative());"},N_EXPRESSION:function(node,interpret){var isAssignment=node.right[0].operator==="=",expressionEnd="",expressionStart=interpret(node.left,{assignment:isAssignment,getValue:!isAssignment});util.each(node.right,function(operation,index){var getValueIfApplicable,isReference=false,method,rightOperand,valuePostProcess="";if(isAssignment&&operation.operand.reference){isReference=true;valuePostProcess=".getReference()"}getValueIfApplicable=(!isAssignment||index===node.right.length-1)&&!isReference;rightOperand=interpret(operation.operand,{getValue:getValueIfApplicable});if(operation.operator==="&&"){expressionStart="tools.valueFactory.createBoolean("+expressionStart+".coerceToBoolean().getNative() && ("+rightOperand+valuePostProcess+".coerceToBoolean().getNative()";expressionEnd+="))"}else{method=binaryOperatorToMethod[operation.operator];if(!method){throw new Exception('Unsupported binary operator "'+operation.operator+'"')}if(util.isPlainObject(method)){method=method[isReference]}expressionStart+="."+method+"("+rightOperand+valuePostProcess;expressionEnd+=")"}});return expressionStart+expressionEnd},N_EXPRESSION_STATEMENT:function(node,interpret){return interpret(node.expression)+";"},N_FLOAT:function(node){return"tools.valueFactory.createFloat("+node.number+")"},N_FOR_STATEMENT:function(node,interpret){var bodyCode=interpret(node.body),conditionCode=interpret(node.condition),initializerCode=interpret(node.initializer),updateCode=interpret(node.update);if(conditionCode){conditionCode+=".coerceToBoolean().getNative()"}return"for ("+initializerCode+";"+conditionCode+";"+updateCode+") {"+bodyCode+"}"},N_FOREACH_STATEMENT:function(node,interpret,context){
var arrayValue=interpret(node.array),arrayVariable,code="",key=node.key?interpret(node.key,{getValue:false}):null,lengthVariable,pointerVariable,value=interpret(node.value,{getValue:false});if(!context.foreach){context.foreach={depth:0}}else{context.foreach.depth++}arrayVariable="array_"+context.foreach.depth;code+="var "+arrayVariable+" = "+arrayValue+".reset();";lengthVariable="length_"+context.foreach.depth;code+="var "+lengthVariable+" = "+arrayVariable+".getLength();";pointerVariable="pointer_"+context.foreach.depth;code+="var "+pointerVariable+" = 0;";code+="while ("+pointerVariable+" < "+lengthVariable+") {";if(key){code+=key+".setValue("+arrayVariable+".getKeyByIndex("+pointerVariable+"));"}code+=value+".set"+(node.value.reference?"Reference":"Value")+"("+arrayVariable+".getElementByIndex("+pointerVariable+")"+(node.value.reference?"":".getValue()")+");";code+=pointerVariable+"++;";code+=interpret(node.body);code+="}";return code},N_FUNCTION_STATEMENT:function(node,interpret,context){var func;context.labelRepository=new LabelRepository;func=interpretFunction(node.args,null,node.body,interpret);return"namespace.defineFunction("+JSON.stringify(node.func)+", "+func+");"},N_FUNCTION_CALL:function(node,interpret){var args=[];util.each(node.args,function(arg){args.push(interpret(arg,{getValue:false}))});return"("+interpret(node.func,{getValue:true,allowBareword:true})+".call(["+args.join(", ")+"], namespaceScope) || tools.valueFactory.createNull())"},N_GOTO_STATEMENT:function(node,interpret,context){var code="",label=node.label;context.labelRepository.addPending(label);code+="goingToLabel_"+label+" = true;";if(context.labelRepository.hasBeenFound(label)){code+=" continue continue_"+label+";"}else{code+=" break "+label+";"}return code},N_IF_STATEMENT:function(node,interpret,context){var alternateCode,code="",conditionCode=interpret(node.condition)+".coerceToBoolean().getNative()",consequentCode,consequentPrefix="",gotosJumpingIn={},labelRepository=context.labelRepository;function onPendingLabel(label){delete gotosJumpingIn[label]}function onFoundLabel(label){gotosJumpingIn[label]=true}labelRepository.on("pending label",onPendingLabel);labelRepository.on("found label",onFoundLabel);consequentCode=interpret(node.consequentStatement);labelRepository.off("pending label",onPendingLabel);labelRepository.off("found label",onFoundLabel);util.each(Object.keys(gotosJumpingIn),function(label){conditionCode="goingToLabel_"+label+" || ("+conditionCode+")"});consequentCode="{"+consequentPrefix+consequentCode+"}";alternateCode=node.alternateStatement?" else "+interpret(node.alternateStatement):"";code+="if ("+conditionCode+") "+consequentCode+alternateCode;return code},N_INCLUDE_EXPRESSION:function(node,interpret){return"tools.include("+interpret(node.path)+".getNative())"},N_INLINE_HTML_STATEMENT:function(node){return"stdout.write("+JSON.stringify(node.html)+");"},N_INSTANCE_PROPERTY_DEFINITION:function(node,interpret){return{name:node.variable.variable,value:node.value?interpret(node.value):"null"}},N_INTEGER:function(node){return"tools.valueFactory.createInteger("+node.number+")"},N_INTERFACE_METHOD_DEFINITION:function(node,interpret){return{name:interpret(node.func),body:"{isStatic: false, abstract: true}"}},N_INTERFACE_STATEMENT:function(node,interpret){var code,constantCodes=[],methodCodes=[],superClass=node.extend?"namespaceScope.getClass("+JSON.stringify(node.extend)+")":"null";util.each(node.members,function(member){var data=interpret(member,{inClass:true});if(member.name==="N_INSTANCE_PROPERTY_DEFINITION"||member.name==="N_STATIC_PROPERTY_DEFINITION"){throw new PHPFatalError(PHPFatalError.INTERFACE_PROPERTY_NOT_ALLOWED)}else if(member.name==="N_METHOD_DEFINITION"||member.name==="N_STATIC_METHOD_DEFINITION"){throw new PHPFatalError(PHPFatalError.INTERFACE_METHOD_BODY_NOT_ALLOWED,{className:node.interfaceName,methodName:member.func||member.method})}else if(member.name==="N_INTERFACE_METHOD_DEFINITION"||member.name==="N_STATIC_INTERFACE_METHOD_DEFINITION"){methodCodes.push('"'+data.name+'": '+data.body)}else if(member.name==="N_CONSTANT_DEFINITION"){constantCodes.push('"'+data.name+'": '+data.value)}});code="{superClass: "+superClass+", staticProperties: {}, properties: {}, methods: {"+methodCodes.join(", ")+"}, constants: {"+constantCodes.join(", ")+"}}";return"(function () {var currentClass = namespace.defineClass("+JSON.stringify(node.interfaceName)+", "+code+", namespaceScope);}());"},N_INTERFACE_STATIC_METHOD_DEFINITION:function(node,interpret){return{name:interpret(node.func),body:"{isStatic: false, abstract: true}"}},N_ISSET:function(node,interpret){var issets=[];util.each(node.variables,function(variable){issets.push(interpret(variable,{getValue:false})+".isSet()")});return"(function (scope) {scope.suppressErrors();"+"var result = tools.valueFactory.createBoolean("+issets.join(" && ")+");"+"scope.unsuppressErrors(); return result;}(scope))"},N_KEY_VALUE_PAIR:function(node,interpret){return"tools.createKeyValuePair("+interpret(node.key)+", "+interpret(node.value)+")"},N_LABEL_STATEMENT:function(node,interpret,context){var label=node.label;context.labelRepository.found(label);return""},N_LIST:function(node,interpret){var elementsCodes=[];util.each(node.elements,function(element){elementsCodes.push(interpret(element,{getValue:false}))});return"tools.createList(["+elementsCodes.join(",")+"])"},N_MAGIC_DIR_CONSTANT:function(){return"tools.getPathDirectory()"},N_MAGIC_FILE_CONSTANT:function(){return"tools.getPath()"},N_MAGIC_LINE_CONSTANT:function(node){return"tools.valueFactory.createInteger("+node.offset.line+")"},N_METHOD_CALL:function(node,interpret){var code="";util.each(node.calls,function(call){var args=[];util.each(call.args,function(arg){args.push(interpret(arg))});code+=".callMethod("+interpret(call.func,{allowBareword:true})+".getNative(), ["+args.join(", ")+"])"});return interpret(node.object,{getValue:true})+code},N_METHOD_DEFINITION:function(node,interpret){return{name:interpret(node.func),body:"{isStatic: false, method: "+interpretFunction(node.args,null,node.body,interpret)+"}"}},N_NAMESPACE_STATEMENT:function(node,interpret){var body="";util.each(hoistDeclarations(node.statements),function(statement){body+=interpret(statement)});return"if (namespaceResult = (function (globalNamespace) {var namespace = globalNamespace.getDescendant("+JSON.stringify(node.namespace)+"), namespaceScope = tools.createNamespaceScope(namespace);"+body+"}(namespace))) { return namespaceResult; }"},N_NEW_EXPRESSION:function(node,interpret){var args=[];util.each(node.args,function(arg){args.push(interpret(arg))});return"tools.createInstance(namespaceScope, "+interpret(node.className,{allowBareword:true})+", ["+args.join(", ")+"])"},N_NULL:function(){return"tools.valueFactory.createNull()"},N_OBJECT_PROPERTY:function(node,interpret,context){var objectVariableCode,propertyCode="",suffix="";if(context.assignment){objectVariableCode="tools.implyObject("+interpret(node.object,{getValue:false})+")"}else{suffix=".getValue()";objectVariableCode=interpret(node.object,{getValue:true})}util.each(node.properties,function(property,index){var nameValue=interpret(property.property,{assignment:false,getValue:false,allowBareword:true});propertyCode+=".getInstancePropertyByName("+nameValue+")";if(index<node.properties.length-1){propertyCode+=".getValue()"}});return objectVariableCode+propertyCode+suffix},N_PRINT_EXPRESSION:function(node,interpret){return"(stdout.write("+interpret(node.operand,{getValue:true})+".coerceToString().getNative()), tools.valueFactory.createInteger(1))"},N_PROGRAM:function(node,interpret,state,stdin,stdout,stderr){var body="",context={labelRepository:new LabelRepository,mainProgram:state.isMainProgram(),path:state.getPath()},labels;try{body+=processBlock(hoistDeclarations(node.statements),interpret,context)}catch(exception){if(exception instanceof PHPError){stderr.write(exception.message);return(new Promise).reject(exception)}}labels=context.labelRepository.getLabels();if(labels.length>0){body="var goingToLabel_"+labels.join(" = false, goingToLabel_")+" = false;"+body}return evaluateModule(state,body,context,stdin,stdout,stderr)},N_REQUIRE_EXPRESSION:function(node,interpret){return"tools.require("+interpret(node.path)+".getNative())"},N_REQUIRE_ONCE_EXPRESSION:function(node,interpret){return"tools.requireOnce("+interpret(node.path)+".getNative())"},N_RETURN_STATEMENT:function(node,interpret){var expression=interpret(node.expression);return"return "+(expression?expression:"tools.valueFactory.createNull()")+";"},N_SELF:function(node,interpret,context){if(context.inClass){return"tools.valueFactory.createString(currentClass.getUnprefixedName())"}return"tools.throwNoActiveClassScope()"},N_STATIC_METHOD_CALL:function(node,interpret){var args=[];util.each(node.args,function(arg){args.push(interpret(arg))});return interpret(node.className,{allowBareword:true})+".callStaticMethod("+interpret(node.method,{allowBareword:true})+", ["+args.join(", ")+"], namespaceScope)"},N_STATIC_METHOD_DEFINITION:function(node,interpret){return{name:interpret(node.method),body:"{isStatic: true, method: "+interpretFunction(node.args,null,node.body,interpret)+"}"}},N_STATIC_PROPERTY:function(node,interpret,context){var classVariableCode=interpret(node.className,{getValue:true,allowBareword:true}),propertyCode=".getStaticPropertyByName("+interpret(node.property,{assignment:false,getValue:true,allowBareword:true})+", namespaceScope)",suffix="";if(!context.assignment){suffix=".getValue()"}return classVariableCode+propertyCode+suffix},N_STATIC_PROPERTY_DEFINITION:function(node,interpret){return{name:node.variable.variable,visibility:JSON.stringify(node.visibility),value:node.value?interpret(node.value):"tools.valueFactory.createNull()"}},N_STRING:function(node,interpret,context){if(context.allowBareword){return"tools.valueFactory.createBarewordString("+JSON.stringify(node.string)+")"}return"namespaceScope.getConstant("+JSON.stringify(node.string)+")"},N_STRING_EXPRESSION:function(node,interpret){var codes=[];util.each(node.parts,function(part){codes.push(interpret(part)+".coerceToString().getNative()")});return"tools.valueFactory.createString("+codes.join(" + ")+")"},N_STRING_LITERAL:function(node){return"tools.valueFactory.createString("+JSON.stringify(node.string)+")"},N_SWITCH_STATEMENT:function(node,interpret,context){var code="",expressionCode=interpret(node.expression),switchCase={depth:context.switchCase?context.switchCase.depth+1:0},subContext={switchCase:switchCase};code+="var switchExpression_"+switchCase.depth+" = "+expressionCode+","+" switchMatched_"+switchCase.depth+" = false;";util.each(node.cases,function(caseNode){code+=interpret(caseNode,subContext)});return"switch_"+switchCase.depth+": {"+code+"}"},N_TERNARY:function(node,interpret){var expression="("+interpret(node.condition)+")";util.each(node.options,function(option){expression="("+expression+".coerceToBoolean().getNative() ? "+interpret(option.consequent)+" : "+interpret(option.alternate)+")"});return expression},N_THROW_STATEMENT:function(node,interpret){return"throw "+interpret(node.expression)+";"},N_UNARY_EXPRESSION:function(node,interpret){var operator=node.operator,operand=interpret(node.operand,{getValue:operator!=="++"&&operator!=="--"});return operand+"."+unaryOperatorToMethod[node.prefix?"prefix":"suffix"][operator]+"()"},N_USE_STATEMENT:function(node){var code="";util.each(node.uses,function(use){if(use.alias){code+="namespaceScope.use("+JSON.stringify(use.source)+", "+JSON.stringify(use.alias)+");"}else{code+="namespaceScope.use("+JSON.stringify(use.source)+");"}});return code},N_VARIABLE:function(node,interpret,context){return'scope.getVariable("'+node.variable+'")'+(context.getValue!==false?".getValue()":"")},N_VARIABLE_EXPRESSION:function(node,interpret,context){return"scope.getVariable("+interpret(node.expression)+".getNative())"+(context.getValue!==false?".getValue()":"")},N_VOID:function(){return"tools.referenceFactory.createNull()"},N_WHILE_STATEMENT:function(node,interpret,context){var code="";context.labelRepository.on("found label",function(){throw new PHPFatalError(PHPFatalError.GOTO_DISALLOWED)});util.each(node.statements,function(statement){code+=interpret(statement)});return"while ("+interpret(node.condition)+".coerceToBoolean().getNative()) {"+code+"}"}}}})()},{"./../../js/Exception/Exception":8,"./../../js/Promise":13,"./../../js/util":55,"./interpreter/Call":60,"./interpreter/Environment":64,"./interpreter/Error":65,"./interpreter/Error/Fatal":66,"./interpreter/KeyValuePair":68,"./interpreter/LabelRepository":69,"./interpreter/List":70,"./interpreter/NamespaceScope":72,"./interpreter/Scope":79,"./interpreter/State":80,"./interpreter/Value/Object":88}],60:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util");function Call(scope){this.scope=scope}util.extend(Call.prototype,{getScope:function(){return this.scope}});module.exports=Call})()},{"./../../../js/util":55}],61:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),PHPError=require("./Error");function CallStack(stderr){this.calls=[];this.stderr=stderr}util.extend(CallStack.prototype,{getCurrent:function(){var chain=this;return chain.calls[chain.calls.length-1]},pop:function(){this.calls.pop()},push:function(call){this.calls.push(call)},raiseError:function(level,message){var call,chain=this,calls=chain.calls,error,index=0;for(index=calls.length-1;index>=0;--index){call=calls[index];if(call.getScope().suppressesErrors()){return}}error=new PHPError(level,message);chain.stderr.write(error.getMessage()+"\n")}});module.exports=CallStack})()},{"./../../../js/util":55,"./Error":65}],62:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),PHPError=require("./Error"),PHPFatalError=require("./Error/Fatal"),StaticPropertyReference=require("./Reference/StaticProperty");var IS_STATIC="isStatic",VALUE="value",VISIBILITY="visibility",hasOwn={}.hasOwnProperty;function Class(valueFactory,callStack,name,constructorName,InternalClass,staticPropertiesData,constants,superClass,interfaceNames,namespaceScope){var classObject=this,staticProperties={};this.callStack=callStack;this.constants=constants;this.constructorName=constructorName;this.interfaceNames=interfaceNames||[];this.InternalClass=InternalClass;this.name=name;this.namespaceScope=namespaceScope;this.staticProperties=staticProperties;this.superClass=superClass;this.valueFactory=valueFactory;util.each(staticPropertiesData,function(data,name){staticProperties[name]=new StaticPropertyReference(classObject,name,data[VISIBILITY],data[VALUE])})}util.extend(Class.prototype,{callStaticMethod:function(name,args){var classObject=this,defined=true,method,prototype=classObject.InternalClass.prototype,otherPrototype;if(!hasOwn.call(prototype,name)){otherPrototype=prototype;do{otherPrototype=Object.getPrototypeOf(otherPrototype);if(!otherPrototype||otherPrototype===Object.prototype){defined=false;break}}while(!hasOwn.call(otherPrototype,name))}method=prototype[name];if(!defined||!util.isFunction(method)){throw new PHPFatalError(PHPFatalError.CALL_TO_UNDEFINED_METHOD,{className:classObject.name,methodName:name})}if(!method[IS_STATIC]){classObject.callStack.raiseError(PHPError.E_STRICT,"Non-static method "+method.data.classObject.name+"::"+name+"() should not be called statically")}return classObject.valueFactory.coerce(method.apply(null,args))},"extends":function(superClass){var classObject=this;return classObject.superClass&&(classObject.superClass.name===superClass.name||classObject.superClass.extends(superClass))},getConstantByName:function(name){var classObject=this,i,interfaceObject;if(hasOwn.call(classObject.constants,name)){return classObject.constants[name]()}if(classObject.superClass){return classObject.superClass.getConstantByName(name)}for(i=0;i<classObject.interfaceNames.length;i++){interfaceObject=classObject.namespaceScope.getClass(classObject.interfaceNames[i]);try{return interfaceObject.getConstantByName(name)}catch(e){}}throw new PHPFatalError(PHPFatalError.UNDEFINED_CLASS_CONSTANT,{name:name})},getInternalClass:function(){return this.InternalClass},getName:function(){return this.name},getUnprefixedName:function(){return this.name.replace(/^.*\\/,"")},getStaticPropertyByName:function(name){var classObject=this,currentClass,staticProperty;if(!hasOwn.call(classObject.staticProperties,name)){throw new PHPFatalError(PHPFatalError.UNDECLARED_STATIC_PROPERTY,{className:classObject.name,propertyName:name})}staticProperty=classObject.staticProperties[name];if(staticProperty.getVisibility()==="private"){currentClass=classObject.callStack.getCurrent().getScope().getCurrentClass();if(!currentClass||currentClass.name!==classObject.name){throw new PHPFatalError(PHPFatalError.CANNOT_ACCESS_PROPERTY,{className:classObject.name,propertyName:name,visibility:"private"})}}else if(staticProperty.getVisibility()==="protected"){currentClass=classObject.callStack.getCurrent().getScope().getCurrentClass();if(!currentClass||classObject.name!==currentClass.name&&!currentClass.extends(classObject)){throw new PHPFatalError(PHPFatalError.CANNOT_ACCESS_PROPERTY,{className:classObject.name,propertyName:name,visibility:"protected"})}}return staticProperty},hasStaticPropertyByName:function(name){return hasOwn.call(this.staticProperties,name)},instantiate:function(args){var classObject=this,nativeObject=new classObject.InternalClass,objectValue=classObject.valueFactory.createObject(nativeObject,classObject);if(classObject.constructorName){objectValue.callMethod(classObject.constructorName,args)}return objectValue}});module.exports=Class})()},{"./../../../js/util":55,"./Error":65,"./Error/Fatal":66,"./Reference/StaticProperty":76}],63:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util");var MAGIC_AUTOLOAD_FUNCTION="__autoload";function ClassAutoloader(valueFactory){this.globalNamespace=null;this.splStack=null;this.valueFactory=valueFactory}util.extend(ClassAutoloader.prototype,{appendAutoloadCallable:function(autoloadCallable){var autoloader=this,splStack=autoloader.splStack;if(!splStack){splStack=[];autoloader.splStack=splStack}splStack.push(autoloadCallable)},autoloadClass:function(name){var autoloader=this,globalNamespace=autoloader.globalNamespace,magicAutoloadFunction,splStack=autoloader.splStack;if(splStack){util.each(splStack,function(autoloadCallable){autoloadCallable.call([autoloader.valueFactory.createString(name)],globalNamespace)})}else{magicAutoloadFunction=globalNamespace.getOwnFunction(MAGIC_AUTOLOAD_FUNCTION);if(magicAutoloadFunction){magicAutoloadFunction(autoloader.valueFactory.createString(name))}}},setGlobalNamespace:function(globalNamespace){this.globalNamespace=globalNamespace}});module.exports=ClassAutoloader})()},{"./../../../js/util":55}],64:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util");function PHPEnvironment(state){this.state=state}util.extend(PHPEnvironment.prototype,{getGlobalScope:function(){return this.state.getGlobalScope()}});module.exports=PHPEnvironment})()},{"./../../../js/util":55}],65:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),Exception=require("./../../../js/Exception/Exception");function PHPError(level,message){Exception.call(this,"PHP "+level+": "+message)}util.inherit(PHPError).from(Exception);util.extend(PHPError,{E_ERROR:"Error",E_FATAL:"Fatal error",E_NOTICE:"Notice",E_PARSE:"Parse error",E_STRICT:"Strict standards",E_WARNING:"Warning"});module.exports=PHPError})()},{"./../../../js/Exception/Exception":8,"./../../../js/util":55}],66:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),PHPError=require("../Error");var MESSAGE_PREFIXES={1:"Unsupported operand types",2:"Call to undefined function ${name}()",3:"Class '${name}' not found",4:"Call to undefined method ${className}::${methodName}()",5:"'goto' into loop or switch statement is disallowed",6:"${name}() must take exactly 1 argument",7:"Class name must be a valid object or a string",8:"Access to undeclared static property: ${className}::$${propertyName}",9:"Call to undefined method ${className}::${methodName}()",10:"Cannot access self:: when no class scope is active",11:"Undefined constant '${name}'",12:"Uncaught exception '${name}'",13:"Cannot access ${visibility} property ${className}::$${propertyName}",14:"Function name must be a string",15:"Undefined class constant '${name}'",16:"Interfaces may not include member variables",17:"Interface function ${className}::${methodName}() cannot contain body",18:"Cannot use ${source} as ${alias} because the name is already in use",19:"Call to a member function ${name}() on a non-object"};function PHPFatalError(code,variables){PHPError.call(this,PHPError.E_FATAL,util.stringTemplate(MESSAGE_PREFIXES[code],variables))}util.inherit(PHPFatalError).from(PHPError);util.extend(PHPFatalError,{UNSUPPORTED_OPERAND_TYPES:1,CALL_TO_UNDEFINED_FUNCTION:2,CLASS_NOT_FOUND:3,UNDEFINED_METHOD:4,GOTO_DISALLOWED:5,EXPECT_EXACTLY_1_ARG:6,CLASS_NAME_NOT_VALID:7,UNDECLARED_STATIC_PROPERTY:8,CALL_TO_UNDEFINED_METHOD:9,SELF_WHEN_NO_ACTIVE_CLASS:10,UNDEFINED_CONSTANT:11,UNCAUGHT_EXCEPTION:12,CANNOT_ACCESS_PROPERTY:13,FUNCTION_NAME_MUST_BE_STRING:14,UNDEFINED_CLASS_CONSTANT:15,INTERFACE_PROPERTY_NOT_ALLOWED:16,INTERFACE_METHOD_BODY_NOT_ALLOWED:17,NAME_ALREADY_IN_USE:18,NON_OBJECT_METHOD_CALL:19});module.exports=PHPFatalError})()},{"../Error":65,"./../../../../js/util":55}],67:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),PHPError=require("../Error");var MESSAGE_PREFIXES={1:"syntax error, unexpected ${what} in ${file} on line ${line}"};function PHPParseError(code,variables){PHPError.call(this,PHPError.E_PARSE,util.stringTemplate(MESSAGE_PREFIXES[code],variables))}util.inherit(PHPParseError).from(PHPError);util.extend(PHPParseError,{SYNTAX_UNEXPECTED:1});module.exports=PHPParseError})()},{"../Error":65,"./../../../../js/util":55}],68:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util");function KeyValuePair(key,value){this.key=key;this.value=value}util.extend(KeyValuePair.prototype,{getKey:function(){return this.key},getValue:function(){return this.value}});module.exports=KeyValuePair})()},{"./../../../js/util":55}],69:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),EventEmitter=require("./../../../js/EventEmitter");function LabelRepository(){EventEmitter.call(this);this.foundLabels={};this.labels={};this.pendingLabels={}}util.inherit(LabelRepository).from(EventEmitter);util.extend(LabelRepository.prototype,{addPending:function(label){var repository=this;repository.labels[label]=true;repository.pendingLabels[label]=true;repository.emit("pending label",label)},found:function(label){var repository=this;repository.foundLabels[label]=true;repository.labels[label]=true;delete repository.pendingLabels[label];repository.emit("found label",label)},getLabels:function(){return Object.keys(this.labels)},hasBeenFound:function(label){var repository=this;return repository.foundLabels[label]===true},hasPending:function(){return Object.keys(this.pendingLabels).length>0},isPending:function(label){return this.pendingLabels[label]===true}});module.exports=LabelRepository})()},{"./../../../js/EventEmitter":7,"./../../../js/util":55}],70:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util");function List(elements){this.elements=elements}util.extend(List.prototype,{setValue:function(value){var listElements=this.elements;if(value.getType()!=="array"){throw new Error("Unsupported")}util.each(listElements,function(reference,index){reference.setValue(value.getElementByIndex(index).getValue())});return value}});module.exports=List})()},{"./../../../js/util":55}],71:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),Class=require("./Class"),PHPError=require("./Error"),PHPFatalError=require("./Error/Fatal");var IS_STATIC="isStatic",hasOwn={}.hasOwnProperty;function Namespace(callStack,valueFactory,classAutoloader,parent,name){this.callStack=callStack;this.children={};this.classAutoloader=classAutoloader;this.classes={};this.constants={};this.functions={};this.name=name;this.parent=parent;this.valueFactory=valueFactory}util.extend(Namespace.prototype,{defineClass:function(name,definition,namespaceScope){var classObject,constants,constructorName=null,methodData={},namespace=this,staticProperties,InternalClass;if(util.isFunction(definition)){InternalClass=definition}else{InternalClass=function(){var instance=this;if(definition.superClass){definition.superClass.getInternalClass().call(this)}util.each(definition.properties,function(value,name){instance[name]=value})};delete InternalClass.prototype.constructor;if(definition.superClass){InternalClass.prototype=Object.create(definition.superClass.getInternalClass().prototype)}util.each(definition.methods,function(data,methodName){if(methodName==="__construct"){if(constructorName){namespace.callStack.raiseError(PHPError.E_STRICT,"Redefining already defined constructor for class "+name)}constructorName=methodName}if(!constructorName&&methodName===name){constructorName=methodName}data.method[IS_STATIC]=data[IS_STATIC];data.method.data=methodData;InternalClass.prototype[methodName]=data.method});staticProperties=definition.staticProperties;constants=definition.constants}classObject=new Class(namespace.valueFactory,namespace.callStack,namespace.getPrefix()+name,constructorName,InternalClass,staticProperties,constants,definition.superClass,definition.interfaces,namespaceScope);methodData.classObject=classObject;namespace.classes[name.toLowerCase()]=classObject;return classObject},defineConstant:function(name,value,options){var caseInsensitive;options=options||{};caseInsensitive=options.caseInsensitive;if(caseInsensitive){name=name.toLowerCase()}this.constants[name]={caseInsensitive:caseInsensitive,value:value}},defineFunction:function(name,func){var namespace=this;if(namespace.name===""){if(/__autoload/i.test(name)&&func.length!==1){throw new PHPFatalError(PHPFatalError.EXPECT_EXACTLY_1_ARG,{name:name.toLowerCase()})}}namespace.functions[name]=func},getClass:function(name){var lowerName=name.toLowerCase(),match=name.match(/^(.*?)\\([^\\]+)$/),namespace=this,path,subNamespace;if(match){path=match[1];name=match[2];subNamespace=namespace.getDescendant(path);return subNamespace.getClass(name)}if(!hasOwn.call(namespace.classes,lowerName)){namespace.classAutoloader.autoloadClass(namespace.getPrefix()+name);if(!hasOwn.call(namespace.classes,lowerName)){throw new PHPFatalError(PHPFatalError.CLASS_NOT_FOUND,{name:namespace.getPrefix()+name})}}return namespace.classes[lowerName]},getConstant:function(name,usesNamespace){var lowercaseName,namespace=this;if(!hasOwn.call(namespace.constants,name)){lowercaseName=name.toLowerCase();if(!hasOwn.call(namespace.constants,lowercaseName)||!namespace.constants[lowercaseName].caseInsensitive){if(usesNamespace){throw new PHPFatalError(PHPFatalError.UNDEFINED_CONSTANT,{name:namespace.getPrefix()+name})}else{namespace.callStack.raiseError(PHPError.E_NOTICE,"Use of undefined constant "+name+" - assumed '"+name+"'");return this.valueFactory.createString(name)}}name=lowercaseName}return namespace.constants[name].value},getDescendant:function(name){var namespace=this;util.each(name.split("\\"),function(part){if(!hasOwn.call(namespace.children,part)){namespace.children[part]=new Namespace(namespace.callStack,namespace.valueFactory,namespace.classAutoloader,namespace,part)}namespace=namespace.children[part]});return namespace},getFunction:function(name){var globalNamespace,match,namespace=this,path,subNamespace;if(util.isFunction(name)){return name}match=name.match(/^(.*?)\\([^\\]+)$/);if(match){path=match[1];name=match[2];subNamespace=namespace.getDescendant(path);return subNamespace.getFunction(name)}if(hasOwn.call(namespace.functions,name)){return namespace.functions[name]}globalNamespace=namespace.getGlobal();if(hasOwn.call(globalNamespace.functions,name)){return globalNamespace.functions[name]}throw new PHPFatalError(PHPFatalError.CALL_TO_UNDEFINED_FUNCTION,{name:namespace.getPrefix()+name})},getGlobal:function(){var namespace=this;return namespace.name===""?namespace:namespace.getParent().getGlobal()},getGlobalNamespace:function(){return this.getGlobal()},getOwnFunction:function(name){var namespace=this;if(hasOwn.call(namespace.functions,name)){return namespace.functions[name]}return null},getParent:function(){return this.parent},getPrefix:function(){var namespace=this;if(namespace.name===""){return""}return(namespace.parent?namespace.parent.getPrefix():"")+namespace.name+"\\"}});module.exports=Namespace})()},{"./../../../js/util":55,"./Class":62,"./Error":65,"./Error/Fatal":66}],72:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),PHPFatalError=require("./Error/Fatal");var hasOwn={}.hasOwnProperty;function NamespaceScope(globalNamespace,namespace){this.globalNamespace=globalNamespace;this.imports={};this.namespace=namespace}util.extend(NamespaceScope.prototype,{getClass:function(name){var match,scope=this,namespace=scope.namespace,path,prefix;if(hasOwn.call(scope.imports,name)){name=scope.imports[name];namespace=scope.globalNamespace}if(name.charAt(0)==="\\"){match=name.match(/^\\(.*?)\\([^\\]+)$/);if(match){path=match[1];name=match[2];namespace=scope.globalNamespace.getDescendant(path)}else{name=name.substr(1)}}else{match=name.match(/^([^\\]+)(.*?)\\([^\\]+)$/);if(match){prefix=match[1];path=match[2];if(hasOwn.call(scope.imports,prefix)){namespace=scope.globalNamespace.getDescendant(scope.imports[prefix].substr(1)+path);name=match[3]}}}return namespace.getClass(name)},getConstant:function(name){var match,scope=this,namespace=scope.namespace,path,prefix,usesNamespace;if(name.charAt(0)==="\\"){usesNamespace=true;match=name.match(/^\\(.*?)\\([^\\]+)$/);if(match){path=match[1];name=match[2];namespace=scope.globalNamespace.getDescendant(path)}else{name=name.substr(1)}}else{match=name.match(/^([^\\]+)(.*?)\\([^\\]+)$/);if(match){usesNamespace=true;prefix=match[1];path=match[2];name=match[3];if(hasOwn.call(scope.imports,prefix)){namespace=scope.globalNamespace.getDescendant(scope.imports[prefix].substr(1)+path)}else{namespace=scope.globalNamespace.getDescendant(namespace.getPrefix()+prefix+path)}}}return namespace.getConstant(name,usesNamespace)},getFunction:function(name){var match,scope=this,namespace=scope.namespace,path,prefix;if(name.charAt(0)==="\\"){match=name.match(/^\\(.*?)\\([^\\]+)$/);if(match){path=match[1];name=match[2];namespace=scope.globalNamespace.getDescendant(path)}else{name=name.substr(1)}}else{match=name.match(/^([^\\]+)(.*?)\\([^\\]+)$/);if(match){prefix=match[1];path=match[2];name=match[3];if(hasOwn.call(scope.imports,prefix)){namespace=scope.globalNamespace.getDescendant(scope.imports[prefix].substr(1)+path)}else{namespace=scope.globalNamespace.getDescendant(namespace.getPrefix()+prefix+path)}}}return namespace.getFunction(name)},getGlobalNamespace:function(){return this.globalNamespace},use:function(source,alias){var scope=this,normalizedSource=source;if(!alias){alias=source.replace(/^.*?([^\\]+)$/,"$1")}if(normalizedSource.charAt(0)!=="\\"){normalizedSource="\\"+normalizedSource}if(scope.imports[alias]){throw new PHPFatalError(PHPFatalError.NAME_ALREADY_IN_USE,{alias:alias,source:source})}scope.imports[alias]=normalizedSource}});module.exports=NamespaceScope})()},{"./../../../js/util":55,"./Error/Fatal":66}],73:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),PHPError=require("../Error");function ElementReference(valueFactory,callStack,arrayValue,key,value){
this.arrayValue=arrayValue;this.key=key;this.reference=null;this.callStack=callStack;this.value=value;this.valueFactory=valueFactory}util.extend(ElementReference.prototype,{clone:function(){var element=this;return new ElementReference(element.valueFactory,element.callStack,element.arrayValue,element.key,element.value)},getKey:function(){return this.key},getValue:function(){var element=this;if(!element.value&&!element.reference){element.callStack.raiseError(PHPError.E_NOTICE,"Undefined "+element.arrayValue.referToElement(element.key.getNative()));return element.valueFactory.createNull()}return element.value?element.value:element.reference.getValue()},isDefined:function(){var element=this;return element.value||element.reference},isReference:function(){return!!this.reference},setReference:function(reference){var element=this;element.reference=reference;element.value=null},setValue:function(value){var element=this,isFirstElement=element.arrayValue.getLength()===0;if(element.reference){element.reference.setValue(value)}else{element.value=value.getForAssignment()}if(isFirstElement){element.arrayValue.setPointer(element.arrayValue.getKeys().indexOf(element.key.getNative().toString()))}}});module.exports=ElementReference})()},{"../Error":65,"./../../../../js/util":55}],74:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util");function NullReference(valueFactory,options){options=options||{};this.onSet=options.onSet;this.valueFactory=valueFactory}util.extend(NullReference.prototype,{getValue:function(){return this.valueFactory.createNull()},setValue:function(){var reference=this;if(reference.onSet){reference.onSet()}}});module.exports=NullReference})()},{"./../../../../js/util":55}],75:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),PHPError=require("../Error");var hasOwn={}.hasOwnProperty;function PropertyReference(valueFactory,callStack,objectValue,key){this.objectValue=objectValue;this.key=key;this.reference=null;this.callStack=callStack;this.valueFactory=valueFactory}util.extend(PropertyReference.prototype,{clone:function(){var property=this;return new PropertyReference(property.valueFactory,property.callStack,property.objectValue,property.key)},getKey:function(){return this.key},getValue:function(){var property=this,nativeObject=property.objectValue.getNative(),nativeKey=property.key.getNative();if(!property.isDefined()){property.callStack.raiseError(PHPError.E_NOTICE,"Undefined "+property.objectValue.referToElement(nativeKey));return property.valueFactory.createNull()}return property.reference?property.reference.getValue():property.valueFactory.coerce(nativeObject[nativeKey])},isDefined:function(){var defined=true,otherObject,property=this,nativeObject=property.objectValue.getNative(),nativeKey=property.key.getNative();if(property.reference){return true}if(!hasOwn.call(nativeObject,nativeKey)){otherObject=nativeObject;do{otherObject=Object.getPrototypeOf(otherObject);if(!otherObject||otherObject===Object.prototype){defined=false;break}}while(!hasOwn.call(otherObject,nativeKey))}return defined},isReference:function(){return!!this.reference},setReference:function(reference){var property=this;property.reference=reference},setValue:function(value){var property=this,nativeObject=property.objectValue.getNative(),nativeKey=property.key.getNative(),isFirstProperty=property.objectValue.getLength()===0;if(property.reference){property.reference.setValue(value)}else{nativeObject[nativeKey]=value.getForAssignment()}if(isFirstProperty){property.objectValue.setPointer(property.objectValue.getKeys().indexOf(property.key.getNative().toString()))}}});module.exports=PropertyReference})()},{"../Error":65,"./../../../../js/util":55}],76:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util");function StaticPropertyReference(classObject,name,visibility,value){this.classObject=classObject;this.name=name;this.reference=null;this.value=value;this.visibility=visibility}util.extend(StaticPropertyReference.prototype,{getName:function(){return this.name},getValue:function(){var property=this;return property.value?property.value:property.reference.getValue()},getVisibility:function(){return this.visibility},isReference:function(){return!!this.reference},setReference:function(reference){var property=this;property.reference=reference;property.value=null},setValue:function(value){var property=this;if(property.reference){property.reference.setValue(value)}else{property.value=value.getForAssignment()}}});module.exports=StaticPropertyReference})()},{"./../../../../js/util":55}],77:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util");function VariableReference(variable){this.variable=variable}util.extend(VariableReference.prototype,{getValue:function(){return this.variable.getValue()},setValue:function(value){this.variable.setValue(value)}});module.exports=VariableReference})()},{"./../../../../js/util":55}],78:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),NullReference=require("./Reference/Null");function ReferenceFactory(valueFactory){this.valueFactory=valueFactory}util.extend(ReferenceFactory.prototype,{createNull:function(){return new NullReference(this.valueFactory)}});module.exports=ReferenceFactory})()},{"./../../../js/util":55,"./Reference/Null":74}],79:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),Variable=require("./Variable");var hasOwn={}.hasOwnProperty;function Scope(callStack,valueFactory,thisObject,currentClass){var thisObjectVariable;this.currentClass=currentClass;this.errorsSuppressed=false;this.callStack=callStack;this.thisObject=thisObject;this.valueFactory=valueFactory;this.variables={};if(thisObject){thisObjectVariable=new Variable(callStack,valueFactory,"this");thisObjectVariable.setValue(thisObject);this.variables["this"]=thisObjectVariable}}util.extend(Scope.prototype,{defineVariable:function(name){var scope=this,variable=new Variable(scope.callStack,scope.valueFactory,name);scope.variables[name]=variable;return variable},defineVariables:function(names){var scope=this;util.each(names,function(name){scope.defineVariable(name)})},expose:function(object,name){var scope=this,valueFactory=scope.valueFactory;scope.defineVariable(name).setValue(valueFactory.coerce(object))},getCurrentClass:function(){return this.currentClass},getThisObject:function(){return this.thisObject},getVariable:function(name){var scope=this;if(!hasOwn.call(scope.variables,name)){scope.variables[name]=new Variable(scope.callStack,scope.valueFactory,name)}return scope.variables[name]},suppressErrors:function(){this.errorsSuppressed=true},suppressesErrors:function(){return this.errorsSuppressed},unsuppressErrors:function(){this.errorsSuppressed=false}});module.exports=Scope})()},{"./../../../js/util":55,"./Variable":91}],80:[function(require,module,exports){(function(){"use strict";var builtinTypes=require("./builtin/builtins"),phpUtil=require("../util"),util=require("./../../../js/util"),CallStack=require("./CallStack"),ClassAutoloader=require("./ClassAutoloader"),Namespace=require("./Namespace"),ReferenceFactory=require("./ReferenceFactory"),Resumable=require("./../../../js/Resumable/Resumable"),ResumableTranspiler=require("./../../../js/Resumable/Transpiler"),Scope=require("./Scope"),ValueFactory=require("./ValueFactory");var EXCEPTION_CLASS="Exception";function PHPState(stdout,stderr,engine,options){var callStack=new CallStack(stderr),valueFactory=new ValueFactory(callStack),classAutoloader=new ClassAutoloader(valueFactory),globalNamespace=new Namespace(callStack,valueFactory,classAutoloader,null,"");classAutoloader.setGlobalNamespace(globalNamespace);valueFactory.setGlobalNamespace(globalNamespace);this.callStack=callStack;this.engine=engine;this.globalNamespace=globalNamespace;this.globalScope=new Scope(callStack,valueFactory,null,null);this.options=options;this.path=null;this.referenceFactory=new ReferenceFactory(valueFactory);this.callStack=callStack;this.classAutoloader=classAutoloader;this.resumable=new Resumable(new ResumableTranspiler);this.stdout=stdout;this.valueFactory=valueFactory;this.PHPException=null;setUpState(this)}util.extend(PHPState.prototype,{getCallStack:function(){return this.callStack},getEngine:function(){return this.engine},getGlobalNamespace:function(){return this.globalNamespace},getGlobalScope:function(){return this.globalScope},getOptions:function(){return this.options},getPath:function(){return phpUtil.normalizeModulePath(this.path)},getPHPExceptionClass:function(){return this.PHPException},getReferenceFactory:function(){return this.referenceFactory},getResumable:function(){return this.resumable},getValueFactory:function(){return this.valueFactory},isMainProgram:function(){return this.path===null},setPath:function(path){this.path=path}});function setUpState(state){var globalNamespace=state.globalNamespace,internals={callStack:state.callStack,classAutoloader:state.classAutoloader,globalNamespace:globalNamespace,resumable:state.resumable,stdout:state.stdout,valueFactory:state.valueFactory};util.each(builtinTypes.functionGroups,function(groupFactory){var groupBuiltins=groupFactory(internals);util.each(groupBuiltins,function(fn,name){globalNamespace.defineFunction(name,fn)})});util.each(builtinTypes.classes,function(classFactory,name){var Class=classFactory(internals);if(name===EXCEPTION_CLASS){state.PHPException=Class}globalNamespace.defineClass(name,Class)})}module.exports=PHPState})()},{"../util":103,"./../../../js/Resumable/Resumable":31,"./../../../js/Resumable/Transpiler":49,"./../../../js/util":55,"./CallStack":61,"./ClassAutoloader":63,"./Namespace":71,"./ReferenceFactory":78,"./Scope":79,"./ValueFactory":90,"./builtin/builtins":92}],81:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),NullReference=require("./Reference/Null"),PHPError=require("./Error"),PHPFatalError=require("./Error/Fatal");function Value(factory,callStack,type,value){this.factory=factory;this.callStack=callStack;this.type=type;this.value=value}util.extend(Value.prototype,{addToArray:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},addToFloat:function(floatValue){var leftValue=this;return leftValue.factory.createFloat(leftValue.coerceToFloat().getNative()+floatValue.getNative())},addToString:function(stringValue){return stringValue.coerceToNumber().add(this.coerceToNumber())},callMethod:function(name){throw new PHPFatalError(PHPFatalError.NON_OBJECT_METHOD_CALL,{name:name})},callStaticMethod:function(){throw new PHPFatalError(PHPFatalError.CLASS_NAME_NOT_VALID)},coerceToArray:function(){var value=this;return value.factory.createArray([value])},coerceToFloat:function(){var value=this;return value.factory.createFloat(Number(value.value))},concat:function(rightValue){var leftValue=this;return leftValue.factory.createString(leftValue.coerceToString().getNative()+rightValue.coerceToString().getNative())},getConstantByName:function(){throw new PHPFatalError(PHPFatalError.CLASS_NAME_NOT_VALID)},getElementByKey:function(){var callStack=this.callStack;return new NullReference(this.factory,{onSet:function(){callStack.raiseError(PHPError.E_WARNING,"Cannot use a scalar value as an array")}})},getForAssignment:function(){return this},getInstancePropertyByName:function(){throw new Error("Unimplemented")},getLength:function(){return this.coerceToString().getLength()},getNative:function(){return this.value},getStaticPropertyByName:function(){throw new PHPFatalError(PHPFatalError.CLASS_NAME_NOT_VALID)},getType:function(){return this.type},getValue:function(){return this},isEqualTo:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(rightValue.value==leftValue.value)},isEqualToArray:function(rightValue){return this.isEqualTo(rightValue)},isEqualToFloat:function(rightValue){return this.isEqualTo(rightValue)},isEqualToInteger:function(rightValue){return this.isEqualTo(rightValue)},isEqualToNull:function(rightValue){return this.isEqualTo(rightValue)},isEqualToObject:function(rightValue){return this.isEqualTo(rightValue)},isIdenticalTo:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(rightValue.type===leftValue.type&&rightValue.value===leftValue.value)},isIdenticalToArray:function(rightValue){return this.isIdenticalTo(rightValue)},isIdenticalToObject:function(rightValue){return this.isIdenticalTo(rightValue)},isNotEqualTo:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(!leftValue.isEqualTo(rightValue).getNative())},isNotIdenticalTo:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(!leftValue.isIdenticalTo(rightValue).getNative())},isSet:function(){return true},logicalAnd:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(leftValue.coerceToBoolean().getNative()&&rightValue.coerceToBoolean().getNative())},logicalNot:function(){var value=this;return value.factory.createBoolean(!value.coerceToBoolean().getNative())},toValue:function(){return this},unwrapForJS:function(){return this.getNative()}});module.exports=Value})()},{"./../../../js/util":55,"./Error":65,"./Error/Fatal":66,"./Reference/Null":74}],82:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),ElementReference=require("../Reference/Element"),KeyValuePair=require("../KeyValuePair"),NullReference=require("../Reference/Null"),PHPError=require("../Error"),PHPFatalError=require("../Error/Fatal"),Value=require("../Value"),Variable=require("../Variable");var hasOwn={}.hasOwnProperty;function ArrayValue(factory,callStack,orderedElements,type){var elements=[],keysToElements=[],value=this;util.each(orderedElements,function(element,key){if(element instanceof KeyValuePair){key=element.getKey();element=element.getValue()}else{if(util.isNumber(key)){key=factory.createInteger(keysToElements.length)}else{key=factory.createFromNative(key)}if(element instanceof Variable){element=element.getValue()}else{element=factory.coerce(element)}}element=new ElementReference(factory,callStack,value,key,element);elements.push(element);keysToElements[key.getNative()]=element});Value.call(this,factory,callStack,type||"array",elements);this.keysToElements=keysToElements;this.pointer=0}util.inherit(ArrayValue).from(Value);util.extend(ArrayValue.prototype,{add:function(rightValue){return rightValue.addToArray(this)},addToArray:function(leftValue){var rightValue=this,resultArray=leftValue.clone();util.each(rightValue.keysToElements,function(element,key){if(!hasOwn.call(resultArray.keysToElements,key)){resultArray.getElementByKey(element.getKey()).setValue(element.getValue())}},{keys:true});return resultArray},addToBoolean:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},addToFloat:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},addToInteger:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},addToNull:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},addToObject:function(objectValue){return objectValue.addToArray(this)},addToString:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},call:function(args,namespaceOrNamespaceScope){var value=this.value;if(value.length<2){throw new PHPFatalError(PHPFatalError.FUNCTION_NAME_MUST_BE_STRING)}return value[0].getValue().callMethod(value[1].getValue().getNative(),args,namespaceOrNamespaceScope)},clone:function(){var arrayValue=this,orderedElements=[];util.each(arrayValue.value,function(element){if(element.isDefined()){orderedElements.push(new KeyValuePair(element.getKey(),element.getValue()))}});return new ArrayValue(arrayValue.factory,arrayValue.callStack,orderedElements,arrayValue.type)},coerceToArray:function(){return this},coerceToBoolean:function(){var value=this;return value.factory.createBoolean(value.value.length>0)},coerceToInteger:function(){var value=this;return value.factory.createInteger(value.value.length===0?0:1)},coerceToKey:function(){this.callStack.raiseError(PHPError.E_WARNING,"Illegal offset type")},coerceToNumber:function(){return this.coerceToInteger()},coerceToString:function(){return this.factory.createString("Array")},getForAssignment:function(){return this.clone()},getKeys:function(){var keys=[];util.each(this.value,function(element){keys.push(element.getKey())});return keys},getNative:function(){var result=[];util.each(this.value,function(element){result[element.getKey().getNative()]=element.getValue().getNative()});return result},getCurrentElement:function(){var value=this;return value.value[value.pointer]||value.factory.createNull()},getElementByKey:function(key){var element,keyValue,value=this;key=key.coerceToKey(value.callStack);if(!key){return new NullReference(value.factory)}keyValue=key.getNative();if(!hasOwn.call(value.keysToElements,keyValue)){element=new ElementReference(value.factory,value.callStack,value,key,null);value.value.push(element);value.keysToElements[keyValue]=element}return value.keysToElements[keyValue]},getElementByIndex:function(index){var value=this;return value.value[index]||function(){value.callStack.raiseError(PHPError.E_NOTICE,"Undefined "+value.referToElement(index));return new NullReference(value.factory)}()},getKeyByIndex:function(index){var value=this,element=value.value[index];return element?element.key:null},getLength:function(){return this.value.length},getPointer:function(){return this.pointer},isEqualTo:function(rightValue){return rightValue.isEqualToArray(this)},isEqualToNull:function(){var value=this;return value.factory.createBoolean(value.value.length===0)},isEqualToArray:function(rightValue){var equal=true,leftValue=this,factory=leftValue.factory;if(rightValue.value.length!==leftValue.value.length){return factory.createBoolean(false)}util.each(rightValue.keysToElements,function(element,nativeKey){if(!hasOwn.call(leftValue.keysToElements,nativeKey)||element.getValue().isNotEqualTo(leftValue.keysToElements[nativeKey].getValue()).getNative()){equal=false;return false}},{keys:true});return factory.createBoolean(equal)},isEqualToBoolean:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(rightValue.getNative()===leftValue.value.length>0)},isEqualToFloat:function(){return this.factory.createBoolean(false)},isEqualToInteger:function(){return this.factory.createBoolean(false)},isEqualToObject:function(){return this.factory.createBoolean(false)},isEqualToString:function(){return this.factory.createBoolean(false)},isIdenticalTo:function(rightValue){return rightValue.isIdenticalToArray(this)},isIdenticalToArray:function(rightValue){var identical=true,leftValue=this,factory=leftValue.factory;if(rightValue.value.length!==leftValue.value.length){return factory.createBoolean(false)}util.each(rightValue.value,function(element,index){if(leftValue.value[index].getKey().isNotIdenticalTo(element.getKey()).getNative()||leftValue.value[index].getValue().isNotIdenticalTo(element.getValue()).getNative()){identical=false;return false}});return factory.createBoolean(identical)},next:function(){this.pointer++},onesComplement:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},referToElement:function(key){return"offset: "+key},reset:function(){var value=this;value.pointer=0;return value},setPointer:function(pointer){this.pointer=pointer},shiftLeftBy:function(rightValue){return this.coerceToInteger().shiftLeftBy(rightValue)},shiftRightBy:function(rightValue){return this.coerceToInteger().shiftRightBy(rightValue)}});module.exports=ArrayValue})()},{"../Error":65,"../Error/Fatal":66,"../KeyValuePair":68,"../Reference/Element":73,"../Reference/Null":74,"../Value":81,"../Variable":91,"./../../../../js/util":55}],83:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),StringValue=require("./String");function BarewordStringValue(factory,callStack,value){StringValue.call(this,factory,callStack,value)}util.inherit(BarewordStringValue).from(StringValue);util.extend(BarewordStringValue.prototype,{call:function(args,namespaceOrNamespaceScope){return namespaceOrNamespaceScope.getFunction(this.value).apply(null,args)}});module.exports=BarewordStringValue})()},{"./../../../../js/util":55,"./String":89}],84:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),PHPFatalError=require("../Error/Fatal"),Value=require("../Value");function BooleanValue(factory,callStack,value){Value.call(this,factory,callStack,"boolean",!!value)}util.inherit(BooleanValue).from(Value);util.extend(BooleanValue.prototype,{add:function(rightValue){return rightValue.addToBoolean(this)},addToBoolean:function(rightValue){var value=this;return value.factory.createInteger(value.value+rightValue.value)},addToInteger:function(integerValue){return integerValue.addToBoolean(this)},addToNull:function(){return this.coerceToInteger()},addToObject:function(objectValue){return objectValue.addToBoolean(this)},coerceToBoolean:function(){return this},coerceToInteger:function(){var value=this;return value.factory.createInteger(value.value?1:0)},coerceToKey:function(){return this.coerceToInteger()},coerceToNumber:function(){return this.coerceToInteger()},coerceToString:function(){var value=this;return value.factory.createString(value.value?"1":"")},getElement:function(){return this.factory.createNull()},isEqualTo:function(rightValue){var leftValue=this,factory=leftValue.factory;return factory.createBoolean(rightValue.coerceToBoolean().value===leftValue.value)},isEqualToObject:function(){return this},isEqualToString:function(stringValue){var booleanValue=this;return stringValue.factory.createBoolean(stringValue.coerceToBoolean().getNative()===booleanValue.getNative())},onesComplement:function(){throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},shiftLeftBy:function(rightValue){return this.coerceToInteger().shiftLeftBy(rightValue)},shiftRightBy:function(rightValue){return this.coerceToInteger().shiftRightBy(rightValue)}});module.exports=BooleanValue})()},{"../Error/Fatal":66,"../Value":81,"./../../../../js/util":55}],85:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),Value=require("../Value");function FloatValue(factory,callStack,value){Value.call(this,factory,callStack,"float",value)}util.inherit(FloatValue).from(Value);util.extend(FloatValue.prototype,{add:function(rightValue){return rightValue.addToFloat(this)},addToBoolean:function(booleanValue){var value=this;return value.factory.createFloat(value.value+Number(booleanValue.value))},addToInteger:function(integerValue){var value=this;return value.factory.createFloat(value.value+integerValue.value)},addToObject:function(objectValue){return objectValue.addToFloat(this)},addToNull:function(){return this.coerceToNumber()},coerceToBoolean:function(){var value=this;return value.factory.createBoolean(!!value.value)},coerceToFloat:function(){return this},coerceToInteger:function(){var value=this;return value.factory.createInteger(value.value>>0)},coerceToKey:function(){return this.coerceToInteger()},coerceToNumber:function(){return this},coerceToString:function(){var value=this;return value.factory.createString(value.value+"")},getElement:function(){return this.factory.createNull()},isEqualTo:function(rightValue){return rightValue.isEqualToFloat(this)},isEqualToFloat:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(rightValue.value===leftValue.value)},isEqualToInteger:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(rightValue.coerceToFloat().value===leftValue.value)},isEqualToNull:function(){var leftValue=this;return leftValue.factory.createBoolean(leftValue.value===0)},isEqualToObject:function(objectValue){return objectValue.isEqualToFloat(this)},isEqualToString:function(stringValue){var floatValue=this;return floatValue.factory.createBoolean(floatValue.value===stringValue.coerceToFloat().value)},onesComplement:function(){return this.factory.createInteger(~this.value)},shiftLeftBy:function(rightValue){return this.coerceToInteger().shiftLeftBy(rightValue)},shiftRightBy:function(rightValue){return this.coerceToInteger().shiftRightBy(rightValue)},toNegative:function(){var value=this;return value.factory.createFloat(-value.value)},toPositive:function(){var value=this;return value.factory.createInteger(+value.value)}});module.exports=FloatValue})()},{"../Value":81,"./../../../../js/util":55}],86:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),Value=require("../Value");function IntegerValue(factory,callStack,value){Value.call(this,factory,callStack,"integer",value)}util.inherit(IntegerValue).from(Value);util.extend(IntegerValue.prototype,{add:function(rightValue){return rightValue.addToInteger(this)},addToBoolean:function(booleanValue){var value=this;return value.factory.createInteger(value.value+booleanValue.value)},addToInteger:function(rightValue){var value=this;return value.factory.createInteger(value.value+rightValue.value)},coerceToBoolean:function(){var value=this;return value.factory.createBoolean(!!value.value)},coerceToFloat:function(){var value=this;return value.factory.createFloat(value.value)},coerceToInteger:function(){return this},coerceToKey:function(){return this},coerceToNumber:function(){return this},coerceToString:function(){var value=this;return value.factory.createString(value.value.toString())},decrement:function(){var value=this;return value.factory.createInteger(value.value-1)},getElement:function(){return this.factory.createNull()},increment:function(){var value=this;return value.factory.createInteger(value.value+1)},isEqualTo:function(rightValue){return rightValue.isEqualToInteger(this)},isEqualToInteger:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(rightValue.value===leftValue.value)},isEqualToNull:function(){var leftValue=this;return leftValue.factory.createBoolean(leftValue.value===0)},isEqualToObject:function(objectValue){return objectValue.isEqualToInteger(this)},isEqualToString:function(stringValue){var integerValue=this;return integerValue.factory.createBoolean(integerValue.getNative()===parseFloat(stringValue.getNative()))},isLessThan:function(rightValue){var leftValue=this,factory=leftValue.factory;return factory.createBoolean(leftValue.getNative()<rightValue.getNative())},multiply:function(rightValue){var leftValue=this,factory=leftValue.factory,rightType=rightValue.getType();if(rightType==="float"){return factory.createFloat(leftValue.coerceToFloat().getNative()+rightValue.coerceToFloat().getNative())}return factory.createInteger(leftValue.getNative()*rightValue.getNative())},onesComplement:function(){return this.factory.createInteger(~this.value)},shiftLeftBy:function(rightValue){var leftValue=this,factory=leftValue.factory;return factory.createInteger(leftValue.getNative()<<rightValue.coerceToInteger().getNative())},shiftRightBy:function(rightValue){var leftValue=this,factory=leftValue.factory;return factory.createInteger(leftValue.getNative()>>rightValue.coerceToInteger().getNative())},subtract:function(rightValue){var leftValue=this,factory=leftValue.factory;rightValue=rightValue.coerceToNumber();if(rightValue.getType()==="float"){return factory.createFloat(leftValue.coerceToFloat().getNative()-rightValue.coerceToFloat().getNative())}return factory.createInteger(leftValue.getNative()-rightValue.getNative())},toNegative:function(){var value=this;return value.factory.createInteger(-value.value)},toPositive:function(){var value=this;return value.factory.createInteger(+value.value)}});module.exports=IntegerValue})()},{"../Value":81,"./../../../../js/util":55}],87:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),PHPError=require("../Error"),Value=require("../Value");function NullValue(factory,callStack){Value.call(this,factory,callStack,"null",null)}util.inherit(NullValue).from(Value);util.extend(NullValue.prototype,{add:function(rightValue){return rightValue.addToNull()},addToBoolean:function(booleanValue){return booleanValue.coerceToInteger()},coerceToArray:function(){return this.factory.createArray()},coerceToBoolean:function(){return this.factory.createBoolean(false)},coerceToKey:function(){return this.factory.createString("")},coerceToString:function(){return this.factory.createString("")},getInstancePropertyByName:function(name){var value=this;value.callStack.raiseError(PHPError.E_NOTICE,"Trying to get property of non-object");return value.factory.createNull()},isEqualTo:function(rightValue){return rightValue.isEqualToNull(this)},isEqualToFloat:function(floatValue){return floatValue.isEqualToNull()},isEqualToNull:function(){return this.factory.createBoolean(true)},isEqualToObject:function(objectValue){return objectValue.isEqualToNull()},isEqualToString:function(stringValue){return stringValue.isEqualToNull()},isSet:function(){return false}});module.exports=NullValue})()},{"../Error":65,"../Value":81,"./../../../../js/util":55}],88:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),KeyValuePair=require("../KeyValuePair"),NullReference=require("../Reference/Null"),PHPError=require("../Error"),PHPFatalError=require("../Error/Fatal"),PropertyReference=require("../Reference/Property"),Value=require("../Value");var hasOwn={}.hasOwnProperty;function ObjectValue(factory,callStack,object,classObject,id){Value.call(this,factory,callStack,"object",object);this.classObject=classObject;this.id=id;this.properties={}}util.inherit(ObjectValue).from(Value);util.extend(ObjectValue.prototype,{add:function(rightValue){return rightValue.addToObject(this)},addToArray:function(){var value=this;value.callStack.raiseError(PHPError.E_NOTICE,"Object of class "+value.classObject.getName()+" could not be converted to int");throw new PHPFatalError(PHPFatalError.UNSUPPORTED_OPERAND_TYPES)},addToBoolean:function(booleanValue){var value=this;value.callStack.raiseError(PHPError.E_NOTICE,"Object of class "+value.classObject.getName()+" could not be converted to int");return value.factory.createInteger((booleanValue.value?1:0)+1)},addToFloat:function(floatValue){var value=this;value.callStack.raiseError(PHPError.E_NOTICE,"Object of class "+value.classObject.getName()+" could not be converted to int");return value.factory.createFloat(floatValue.value+1)},call:function(args){return this.callMethod("__invoke",args)},callMethod:function(name,args){var defined=true,func,value=this,object=value.value,otherObject,thisObject=value,thisVariable;if(name==="__invoke"&&util.isFunction(object)){func=object}else{if(!hasOwn.call(object,name)){otherObject=object;do{otherObject=Object.getPrototypeOf(otherObject);if(!otherObject||otherObject===Object.prototype){defined=false;break}}while(!hasOwn.call(otherObject,name))}func=object[name]}if(!defined||!util.isFunction(func)){throw new PHPFatalError(PHPFatalError.UNDEFINED_METHOD,{className:value.classObject.getName(),methodName:name})}if(value.classObject.getName()==="JSObject"){thisObject=object;util.each(args,function(arg,index){args[index]=arg.unwrapForJS()})}else if(value.classObject.getName()==="Closure"){thisVariable=object.scopeWhenCreated.getVariable("this");thisObject=thisVariable.isDefined()?thisVariable.getValue():null}return value.factory.coerce(func.apply(thisObject,args))},callStaticMethod:function(nameValue,args){return this.classObject.callStaticMethod(nameValue.getNative(),args)},clone:function(){throw new Error("Unimplemented")},coerceToArray:function(){var elements=[],value=this,factory=value.factory;util.each(value.value,function(propertyValue,propertyName){elements.push(new KeyValuePair(factory.coerce(propertyName),factory.coerce(propertyValue)));
});return value.factory.createArray(elements)},coerceToBoolean:function(){return this.factory.createBoolean(true)},coerceToKey:function(){this.callStack.raiseError(PHPError.E_WARNING,"Illegal offset type")},getClassName:function(){return this.classObject.getName()},getConstantByName:function(name){return this.classObject.getConstantByName(name)},getElementByIndex:function(index){var value=this,names=value.getInstancePropertyNames();if(!hasOwn.call(names,index)){value.callStack.raiseError(PHPError.E_NOTICE,"Undefined "+value.referToElement(index));return new NullReference(value.factory)}return value.getInstancePropertyByName(names[index])},getForAssignment:function(){return this},getID:function(){return this.id},getInstancePropertyByName:function(nameValue){var nameKey=nameValue.coerceToKey(),name=nameKey.getNative(),value=this;if(value.classObject.hasStaticPropertyByName(name)){value.callStack.raiseError(PHPError.E_STRICT,"Accessing static property "+value.classObject.getName()+"::$"+name+" as non static")}if(!hasOwn.call(value.properties,name)){value.properties[name]=new PropertyReference(value.factory,value.callStack,value,nameKey)}return value.properties[name]},getInstancePropertyNames:function(){var nameHash={},names=[],value=this;util.each(value.value,function(value,name){nameHash[name]=true});util.each(value.properties,function(value,name){nameHash[name]=true});util.each(nameHash,function(t,name){names.push(value.factory.coerce(name))});return names},getKeyByIndex:function(index){var value=this,keys=value.getInstancePropertyNames();return keys[index]||null},getLength:function(){return this.getInstancePropertyNames().length},getNative:function(){return this.value},getStaticPropertyByName:function(nameValue){return this.classObject.getStaticPropertyByName(nameValue.getNative())},isEqualTo:function(rightValue){return rightValue.isEqualToObject(this)},isEqualToArray:function(){return this.factory.createBoolean(false)},isEqualToFloat:function(floatValue){return this.factory.createBoolean(floatValue.getNative()===1)},isEqualToInteger:function(integerValue){return this.factory.createBoolean(integerValue.getNative()===1)},isEqualToNull:function(){return this.factory.createBoolean(false)},isEqualToObject:function(rightValue){var equal=true,leftValue=this,factory=leftValue.factory;if(rightValue.getLength()!==leftValue.getLength()||rightValue.getClassName()!==leftValue.getClassName()){return factory.createBoolean(false)}util.each(rightValue.value,function(element,nativeKey){if(!hasOwn.call(leftValue.value,nativeKey)||factory.coerce(element).isNotEqualTo(leftValue.value[nativeKey].getValue()).getNative()){equal=false;return false}},{keys:true});return factory.createBoolean(equal)},isEqualToString:function(){return this.factory.createBoolean(false)},isIdenticalTo:function(rightValue){return rightValue.isIdenticalToObject(this)},isIdenticalToArray:function(){return this.factory.createBoolean(false)},isIdenticalToObject:function(rightValue){var leftValue=this,factory=leftValue.factory;return factory.createBoolean(rightValue.value===leftValue.value)},referToElement:function(key){return"property: "+this.getClassName()+"::$"+key},reset:function(){var value=this;value.pointer=0;return value},setPointer:function(pointer){this.pointer=pointer},unwrapForJS:function(){var value=this;if(value.classObject.getName()==="Closure"){return function(){var thisObj=value.factory.coerce(this),args=[];util.each(arguments,function(arg){args.push(value.factory.coerce(arg))});return value.value.apply(thisObj,args)}}return value.getNative()}});module.exports=ObjectValue})()},{"../Error":65,"../Error/Fatal":66,"../KeyValuePair":68,"../Reference/Null":74,"../Reference/Property":75,"../Value":81,"./../../../../js/util":55}],89:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../js/util"),Value=require("../Value");function StringValue(factory,callStack,value){Value.call(this,factory,callStack,"string",value)}util.inherit(StringValue).from(Value);util.extend(StringValue.prototype,{add:function(rightValue){return rightValue.addToString(this)},addToBoolean:function(booleanValue){return this.coerceToNumber().add(booleanValue)},call:function(args,namespaceOrNamespaceScope){return namespaceOrNamespaceScope.getGlobalNamespace().getFunction(this.value).apply(null,args)},callMethod:function(name,args,namespaceScope){var value=this;return value.callStaticMethod(value.factory.coerce(name),args,namespaceScope)},callStaticMethod:function(nameValue,args,namespaceScope){var value=this,classObject=namespaceScope.getClass(value.value);return classObject.callStaticMethod(nameValue.getNative(),args)},coerceToBoolean:function(){return this.factory.createBoolean(this.value!==""&&this.value!=="0")},coerceToFloat:function(){var value=this;return value.factory.createFloat(/^(\d|-\d)/.test(value.value)?parseFloat(value.value):0)},coerceToInteger:function(){var value=this;return value.factory.createInteger(/^(\d|-\d)/.test(value.value)?parseInt(value.value,10):0)},coerceToKey:function(){return this},coerceToNumber:function(){var value=this,isInteger=/^[^.eE]*$/.test(value.value);if(isInteger){return value.coerceToInteger()}else{return value.coerceToFloat()}},coerceToString:function(){return this},getConstantByName:function(name,namespaceScope){var value=this,classObject=namespaceScope.getClass(value.value);return classObject.getConstantByName(name)},getLength:function(){return this.value.length},getStaticPropertyByName:function(nameValue,namespaceScope){var value=this,classObject=namespaceScope.getClass(value.value);return classObject.getStaticPropertyByName(nameValue.getNative())},isEqualTo:function(rightValue){return rightValue.isEqualToString(this)},isEqualToNull:function(){var value=this;return value.factory.createBoolean(value.getNative()==="")},isEqualToObject:function(){return this.factory.createBoolean(false)},isEqualToString:function(rightValue){var leftValue=this;return leftValue.factory.createBoolean(leftValue.value===rightValue.value)},onesComplement:function(){return this.factory.createString("?")}});module.exports=StringValue})()},{"../Value":81,"./../../../../js/util":55}],90:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),ArrayValue=require("./Value/Array"),BarewordStringValue=require("./Value/BarewordString"),BooleanValue=require("./Value/Boolean"),FloatValue=require("./Value/Float"),IntegerValue=require("./Value/Integer"),NullValue=require("./Value/Null"),ObjectValue=require("./Value/Object"),StringValue=require("./Value/String"),Value=require("./Value");function ValueFactory(callStack){this.nextObjectID=1;this.callStack=callStack;this.globalNamespace=null}util.extend(ValueFactory.prototype,{coerce:function(value){if(value instanceof Value){return value}return this.createFromNative(value)},createArray:function(value){var factory=this;return new ArrayValue(factory,factory.callStack,value)},createBarewordString:function(value){var factory=this;return new BarewordStringValue(factory,factory.callStack,value)},createBoolean:function(value){var factory=this;return new BooleanValue(factory,factory.callStack,value)},createFloat:function(value){var factory=this;return new FloatValue(factory,factory.callStack,value)},createFromNative:function(nativeValue){var factory=this;if(nativeValue===null||typeof nativeValue==="undefined"){return factory.createNull()}if(util.isString(nativeValue)){return factory.createString(nativeValue)}if(util.isNumber(nativeValue)){return factory.createInteger(nativeValue)}if(util.isBoolean(nativeValue)){return factory.createBoolean(nativeValue)}if(util.isArray(nativeValue)){return factory.createArray(nativeValue)}return factory.createObject(nativeValue,factory.globalNamespace.getClass("JSObject"))},createInteger:function(value){var factory=this;return new IntegerValue(factory,factory.callStack,value)},createNull:function(){var factory=this;return new NullValue(factory,factory.callStack)},createObject:function(value,classObject){var factory=this;return new ObjectValue(factory,factory.callStack,value,classObject,factory.nextObjectID++)},createString:function(value){var factory=this;return new StringValue(factory,factory.callStack,value)},isValue:function(object){return object instanceof Value},setGlobalNamespace:function(globalNamespace){this.globalNamespace=globalNamespace}});module.exports=ValueFactory})()},{"./../../../js/util":55,"./Value":81,"./Value/Array":82,"./Value/BarewordString":83,"./Value/Boolean":84,"./Value/Float":85,"./Value/Integer":86,"./Value/Null":87,"./Value/Object":88,"./Value/String":89}],91:[function(require,module,exports){(function(){"use strict";var util=require("./../../../js/util"),PHPError=require("./Error"),VariableReference=require("./Reference/Variable");function Variable(callStack,valueFactory,name){this.name=name;this.reference=null;this.callStack=callStack;this.value=null;this.valueFactory=valueFactory}util.extend(Variable.prototype,{getValue:function(){var variable=this;if(variable.value){return variable.value}if(variable.reference){return variable.reference.getValue()}variable.callStack.raiseError(PHPError.E_NOTICE,"Undefined variable: "+variable.name);return variable.valueFactory.createNull()},getNative:function(){return this.getValue().getNative()},getReference:function(){return new VariableReference(this)},isDefined:function(){var variable=this;return variable.value||variable.reference},isSet:function(){var variable=this;return variable.isDefined()&&variable.getValue().isSet()},postDecrement:function(){var variable=this,decrementedValue=variable.value.decrement(),result=variable.value;if(decrementedValue){variable.value=decrementedValue}return result},preDecrement:function(){var variable=this,decrementedValue=variable.value.decrement();if(decrementedValue){variable.value=decrementedValue}return variable.value},postIncrement:function(){var variable=this,incrementedValue=variable.value.increment(),result=variable.value;if(incrementedValue){variable.value=incrementedValue}return result},preIncrement:function(){var variable=this,incrementedValue=variable.value.increment();if(incrementedValue){variable.value=incrementedValue}return variable.value},setValue:function(value){var variable=this;if(variable.reference){variable.reference.setValue(value)}else{variable.value=value.getForAssignment()}return value},setReference:function(reference){var variable=this;variable.reference=reference;variable.value=null},toArray:function(){return this.value.toArray()},toBoolean:function(){return this.value.toBoolean()},toFloat:function(){return this.value.toFloat()},toInteger:function(){return this.value.toInteger()},toValue:function(){return this.getValue()},unwrapForJS:function(){var value=this;return value.value?value.value.unwrapForJS():null}});module.exports=Variable})()},{"./../../../js/util":55,"./Error":65,"./Reference/Variable":77}],92:[function(require,module,exports){(function(){"use strict";var arrayFunctions=require("./functions/array"),constantFunctions=require("./functions/constant"),splFunctions=require("./functions/spl"),stdClass=require("./classes/stdClass"),stringFunctions=require("./functions/string"),timeFunctions=require("./functions/time"),variableHandlingFunctions=require("./functions/variableHandling"),Closure=require("./classes/Closure"),Exception=require("./classes/Exception"),JSObject=require("./classes/JSObject");module.exports={classes:{stdClass:stdClass,Closure:Closure,Exception:Exception,JSObject:JSObject},functionGroups:[arrayFunctions,constantFunctions,splFunctions,stringFunctions,timeFunctions,variableHandlingFunctions]}})()},{"./classes/Closure":93,"./classes/Exception":94,"./classes/JSObject":95,"./classes/stdClass":96,"./functions/array":97,"./functions/constant":98,"./functions/spl":99,"./functions/string":100,"./functions/time":101,"./functions/variableHandling":102}],93:[function(require,module,exports){(function(){"use strict";module.exports=function(){function Closure(){}return Closure}})()},{}],94:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../../js/util"),PHPError=require("./../../Error");module.exports=function(){function Exception(){}util.inherit(Exception).from(PHPError);util.extend(Exception.prototype,{});return Exception}})()},{"./../../../../../js/util":55,"./../../Error":65}],95:[function(require,module,exports){(function(){"use strict";module.exports=function(){function JSObject(){}return JSObject}})()},{}],96:[function(require,module,exports){(function(){"use strict";module.exports=function(){function stdClass(){}return stdClass}})()},{}],97:[function(require,module,exports){(function(){"use strict";var PHPError=require("./../../Error"),Variable=require("./../../Variable");module.exports=function(internals){var callStack=internals.callStack,valueFactory=internals.valueFactory;return{current:function(arrayReference){var isReference=arrayReference instanceof Variable,arrayValue=isReference?arrayReference.getValue():arrayReference;if(arrayValue.getPointer()>=arrayValue.getLength()){return valueFactory.createBoolean(false)}return arrayValue.getCurrentElement().getValue()},next:function(arrayReference){var isReference=arrayReference instanceof Variable,arrayValue=isReference?arrayReference.getValue():arrayReference;if(arrayValue.getType()!=="array"){callStack.raiseError(PHPError.E_WARNING,"next() expects parameter 1 to be array, "+arrayValue.getType()+" given");return valueFactory.createNull()}arrayValue.setPointer(arrayValue.getPointer()+1);if(arrayValue.getPointer()>=arrayValue.getLength()){return valueFactory.createBoolean(false)}return arrayValue.getCurrentElement().getValue()}}}})()},{"./../../Error":65,"./../../Variable":91}],98:[function(require,module,exports){(function(){"use strict";module.exports=function(internals){var globalNamespace=internals.globalNamespace;return{define:function(name,value,isCaseInsensitive){var match,namespace,path;name=name.toValue().getNative();isCaseInsensitive=isCaseInsensitive?isCaseInsensitive.toValue().getNative():false;value=value.toValue();name=name.replace(/^\//,"");match=name.match(/^(.*?)\\([^\\]+)$/);if(match){path=match[1];name=match[2];namespace=globalNamespace.getDescendant(path)}else{namespace=globalNamespace}namespace.defineConstant(name,value,{caseInsensitive:isCaseInsensitive})}}}})()},{}],99:[function(require,module,exports){(function(){"use strict";var Variable=require("./../../Variable");module.exports=function(internals){var classAutoloader=internals.classAutoloader;return{spl_autoload_register:function(callableReference){var isReference=callableReference instanceof Variable,callableValue=isReference?callableReference.getValue():callableReference;classAutoloader.appendAutoloadCallable(callableValue)}}}})()},{"./../../Variable":91}],100:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../../js/util"),PHPError=require("./../../Error"),Variable=require("./../../Variable");module.exports=function(internals){var callStack=internals.callStack,valueFactory=internals.valueFactory;return{strlen:function(stringReference){var isReference=stringReference instanceof Variable,stringValue=isReference?stringReference.getValue():stringReference;if(stringValue.getType()==="array"||stringValue.getType()==="object"){callStack.raiseError(PHPError.E_WARNING,"strlen() expects parameter 1 to be string, "+stringValue.getType()+" given");return valueFactory.createNull()}return valueFactory.createInteger(stringValue.getLength())},str_replace:function(searchReference,replaceReference,subjectReference,countReference){function getNative(reference){var isReference=reference instanceof Variable,value=isReference?reference.getValue():reference;return value.getNative()}var count=0,search,replacement,subject,replace=countReference?function replace(search,replacement,subject){return subject.replace(search,function(){count++;return replacement})}:function replace(search,replacement,subject){return subject.replace(search,replacement)};if(arguments.length<3){callStack.raiseError(PHPError.E_WARNING,"str_replace() expects at least 3 parameters, "+arguments.length+" given");return valueFactory.createNull()}search=getNative(searchReference);replacement=getNative(replaceReference);subject=getNative(subjectReference);function buildRegex(search){return new RegExp(util.regexEscape(search),"g")}if(util.isArray(search)){if(util.isArray(replacement)){util.each(search,function(search,index){subject=replace(buildRegex(search),index<replacement.length?replacement[index]:"",subject)})}else{util.each(search,function(search){subject=replace(buildRegex(search),replacement,subject)})}}else{subject=replace(buildRegex(search),replacement,subject)}if(countReference){countReference.setValue(valueFactory.createInteger(count))}return valueFactory.createString(subject)}}}})()},{"./../../../../../js/util":55,"./../../Error":65,"./../../Variable":91}],101:[function(require,module,exports){(function(){"use strict";var PHPError=require("./../../Error"),Variable=require("./../../Variable");module.exports=function(internals){var callStack=internals.callStack,resumable=internals.resumable;return{usleep:function(microsecondsReference){var isReference=microsecondsReference instanceof Variable,microsecondsValue=isReference?microsecondsReference.getValue():microsecondsReference,pause;if(microsecondsValue.getType()!=="integer"&&microsecondsValue.getType()!=="float"){callStack.raiseError(PHPError.E_WARNING,"usleep() expects parameter 1 to be integer or float, "+microsecondsValue.getType()+" given");return}pause=resumable.createPause();setTimeout(function(){pause.resume()},microsecondsValue.getNative()/1e3);pause.now()}}}})()},{"./../../Error":65,"./../../Variable":91}],102:[function(require,module,exports){(function(){"use strict";var util=require("./../../../../../js/util"),PHPError=require("./../../Error"),Variable=require("./../../Variable");module.exports=function(internals){var callStack=internals.callStack,stdout=internals.stdout;return{var_dump:function(valueReference){var isReference,value,objects=[];if(!valueReference){callStack.raiseError(PHPError.E_WARNING,"var_dump() expects at least 1 parameter, 0 given");return}isReference=valueReference instanceof Variable;value=isReference?valueReference.getValue():valueReference;function dump(value,depth,isReference){var currentIndentation=new Array(depth).join("  "),names,nativeValue,nextIndentation=new Array(depth+1).join("  "),representation=currentIndentation;if(objects.indexOf(value)>-1){representation+="*RECURSION*";return representation+"\n"}if(isReference){objects.push(value);representation+="&"}switch(value.getType()){case"array":representation+="array("+value.getLength()+") {\n";util.each(value.getKeys(),function(key){var element=value.getElementByKey(key);representation+=nextIndentation+"["+JSON.stringify(key.getNative())+"]=>\n"+dump(element.getValue(),depth+1,element.isReference())});representation+=currentIndentation+"}";break;case"boolean":representation+="bool("+(value.getNative()?"true":"false")+")";break;case"float":representation+="float("+value.getNative()+")";break;case"integer":representation+="int("+value.getNative()+")";break;case"null":representation+="NULL";break;case"object":names=value.getInstancePropertyNames();representation+="object("+value.getClassName()+")#"+value.getID()+" ("+names.length+") {\n";objects.push(value);util.each(names,function(nameValue){var property=value.getInstancePropertyByName(nameValue);representation+=nextIndentation+"["+JSON.stringify(nameValue.getNative())+"]=>\n"+dump(property.getValue(),depth+1,property.isReference())});representation+=currentIndentation+"}";break;case"string":nativeValue=value.getNative();representation+="string("+nativeValue.length+') "'+nativeValue+'"';break}return representation+"\n"}stdout.write(dump(value,1))}}}})()},{"./../../../../../js/util":55,"./../../Error":65,"./../../Variable":91}],103:[function(require,module,exports){(function(){"use strict";module.exports={normalizeModulePath:function(path){return path||"(program)"}}})()},{}],104:[function(require,module,exports){(function(global){(function(){"use strict";var Syntax,Precedence,BinaryPrecedence,SourceNode,estraverse,esutils,isArray,base,indent,json,renumber,hexadecimal,quotes,escapeless,newline,space,parentheses,semicolons,safeConcatenation,directive,extra,parse,sourceMap,sourceCode,preserveBlankLines,FORMAT_MINIFY,FORMAT_DEFAULTS;estraverse=require("estraverse");esutils=require("esutils");Syntax=estraverse.Syntax;function isExpression(node){return CodeGenerator.Expression.hasOwnProperty(node.type)}function isStatement(node){return CodeGenerator.Statement.hasOwnProperty(node.type)}Precedence={Sequence:0,Yield:1,Await:1,Assignment:1,Conditional:2,ArrowFunction:2,LogicalOR:3,LogicalAND:4,BitwiseOR:5,BitwiseXOR:6,BitwiseAND:7,Equality:8,Relational:9,BitwiseSHIFT:10,Additive:11,Multiplicative:12,Unary:13,Postfix:14,Call:15,New:16,TaggedTemplate:17,Member:18,Primary:19};BinaryPrecedence={"||":Precedence.LogicalOR,"&&":Precedence.LogicalAND,"|":Precedence.BitwiseOR,"^":Precedence.BitwiseXOR,"&":Precedence.BitwiseAND,"==":Precedence.Equality,"!=":Precedence.Equality,"===":Precedence.Equality,"!==":Precedence.Equality,is:Precedence.Equality,isnt:Precedence.Equality,"<":Precedence.Relational,">":Precedence.Relational,"<=":Precedence.Relational,">=":Precedence.Relational,"in":Precedence.Relational,"instanceof":Precedence.Relational,"<<":Precedence.BitwiseSHIFT,">>":Precedence.BitwiseSHIFT,">>>":Precedence.BitwiseSHIFT,"+":Precedence.Additive,"-":Precedence.Additive,"*":Precedence.Multiplicative,"%":Precedence.Multiplicative,"/":Precedence.Multiplicative};var F_ALLOW_IN=1,F_ALLOW_CALL=1<<1,F_ALLOW_UNPARATH_NEW=1<<2,F_FUNC_BODY=1<<3,F_DIRECTIVE_CTX=1<<4,F_SEMICOLON_OPT=1<<5;var E_FTT=F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TTF=F_ALLOW_IN|F_ALLOW_CALL,E_TTT=F_ALLOW_IN|F_ALLOW_CALL|F_ALLOW_UNPARATH_NEW,E_TFF=F_ALLOW_IN,E_FFT=F_ALLOW_UNPARATH_NEW,E_TFT=F_ALLOW_IN|F_ALLOW_UNPARATH_NEW;var S_TFFF=F_ALLOW_IN,S_TFFT=F_ALLOW_IN|F_SEMICOLON_OPT,S_FFFF=0,S_TFTF=F_ALLOW_IN|F_DIRECTIVE_CTX,S_TTFF=F_ALLOW_IN|F_FUNC_BODY;function getDefaultOptions(){return{indent:null,base:null,parse:null,comment:false,format:{indent:{style:"    ",base:0,adjustMultilineComment:false},newline:"\n",space:" ",json:false,renumber:false,hexadecimal:false,quotes:"single",escapeless:false,compact:false,parentheses:true,semicolons:true,safeConcatenation:false,preserveBlankLines:false},moz:{comprehensionExpressionStartsWithAssignment:false,starlessGenerator:false},sourceMap:null,sourceMapRoot:null,sourceMapWithCode:false,directive:false,raw:true,verbatim:null,sourceCode:null}}function stringRepeat(str,num){var result="";for(num|=0;num>0;num>>>=1,str+=str){if(num&1){result+=str}}return result}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function hasLineTerminator(str){return/[\r\n]/g.test(str)}function endsWithLineTerminator(str){var len=str.length;return len&&esutils.code.isLineTerminator(str.charCodeAt(len-1))}function merge(target,override){var key;for(key in override){if(override.hasOwnProperty(key)){target[key]=override[key]}}return target}function updateDeeply(target,override){var key,val;function isHashObject(target){return typeof target==="object"&&target instanceof Object&&!(target instanceof RegExp)}for(key in override){if(override.hasOwnProperty(key)){val=override[key];if(isHashObject(val)){if(isHashObject(target[key])){updateDeeply(target[key],val)}else{target[key]=updateDeeply({},val)}}else{target[key]=val}}}return target}function generateNumber(value){var result,point,temp,exponent,pos;if(value!==value){throw new Error("Numeric literal whose value is NaN")}if(value<0||value===0&&1/value<0){throw new Error("Numeric literal whose value is negative")}if(value===1/0){return json?"null":renumber?"1e400":"1e+400"}result=""+value;if(!renumber||result.length<3){return result}point=result.indexOf(".");if(!json&&result.charCodeAt(0)===48&&point===1){point=0;result=result.slice(1)}temp=result;result=result.replace("e+","e");exponent=0;if((pos=temp.indexOf("e"))>0){exponent=+temp.slice(pos+1);temp=temp.slice(0,pos)}if(point>=0){exponent-=temp.length-point-1;temp=+(temp.slice(0,point)+temp.slice(point+1))+""}pos=0;while(temp.charCodeAt(temp.length+pos-1)===48){--pos}if(pos!==0){exponent-=pos;temp=temp.slice(0,pos)}if(exponent!==0){temp+="e"+exponent}if((temp.length<result.length||hexadecimal&&value>1e12&&Math.floor(value)===value&&(temp="0x"+value.toString(16)).length<result.length)&&+temp===value){result=temp}return result}function escapeRegExpCharacter(ch,previousIsBackslash){if((ch&~1)===8232){return(previousIsBackslash?"u":"\\u")+(ch===8232?"2028":"2029")}else if(ch===10||ch===13){return(previousIsBackslash?"":"\\")+(ch===10?"n":"r")}return String.fromCharCode(ch)}function generateRegExp(reg){var match,result,flags,i,iz,ch,characterInBrack,previousIsBackslash;result=reg.toString();if(reg.source){match=result.match(/\/([^/]*)$/);if(!match){return result}flags=match[1];result="";characterInBrack=false;previousIsBackslash=false;for(i=0,iz=reg.source.length;i<iz;++i){ch=reg.source.charCodeAt(i);if(!previousIsBackslash){if(characterInBrack){if(ch===93){characterInBrack=false}}else{if(ch===47){result+="\\"}else if(ch===91){characterInBrack=true}}result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=ch===92}else{result+=escapeRegExpCharacter(ch,previousIsBackslash);previousIsBackslash=false}}return"/"+result+"/"+flags}return result}function escapeAllowedCharacter(code,next){var hex;if(code===8){return"\\b"}if(code===12){return"\\f"}if(code===9){return"\\t"}hex=code.toString(16).toUpperCase();if(json||code>255){return"\\u"+"0000".slice(hex.length)+hex}else if(code===0&&!esutils.code.isDecimalDigit(next)){return"\\0"}else if(code===11){return"\\x0B"}else{return"\\x"+"00".slice(hex.length)+hex}}function escapeDisallowedCharacter(code){if(code===92){return"\\\\"}if(code===10){return"\\n"}if(code===13){return"\\r"}if(code===8232){return"\\u2028"}if(code===8233){return"\\u2029"}throw new Error("Incorrectly classified character")}function escapeDirective(str){var i,iz,code,quote;quote=quotes==="double"?'"':"'";for(i=0,iz=str.length;i<iz;++i){code=str.charCodeAt(i);if(code===39){quote='"';break}else if(code===34){quote="'";break}else if(code===92){++i}}return quote+str+quote}function escapeString(str){var result="",i,len,code,singleQuotes=0,doubleQuotes=0,single,quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39){++singleQuotes}else if(code===34){++doubleQuotes}else if(code===47&&json){result+="\\"}else if(esutils.code.isLineTerminator(code)||code===92){result+=escapeDisallowedCharacter(code);continue}else if(json&&code<32||!(json||escapeless||code>=32&&code<=126)){result+=escapeAllowedCharacter(code,str.charCodeAt(i+1));continue}result+=String.fromCharCode(code)}single=!(quotes==="double"||quotes==="auto"&&doubleQuotes<singleQuotes);quote=single?"'":'"';if(!(single?singleQuotes:doubleQuotes)){return quote+result+quote}str=result;result=quote;for(i=0,len=str.length;i<len;++i){code=str.charCodeAt(i);if(code===39&&single||code===34&&!single){result+="\\"}result+=String.fromCharCode(code)}return result+quote}function flattenToString(arr){var i,iz,elem,result="";for(i=0,iz=arr.length;i<iz;++i){elem=arr[i];result+=isArray(elem)?flattenToString(elem):elem}return result}function toSourceNodeWhenNeeded(generated,node){if(!sourceMap){if(isArray(generated)){return flattenToString(generated)}else{return generated}}if(node==null){if(generated instanceof SourceNode){return generated}else{node={}}}if(node.loc==null){return new SourceNode(null,null,sourceMap,generated,node.name||null)}return new SourceNode(node.loc.start.line,node.loc.start.column,sourceMap===true?node.loc.source||null:sourceMap,generated,node.name||null)}function noEmptySpace(){return space?space:" "}function join(left,right){var leftSource,rightSource,leftCharCode,rightCharCode;leftSource=toSourceNodeWhenNeeded(left).toString();if(leftSource.length===0){return[right]}rightSource=toSourceNodeWhenNeeded(right).toString();if(rightSource.length===0){return[left]}leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=rightSource.charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPart(leftCharCode)&&esutils.code.isIdentifierPart(rightCharCode)||leftCharCode===47&&rightCharCode===105){return[left,noEmptySpace(),right]}else if(esutils.code.isWhiteSpace(leftCharCode)||esutils.code.isLineTerminator(leftCharCode)||esutils.code.isWhiteSpace(rightCharCode)||esutils.code.isLineTerminator(rightCharCode)){return[left,right]}return[left,space,right]}function addIndent(stmt){return[base,stmt]}function withIndent(fn){var previousBase;previousBase=base;base+=indent;fn(base);base=previousBase}function calculateSpaces(str){var i;for(i=str.length-1;i>=0;--i){if(esutils.code.isLineTerminator(str.charCodeAt(i))){break}}return str.length-1-i}function adjustMultilineComment(value,specialBase){var array,i,len,line,j,spaces,previousBase,sn;array=value.split(/\r\n|[\r\n]/);spaces=Number.MAX_VALUE;for(i=1,len=array.length;i<len;++i){line=array[i];j=0;while(j<line.length&&esutils.code.isWhiteSpace(line.charCodeAt(j))){++j}if(spaces>j){spaces=j}}if(typeof specialBase!=="undefined"){previousBase=base;if(array[1][spaces]==="*"){specialBase+=" "}base=specialBase}else{if(spaces&1){--spaces}previousBase=base}for(i=1,len=array.length;i<len;++i){sn=toSourceNodeWhenNeeded(addIndent(array[i].slice(spaces)));array[i]=sourceMap?sn.join(""):sn}base=previousBase;return array.join("\n")}function generateComment(comment,specialBase){if(comment.type==="Line"){if(endsWithLineTerminator(comment.value)){return"//"+comment.value}else{var result="//"+comment.value;if(!preserveBlankLines){result+="\n"}return result}}if(extra.format.indent.adjustMultilineComment&&/[\n\r]/.test(comment.value)){return adjustMultilineComment("/*"+comment.value+"*/",specialBase)}return"/*"+comment.value+"*/"}function addComments(stmt,result){var i,len,comment,save,tailingToStatement,specialBase,fragment,extRange,range,prevRange,prefix,infix,suffix,count;if(stmt.leadingComments&&stmt.leadingComments.length>0){save=result;if(preserveBlankLines){comment=stmt.leadingComments[0];result=[];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}prevRange=range;for(i=1,len=stmt.leadingComments.length;i<len;i++){comment=stmt.leadingComments[i];range=comment.range;infix=sourceCode.substring(prevRange[1],range[0]);count=(infix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count));result.push(addIndent(generateComment(comment)));prevRange=range}suffix=sourceCode.substring(range[1],extRange[1]);count=(suffix.match(/\n/g)||[]).length;result.push(stringRepeat("\n",count))}else{comment=stmt.leadingComments[0];result=[];if(safeConcatenation&&stmt.type===Syntax.Program&&stmt.body.length===0){result.push("\n")}result.push(generateComment(comment));if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push("\n")}for(i=1,len=stmt.leadingComments.length;i<len;++i){comment=stmt.leadingComments[i];fragment=[generateComment(comment)];if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){fragment.push("\n")}result.push(addIndent(fragment))}}result.push(addIndent(save))}if(stmt.trailingComments){if(preserveBlankLines){comment=stmt.trailingComments[0];extRange=comment.extendedRange;range=comment.range;prefix=sourceCode.substring(extRange[0],range[0]);count=(prefix.match(/\n/g)||[]).length;if(count>0){result.push(stringRepeat("\n",count));
result.push(addIndent(generateComment(comment)))}else{result.push(prefix);result.push(generateComment(comment))}}else{tailingToStatement=!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());specialBase=stringRepeat(" ",calculateSpaces(toSourceNodeWhenNeeded([base,result,indent]).toString()));for(i=0,len=stmt.trailingComments.length;i<len;++i){comment=stmt.trailingComments[i];if(tailingToStatement){if(i===0){result=[result,indent]}else{result=[result,specialBase]}result.push(generateComment(comment,specialBase))}else{result=[result,addIndent(generateComment(comment))]}if(i!==len-1&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result=[result,"\n"]}}}}return result}function generateBlankLines(start,end,result){var j,newlineCount=0;for(j=start;j<end;j++){if(sourceCode[j]==="\n"){newlineCount++}}for(j=1;j<newlineCount;j++){result.push(newline)}}function parenthesize(text,current,should){if(current<should){return["(",text,")"]}return text}function generateVerbatimString(string){var i,iz,result;result=string.split(/\r\n|\n/);for(i=1,iz=result.length;i<iz;i++){result[i]=newline+base+result[i]}return result}function generateVerbatim(expr,precedence){var verbatim,result,prec;verbatim=expr[extra.verbatim];if(typeof verbatim==="string"){result=parenthesize(generateVerbatimString(verbatim),Precedence.Sequence,precedence)}else{result=generateVerbatimString(verbatim.content);prec=verbatim.precedence!=null?verbatim.precedence:Precedence.Sequence;result=parenthesize(result,prec,precedence)}return toSourceNodeWhenNeeded(result,expr)}function CodeGenerator(){}CodeGenerator.prototype.maybeBlock=function(stmt,flags){var result,noLeadingComment,that=this;noLeadingComment=!extra.comment||!stmt.leadingComments;if(stmt.type===Syntax.BlockStatement&&noLeadingComment){return[space,this.generateStatement(stmt,flags)]}if(stmt.type===Syntax.EmptyStatement&&noLeadingComment){return";"}withIndent(function(){result=[newline,addIndent(that.generateStatement(stmt,flags))]});return result};CodeGenerator.prototype.maybeBlockSuffix=function(stmt,result){var ends=endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString());if(stmt.type===Syntax.BlockStatement&&(!extra.comment||!stmt.leadingComments)&&!ends){return[result,space]}if(ends){return[result,base]}return[result,newline,base]};function generateIdentifier(node){return toSourceNodeWhenNeeded(node.name,node)}function generateAsyncPrefix(node,spaceRequired){return node.async?"async"+(spaceRequired?noEmptySpace():space):""}function generateStarSuffix(node){var isGenerator=node.generator&&!extra.moz.starlessGenerator;return isGenerator?"*"+space:""}function generateMethodPrefix(prop){var func=prop.value;if(func.async){return generateAsyncPrefix(func,!prop.computed)}else{return generateStarSuffix(func)?"*":""}}CodeGenerator.prototype.generatePattern=function(node,precedence,flags){if(node.type===Syntax.Identifier){return generateIdentifier(node)}return this.generateExpression(node,precedence,flags)};CodeGenerator.prototype.generateFunctionParams=function(node){var i,iz,result,hasDefault;hasDefault=false;if(node.type===Syntax.ArrowFunctionExpression&&!node.rest&&(!node.defaults||node.defaults.length===0)&&node.params.length===1&&node.params[0].type===Syntax.Identifier){result=[generateAsyncPrefix(node,true),generateIdentifier(node.params[0])]}else{result=node.type===Syntax.ArrowFunctionExpression?[generateAsyncPrefix(node,false)]:[];result.push("(");if(node.defaults){hasDefault=true}for(i=0,iz=node.params.length;i<iz;++i){if(hasDefault&&node.defaults[i]){result.push(this.generateAssignment(node.params[i],node.defaults[i],"=",Precedence.Assignment,E_TTT))}else{result.push(this.generatePattern(node.params[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+space)}}if(node.rest){if(node.params.length){result.push(","+space)}result.push("...");result.push(generateIdentifier(node.rest))}result.push(")")}return result};CodeGenerator.prototype.generateFunctionBody=function(node){var result,expr;result=this.generateFunctionParams(node);if(node.type===Syntax.ArrowFunctionExpression){result.push(space);result.push("=>")}if(node.expression){result.push(space);expr=this.generateExpression(node.body,Precedence.Assignment,E_TTT);if(expr.toString().charAt(0)==="{"){expr=["(",expr,")"]}result.push(expr)}else{result.push(this.maybeBlock(node.body,S_TTFF))}return result};CodeGenerator.prototype.generateIterationForStatement=function(operator,stmt,flags){var result=["for"+space+"("],that=this;withIndent(function(){if(stmt.left.type===Syntax.VariableDeclaration){withIndent(function(){result.push(stmt.left.kind+noEmptySpace());result.push(that.generateStatement(stmt.left.declarations[0],S_FFFF))})}else{result.push(that.generateExpression(stmt.left,Precedence.Call,E_TTT))}result=join(result,operator);result=[join(result,that.generateExpression(stmt.right,Precedence.Sequence,E_TTT)),")"]});result.push(this.maybeBlock(stmt.body,flags));return result};CodeGenerator.prototype.generatePropertyKey=function(expr,computed){var result=[];if(computed){result.push("[")}result.push(this.generateExpression(expr,Precedence.Sequence,E_TTT));if(computed){result.push("]")}return result};CodeGenerator.prototype.generateAssignment=function(left,right,operator,precedence,flags){if(Precedence.Assignment<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(left,Precedence.Call,flags),space+operator+space,this.generateExpression(right,Precedence.Assignment,flags)],Precedence.Assignment,precedence)};CodeGenerator.prototype.semicolon=function(flags){if(!semicolons&&flags&F_SEMICOLON_OPT){return""}return";"};CodeGenerator.Statement={BlockStatement:function(stmt,flags){var range,content,result=["{",newline],that=this;withIndent(function(){if(stmt.body.length===0&&preserveBlankLines){range=stmt.range;if(range[1]-range[0]>2){content=sourceCode.substring(range[0]+1,range[1]-1);if(content[0]==="\n"){result=["{"]}result.push(content)}}var i,iz,fragment,bodyFlags;bodyFlags=S_TFFF;if(flags&F_FUNC_BODY){bodyFlags|=F_DIRECTIVE_CTX}for(i=0,iz=stmt.body.length;i<iz;++i){if(preserveBlankLines){if(i===0){if(stmt.body[0].leadingComments){range=stmt.body[0].leadingComments[0].extendedRange;content=sourceCode.substring(range[0],range[1]);if(content[0]==="\n"){result=["{"]}}if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[0].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(stmt.body[i].leadingComments&&preserveBlankLines){fragment=that.generateStatement(stmt.body[i],bodyFlags)}else{fragment=addIndent(that.generateStatement(stmt.body[i],bodyFlags))}result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines&&i<iz-1){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}});result.push(addIndent("}"));return result},BreakStatement:function(stmt,flags){if(stmt.label){return"break "+stmt.label.name+this.semicolon(flags)}return"break"+this.semicolon(flags)},ContinueStatement:function(stmt,flags){if(stmt.label){return"continue "+stmt.label.name+this.semicolon(flags)}return"continue"+this.semicolon(flags)},ClassBody:function(stmt,flags){var result=["{",newline],that=this;withIndent(function(indent){var i,iz;for(i=0,iz=stmt.body.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.body[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},ClassDeclaration:function(stmt,flags){var result,fragment;result=["class "+stmt.id.name];if(stmt.superClass){fragment=join("extends",this.generateExpression(stmt.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(stmt.body,S_TFFT));return result},DirectiveStatement:function(stmt,flags){if(extra.raw&&stmt.raw){return stmt.raw+this.semicolon(flags)}return escapeDirective(stmt.directive)+this.semicolon(flags)},DoWhileStatement:function(stmt,flags){var result=join("do",this.maybeBlock(stmt.body,S_TFFF));result=this.maybeBlockSuffix(stmt.body,result);return join(result,["while"+space+"(",this.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"+this.semicolon(flags)])},CatchClause:function(stmt,flags){var result,that=this;withIndent(function(){var guard;result=["catch"+space+"(",that.generateExpression(stmt.param,Precedence.Sequence,E_TTT),")"];if(stmt.guard){guard=that.generateExpression(stmt.guard,Precedence.Sequence,E_TTT);result.splice(2,0," if ",guard)}});result.push(this.maybeBlock(stmt.body,S_TFFF));return result},DebuggerStatement:function(stmt,flags){return"debugger"+this.semicolon(flags)},EmptyStatement:function(stmt,flags){return";"},ExportDeclaration:function(stmt,flags){var result=["export"],bodyFlags,that=this;bodyFlags=flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF;if(stmt["default"]){result=join(result,"default");if(isStatement(stmt.declaration)){result=join(result,this.generateStatement(stmt.declaration,bodyFlags))}else{result=join(result,this.generateExpression(stmt.declaration,Precedence.Assignment,E_TTT)+this.semicolon(flags))}return result}if(stmt.declaration){return join(result,this.generateStatement(stmt.declaration,bodyFlags))}if(stmt.specifiers){if(stmt.specifiers.length===0){result=join(result,"{"+space+"}")}else if(stmt.specifiers[0].type===Syntax.ExportBatchSpecifier){result=join(result,this.generateExpression(stmt.specifiers[0],Precedence.Sequence,E_TTT))}else{result=join(result,"{");withIndent(function(indent){var i,iz;result.push(newline);for(i=0,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}")}if(stmt.source){result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)])}else{result.push(this.semicolon(flags))}}return result},ExpressionStatement:function(stmt,flags){var result,fragment;function isClassPrefixed(fragment){var code;if(fragment.slice(0,5)!=="class"){return false}code=fragment.charCodeAt(5);return code===123||esutils.code.isWhiteSpace(code)||esutils.code.isLineTerminator(code)}function isFunctionPrefixed(fragment){var code;if(fragment.slice(0,8)!=="function"){return false}code=fragment.charCodeAt(8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}function isAsyncPrefixed(fragment){var code,i,iz;if(fragment.slice(0,5)!=="async"){return false}if(!esutils.code.isWhiteSpace(fragment.charCodeAt(5))){return false}for(i=6,iz=fragment.length;i<iz;++i){if(!esutils.code.isWhiteSpace(fragment.charCodeAt(i))){break}}if(i===iz){return false}if(fragment.slice(i,i+8)!=="function"){return false}code=fragment.charCodeAt(i+8);return code===40||esutils.code.isWhiteSpace(code)||code===42||esutils.code.isLineTerminator(code)}result=[this.generateExpression(stmt.expression,Precedence.Sequence,E_TTT)];fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.charCodeAt(0)===123||isClassPrefixed(fragment)||isFunctionPrefixed(fragment)||isAsyncPrefixed(fragment)||directive&&flags&F_DIRECTIVE_CTX&&stmt.expression.type===Syntax.Literal&&typeof stmt.expression.value==="string"){result=["(",result,")"+this.semicolon(flags)]}else{result.push(this.semicolon(flags))}return result},ImportDeclaration:function(stmt,flags){var result,cursor,that=this;if(stmt.specifiers.length===0){return["import",space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]}result=["import"];cursor=0;if(stmt.specifiers[cursor].type===Syntax.ImportDefaultSpecifier){result=join(result,[this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)]);++cursor}if(stmt.specifiers[cursor]){if(cursor!==0){result.push(",")}if(stmt.specifiers[cursor].type===Syntax.ImportNamespaceSpecifier){result=join(result,[space,this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT)])}else{result.push(space+"{");if(stmt.specifiers.length-cursor===1){result.push(space);result.push(this.generateExpression(stmt.specifiers[cursor],Precedence.Sequence,E_TTT));result.push(space+"}"+space)}else{withIndent(function(indent){var i,iz;result.push(newline);for(i=cursor,iz=stmt.specifiers.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(stmt.specifiers[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base+"}"+space)}}}result=join(result,["from"+space,this.generateExpression(stmt.source,Precedence.Sequence,E_TTT),this.semicolon(flags)]);return result},VariableDeclarator:function(stmt,flags){var itemFlags=flags&F_ALLOW_IN?E_TTT:E_FTT;if(stmt.init){return[this.generateExpression(stmt.id,Precedence.Assignment,itemFlags),space,"=",space,this.generateExpression(stmt.init,Precedence.Assignment,itemFlags)]}return this.generatePattern(stmt.id,Precedence.Assignment,itemFlags)},VariableDeclaration:function(stmt,flags){var result,i,iz,node,bodyFlags,that=this;result=[stmt.kind];bodyFlags=flags&F_ALLOW_IN?S_TFFF:S_FFFF;function block(){node=stmt.declarations[0];if(extra.comment&&node.leadingComments){result.push("\n");result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(noEmptySpace());result.push(that.generateStatement(node,bodyFlags))}for(i=1,iz=stmt.declarations.length;i<iz;++i){node=stmt.declarations[i];if(extra.comment&&node.leadingComments){result.push(","+newline);result.push(addIndent(that.generateStatement(node,bodyFlags)))}else{result.push(","+space);result.push(that.generateStatement(node,bodyFlags))}}}if(stmt.declarations.length>1){withIndent(block)}else{block()}result.push(this.semicolon(flags));return result},ThrowStatement:function(stmt,flags){return[join("throw",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]},TryStatement:function(stmt,flags){var result,i,iz,guardedHandlers;result=["try",this.maybeBlock(stmt.block,S_TFFF)];result=this.maybeBlockSuffix(stmt.block,result);if(stmt.handlers){for(i=0,iz=stmt.handlers.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handlers[i].body,result)}}}else{guardedHandlers=stmt.guardedHandlers||[];for(i=0,iz=guardedHandlers.length;i<iz;++i){result=join(result,this.generateStatement(guardedHandlers[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(guardedHandlers[i].body,result)}}if(stmt.handler){if(isArray(stmt.handler)){for(i=0,iz=stmt.handler.length;i<iz;++i){result=join(result,this.generateStatement(stmt.handler[i],S_TFFF));if(stmt.finalizer||i+1!==iz){result=this.maybeBlockSuffix(stmt.handler[i].body,result)}}}else{result=join(result,this.generateStatement(stmt.handler,S_TFFF));if(stmt.finalizer){result=this.maybeBlockSuffix(stmt.handler.body,result)}}}}if(stmt.finalizer){result=join(result,["finally",this.maybeBlock(stmt.finalizer,S_TFFF)])}return result},SwitchStatement:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){result=["switch"+space+"(",that.generateExpression(stmt.discriminant,Precedence.Sequence,E_TTT),")"+space+"{"+newline]});if(stmt.cases){bodyFlags=S_TFFF;for(i=0,iz=stmt.cases.length;i<iz;++i){if(i===iz-1){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(this.generateStatement(stmt.cases[i],bodyFlags));result.push(fragment);if(!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}}result.push(addIndent("}"));return result},SwitchCase:function(stmt,flags){var result,fragment,i,iz,bodyFlags,that=this;withIndent(function(){if(stmt.test){result=[join("case",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT)),":"]}else{result=["default:"]}i=0;iz=stmt.consequent.length;if(iz&&stmt.consequent[0].type===Syntax.BlockStatement){fragment=that.maybeBlock(stmt.consequent[0],S_TFFF);result.push(fragment);i=1}if(i!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}bodyFlags=S_TFFF;for(;i<iz;++i){if(i===iz-1&&flags&F_SEMICOLON_OPT){bodyFlags|=F_SEMICOLON_OPT}fragment=addIndent(that.generateStatement(stmt.consequent[i],bodyFlags));result.push(fragment);if(i+1!==iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){result.push(newline)}}});return result},IfStatement:function(stmt,flags){var result,bodyFlags,semicolonOptional,that=this;withIndent(function(){result=["if"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});semicolonOptional=flags&F_SEMICOLON_OPT;bodyFlags=S_TFFF;if(semicolonOptional){bodyFlags|=F_SEMICOLON_OPT}if(stmt.alternate){result.push(this.maybeBlock(stmt.consequent,S_TFFF));result=this.maybeBlockSuffix(stmt.consequent,result);if(stmt.alternate.type===Syntax.IfStatement){result=join(result,["else ",this.generateStatement(stmt.alternate,bodyFlags)])}else{result=join(result,join("else",this.maybeBlock(stmt.alternate,bodyFlags)))}}else{result.push(this.maybeBlock(stmt.consequent,bodyFlags))}return result},ForStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["for"+space+"("];if(stmt.init){if(stmt.init.type===Syntax.VariableDeclaration){result.push(that.generateStatement(stmt.init,S_FFFF))}else{result.push(that.generateExpression(stmt.init,Precedence.Sequence,E_FTT));result.push(";")}}else{result.push(";")}if(stmt.test){result.push(space);result.push(that.generateExpression(stmt.test,Precedence.Sequence,E_TTT));result.push(";")}else{result.push(";")}if(stmt.update){result.push(space);result.push(that.generateExpression(stmt.update,Precedence.Sequence,E_TTT));result.push(")")}else{result.push(")")}});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},ForInStatement:function(stmt,flags){return this.generateIterationForStatement("in",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},ForOfStatement:function(stmt,flags){return this.generateIterationForStatement("of",stmt,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)},LabeledStatement:function(stmt,flags){return[stmt.label.name+":",this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF)]},Program:function(stmt,flags){var result,fragment,i,iz,bodyFlags;iz=stmt.body.length;result=[safeConcatenation&&iz>0?"\n":""];bodyFlags=S_TFTF;for(i=0;i<iz;++i){if(!safeConcatenation&&i===iz-1){bodyFlags|=F_SEMICOLON_OPT}if(preserveBlankLines){if(i===0){if(!stmt.body[0].leadingComments){generateBlankLines(stmt.range[0],stmt.body[i].range[0],result)}}if(i>0){if(!stmt.body[i-1].trailingComments&&!stmt.body[i].leadingComments){generateBlankLines(stmt.body[i-1].range[1],stmt.body[i].range[0],result)}}}fragment=addIndent(this.generateStatement(stmt.body[i],bodyFlags));result.push(fragment);if(i+1<iz&&!endsWithLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){if(preserveBlankLines){if(!stmt.body[i+1].leadingComments){result.push(newline)}}else{result.push(newline)}}if(preserveBlankLines){if(i===iz-1){if(!stmt.body[i].trailingComments){generateBlankLines(stmt.body[i].range[1],stmt.range[1],result)}}}}return result},FunctionDeclaration:function(stmt,flags){return[generateAsyncPrefix(stmt,true),"function",generateStarSuffix(stmt)||noEmptySpace(),generateIdentifier(stmt.id),this.generateFunctionBody(stmt)]},ReturnStatement:function(stmt,flags){if(stmt.argument){return[join("return",this.generateExpression(stmt.argument,Precedence.Sequence,E_TTT)),this.semicolon(flags)]}return["return"+this.semicolon(flags)]},WhileStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["while"+space+"(",that.generateExpression(stmt.test,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result},WithStatement:function(stmt,flags){var result,that=this;withIndent(function(){result=["with"+space+"(",that.generateExpression(stmt.object,Precedence.Sequence,E_TTT),")"]});result.push(this.maybeBlock(stmt.body,flags&F_SEMICOLON_OPT?S_TFFT:S_TFFF));return result}};merge(CodeGenerator.prototype,CodeGenerator.Statement);CodeGenerator.Expression={SequenceExpression:function(expr,precedence,flags){var result,i,iz;if(Precedence.Sequence<precedence){flags|=F_ALLOW_IN}result=[];for(i=0,iz=expr.expressions.length;i<iz;++i){result.push(this.generateExpression(expr.expressions[i],Precedence.Assignment,flags));if(i+1<iz){result.push(","+space)}}return parenthesize(result,Precedence.Sequence,precedence)},AssignmentExpression:function(expr,precedence,flags){return this.generateAssignment(expr.left,expr.right,expr.operator,precedence,flags)},ArrowFunctionExpression:function(expr,precedence,flags){return parenthesize(this.generateFunctionBody(expr),Precedence.ArrowFunction,precedence)},ConditionalExpression:function(expr,precedence,flags){if(Precedence.Conditional<precedence){flags|=F_ALLOW_IN}return parenthesize([this.generateExpression(expr.test,Precedence.LogicalOR,flags),space+"?"+space,this.generateExpression(expr.consequent,Precedence.Assignment,flags),space+":"+space,this.generateExpression(expr.alternate,Precedence.Assignment,flags)],Precedence.Conditional,precedence)},LogicalExpression:function(expr,precedence,flags){return this.BinaryExpression(expr,precedence,flags)},BinaryExpression:function(expr,precedence,flags){var result,currentPrecedence,fragment,leftSource;currentPrecedence=BinaryPrecedence[expr.operator];if(currentPrecedence<precedence){flags|=F_ALLOW_IN}fragment=this.generateExpression(expr.left,currentPrecedence,flags);leftSource=fragment.toString();if(leftSource.charCodeAt(leftSource.length-1)===47&&esutils.code.isIdentifierPart(expr.operator.charCodeAt(0))){result=[fragment,noEmptySpace(),expr.operator]}else{result=join(fragment,expr.operator)}fragment=this.generateExpression(expr.right,currentPrecedence+1,flags);if(expr.operator==="/"&&fragment.toString().charAt(0)==="/"||expr.operator.slice(-1)==="<"&&fragment.toString().slice(0,3)==="!--"){result.push(noEmptySpace());result.push(fragment)}else{result=join(result,fragment)}if(expr.operator==="in"&&!(flags&F_ALLOW_IN)){return["(",result,")"]}return parenthesize(result,currentPrecedence,precedence)},CallExpression:function(expr,precedence,flags){var result,i,iz;result=[this.generateExpression(expr.callee,Precedence.Call,E_TTF)];result.push("(");for(i=0,iz=expr["arguments"].length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")");if(!(flags&F_ALLOW_CALL)){return["(",result,")"]}return parenthesize(result,Precedence.Call,precedence)},NewExpression:function(expr,precedence,flags){var result,length,i,iz,itemFlags;length=expr["arguments"].length;itemFlags=flags&F_ALLOW_UNPARATH_NEW&&!parentheses&&length===0?E_TFT:E_TFF;result=join("new",this.generateExpression(expr.callee,Precedence.New,itemFlags));if(!(flags&F_ALLOW_UNPARATH_NEW)||parentheses||length>0){result.push("(");for(i=0,iz=length;i<iz;++i){result.push(this.generateExpression(expr["arguments"][i],Precedence.Assignment,E_TTT));if(i+1<iz){result.push(","+space)}}result.push(")")}return parenthesize(result,Precedence.New,precedence)},MemberExpression:function(expr,precedence,flags){var result,fragment;result=[this.generateExpression(expr.object,Precedence.Call,flags&F_ALLOW_CALL?E_TTF:E_TFF)];if(expr.computed){result.push("[");result.push(this.generateExpression(expr.property,Precedence.Sequence,flags&F_ALLOW_CALL?E_TTT:E_TFT));result.push("]")}else{if(expr.object.type===Syntax.Literal&&typeof expr.object.value==="number"){fragment=toSourceNodeWhenNeeded(result).toString();if(fragment.indexOf(".")<0&&!/[eExX]/.test(fragment)&&esutils.code.isDecimalDigit(fragment.charCodeAt(fragment.length-1))&&!(fragment.length>=2&&fragment.charCodeAt(0)===48)){result.push(".")}}result.push(".");result.push(generateIdentifier(expr.property))}return parenthesize(result,Precedence.Member,precedence)},UnaryExpression:function(expr,precedence,flags){var result,fragment,rightCharCode,leftSource,leftCharCode;fragment=this.generateExpression(expr.argument,Precedence.Unary,E_TTT);if(space===""){result=join(expr.operator,fragment)}else{result=[expr.operator];if(expr.operator.length>2){result=join(result,fragment)}else{leftSource=toSourceNodeWhenNeeded(result).toString();leftCharCode=leftSource.charCodeAt(leftSource.length-1);rightCharCode=fragment.toString().charCodeAt(0);if((leftCharCode===43||leftCharCode===45)&&leftCharCode===rightCharCode||esutils.code.isIdentifierPart(leftCharCode)&&esutils.code.isIdentifierPart(rightCharCode)){result.push(noEmptySpace());result.push(fragment)}else{result.push(fragment)}}}return parenthesize(result,Precedence.Unary,precedence)},YieldExpression:function(expr,precedence,flags){var result;if(expr.delegate){result="yield*"}else{result="yield"}if(expr.argument){result=join(result,this.generateExpression(expr.argument,Precedence.Yield,E_TTT))}return parenthesize(result,Precedence.Yield,precedence)},AwaitExpression:function(expr,precedence,flags){var result=join(expr.delegate?"await*":"await",this.generateExpression(expr.argument,Precedence.Await,E_TTT));return parenthesize(result,Precedence.Await,precedence)},UpdateExpression:function(expr,precedence,flags){if(expr.prefix){return parenthesize([expr.operator,this.generateExpression(expr.argument,Precedence.Unary,E_TTT)],Precedence.Unary,precedence)}return parenthesize([this.generateExpression(expr.argument,Precedence.Postfix,E_TTT),expr.operator],Precedence.Postfix,precedence)},FunctionExpression:function(expr,precedence,flags){var result=[generateAsyncPrefix(expr,true),"function"];if(expr.id){result.push(generateStarSuffix(expr)||noEmptySpace());result.push(generateIdentifier(expr.id))}else{result.push(generateStarSuffix(expr)||space)}result.push(this.generateFunctionBody(expr));return result},ExportBatchSpecifier:function(expr,precedence,flags){return"*"},ArrayPattern:function(expr,precedence,flags){return this.ArrayExpression(expr,precedence,flags)},ArrayExpression:function(expr,precedence,flags){var result,multiline,that=this;if(!expr.elements.length){return"[]"}multiline=expr.elements.length>1;result=["[",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.elements.length;i<iz;++i){if(!expr.elements[i]){if(multiline){result.push(indent)}if(i+1===iz){result.push(",")}}else{result.push(multiline?indent:"");result.push(that.generateExpression(expr.elements[i],Precedence.Assignment,E_TTT))}if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("]");return result},ClassExpression:function(expr,precedence,flags){var result,fragment;result=["class"];if(expr.id){result=join(result,this.generateExpression(expr.id,Precedence.Sequence,E_TTT))}if(expr.superClass){fragment=join("extends",this.generateExpression(expr.superClass,Precedence.Assignment,E_TTT));result=join(result,fragment)}result.push(space);result.push(this.generateStatement(expr.body,S_TFFT));return result},MethodDefinition:function(expr,precedence,flags){var result,fragment;if(expr["static"]){result=["static"+space]}else{result=[]}if(expr.kind==="get"||expr.kind==="set"){fragment=[join(expr.kind,this.generatePropertyKey(expr.key,expr.computed)),this.generateFunctionBody(expr.value)]}else{fragment=[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed),this.generateFunctionBody(expr.value)]}return join(result,fragment)},Property:function(expr,precedence,flags){if(expr.kind==="get"||expr.kind==="set"){return[expr.kind,noEmptySpace(),this.generatePropertyKey(expr.key,expr.computed),this.generateFunctionBody(expr.value)]}if(expr.shorthand){return this.generatePropertyKey(expr.key,expr.computed)}if(expr.method){return[generateMethodPrefix(expr),this.generatePropertyKey(expr.key,expr.computed),this.generateFunctionBody(expr.value)]}return[this.generatePropertyKey(expr.key,expr.computed),":"+space,this.generateExpression(expr.value,Precedence.Assignment,E_TTT)]},ObjectExpression:function(expr,precedence,flags){var multiline,result,fragment,that=this;if(!expr.properties.length){return"{}"}multiline=expr.properties.length>1;withIndent(function(){fragment=that.generateExpression(expr.properties[0],Precedence.Sequence,E_TTT)});if(!multiline){if(!hasLineTerminator(toSourceNodeWhenNeeded(fragment).toString())){return["{",space,fragment,space,"}"]}}withIndent(function(indent){var i,iz;result=["{",newline,indent,fragment];if(multiline){result.push(","+newline);for(i=1,iz=expr.properties.length;i<iz;++i){result.push(indent);result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+newline)}}}});if(!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(base);result.push("}");return result},ObjectPattern:function(expr,precedence,flags){var result,i,iz,multiline,property,that=this;if(!expr.properties.length){return"{}"}multiline=false;if(expr.properties.length===1){property=expr.properties[0];if(property.value.type!==Syntax.Identifier){multiline=true}}else{for(i=0,iz=expr.properties.length;i<iz;++i){property=expr.properties[i];if(!property.shorthand){multiline=true;break}}}result=["{",multiline?newline:""];withIndent(function(indent){var i,iz;for(i=0,iz=expr.properties.length;i<iz;++i){result.push(multiline?indent:"");result.push(that.generateExpression(expr.properties[i],Precedence.Sequence,E_TTT));if(i+1<iz){result.push(","+(multiline?newline:space))}}});if(multiline&&!endsWithLineTerminator(toSourceNodeWhenNeeded(result).toString())){result.push(newline)}result.push(multiline?base:"");result.push("}");return result},ThisExpression:function(expr,precedence,flags){return"this"},Identifier:function(expr,precedence,flags){return generateIdentifier(expr)},ImportDefaultSpecifier:function(expr,precedence,flags){return generateIdentifier(expr.id)},ImportNamespaceSpecifier:function(expr,precedence,flags){var result=["*"];if(expr.id){result.push(space+"as"+noEmptySpace()+generateIdentifier(expr.id))}return result},ImportSpecifier:function(expr,precedence,flags){return this.ExportSpecifier(expr,precedence,flags)},ExportSpecifier:function(expr,precedence,flags){var result=[expr.id.name];if(expr.name){result.push(noEmptySpace()+"as"+noEmptySpace()+generateIdentifier(expr.name))}return result},Literal:function(expr,precedence,flags){var raw;if(expr.hasOwnProperty("raw")&&parse&&extra.raw){try{raw=parse(expr.raw).body[0].expression;if(raw.type===Syntax.Literal){if(raw.value===expr.value){return expr.raw}}}catch(e){}}if(expr.value===null){return"null"}if(typeof expr.value==="string"){return escapeString(expr.value)}if(typeof expr.value==="number"){return generateNumber(expr.value)}if(typeof expr.value==="boolean"){return expr.value?"true":"false"}return generateRegExp(expr.value)},GeneratorExpression:function(expr,precedence,flags){return this.ComprehensionExpression(expr,precedence,flags)},ComprehensionExpression:function(expr,precedence,flags){var result,i,iz,fragment,that=this;result=expr.type===Syntax.GeneratorExpression?["("]:["["];if(extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result.push(fragment)}if(expr.blocks){withIndent(function(){for(i=0,iz=expr.blocks.length;i<iz;++i){
fragment=that.generateExpression(expr.blocks[i],Precedence.Sequence,E_TTT);if(i>0||extra.moz.comprehensionExpressionStartsWithAssignment){result=join(result,fragment)}else{result.push(fragment)}}})}if(expr.filter){result=join(result,"if"+space);fragment=this.generateExpression(expr.filter,Precedence.Sequence,E_TTT);result=join(result,["(",fragment,")"])}if(!extra.moz.comprehensionExpressionStartsWithAssignment){fragment=this.generateExpression(expr.body,Precedence.Assignment,E_TTT);result=join(result,fragment)}result.push(expr.type===Syntax.GeneratorExpression?")":"]");return result},ComprehensionBlock:function(expr,precedence,flags){var fragment;if(expr.left.type===Syntax.VariableDeclaration){fragment=[expr.left.kind,noEmptySpace(),this.generateStatement(expr.left.declarations[0],S_FFFF)]}else{fragment=this.generateExpression(expr.left,Precedence.Call,E_TTT)}fragment=join(fragment,expr.of?"of":"in");fragment=join(fragment,this.generateExpression(expr.right,Precedence.Sequence,E_TTT));return["for"+space+"(",fragment,")"]},SpreadElement:function(expr,precedence,flags){return["...",this.generateExpression(expr.argument,Precedence.Assignment,E_TTT)]},TaggedTemplateExpression:function(expr,precedence,flags){var itemFlags=E_TTF;if(!(flags&F_ALLOW_CALL)){itemFlags=E_TFF}var result=[this.generateExpression(expr.tag,Precedence.Call,itemFlags),this.generateExpression(expr.quasi,Precedence.Primary,E_FFT)];return parenthesize(result,Precedence.TaggedTemplate,precedence)},TemplateElement:function(expr,precedence,flags){return expr.value.raw},TemplateLiteral:function(expr,precedence,flags){var result,i,iz;result=["`"];for(i=0,iz=expr.quasis.length;i<iz;++i){result.push(this.generateExpression(expr.quasis[i],Precedence.Primary,E_TTT));if(i+1<iz){result.push("${"+space);result.push(this.generateExpression(expr.expressions[i],Precedence.Sequence,E_TTT));result.push(space+"}")}}result.push("`");return result},ModuleSpecifier:function(expr,precedence,flags){return this.Literal(expr,precedence,flags)}};merge(CodeGenerator.prototype,CodeGenerator.Expression);CodeGenerator.prototype.generateExpression=function(expr,precedence,flags){var result,type;type=expr.type||Syntax.Property;if(extra.verbatim&&expr.hasOwnProperty(extra.verbatim)){return generateVerbatim(expr,precedence)}result=this[type](expr,precedence,flags);if(extra.comment){result=addComments(expr,result)}return toSourceNodeWhenNeeded(result,expr)};CodeGenerator.prototype.generateStatement=function(stmt,flags){var result,fragment;result=this[stmt.type](stmt,flags);if(extra.comment){result=addComments(stmt,result)}fragment=toSourceNodeWhenNeeded(result).toString();if(stmt.type===Syntax.Program&&!safeConcatenation&&newline===""&&fragment.charAt(fragment.length-1)==="\n"){result=sourceMap?toSourceNodeWhenNeeded(result).replaceRight(/\s+$/,""):fragment.replace(/\s+$/,"")}return toSourceNodeWhenNeeded(result,stmt)};function generateInternal(node){var codegen;codegen=new CodeGenerator;if(isStatement(node)){return codegen.generateStatement(node,S_TFFF)}if(isExpression(node)){return codegen.generateExpression(node,Precedence.Sequence,E_TTT)}throw new Error("Unknown node type: "+node.type)}function generate(node,options){var defaultOptions=getDefaultOptions(),result,pair;if(options!=null){if(typeof options.indent==="string"){defaultOptions.format.indent.style=options.indent}if(typeof options.base==="number"){defaultOptions.format.indent.base=options.base}options=updateDeeply(defaultOptions,options);indent=options.format.indent.style;if(typeof options.base==="string"){base=options.base}else{base=stringRepeat(indent,options.format.indent.base)}}else{options=defaultOptions;indent=options.format.indent.style;base=stringRepeat(indent,options.format.indent.base)}json=options.format.json;renumber=options.format.renumber;hexadecimal=json?false:options.format.hexadecimal;quotes=json?"double":options.format.quotes;escapeless=options.format.escapeless;newline=options.format.newline;space=options.format.space;if(options.format.compact){newline=space=indent=base=""}parentheses=options.format.parentheses;semicolons=options.format.semicolons;safeConcatenation=options.format.safeConcatenation;directive=options.directive;parse=json?null:options.parse;sourceMap=options.sourceMap;sourceCode=options.sourceCode;preserveBlankLines=options.format.preserveBlankLines&&sourceCode!==null;extra=options;if(sourceMap){if(!exports.browser){SourceNode=require("source-map").SourceNode}else{SourceNode=global.sourceMap.SourceNode}}result=generateInternal(node);if(!sourceMap){pair={code:result.toString(),map:null};return options.sourceMapWithCode?pair:pair.code}pair=result.toStringWithSourceMap({file:options.file,sourceRoot:options.sourceMapRoot});if(options.sourceContent){pair.map.setSourceContent(options.sourceMap,options.sourceContent)}if(options.sourceMapWithCode){return pair}return pair.map.toString()}FORMAT_MINIFY={indent:{style:"",base:0},renumber:true,hexadecimal:true,quotes:"auto",escapeless:true,compact:true,parentheses:false,semicolons:false};FORMAT_DEFAULTS=getDefaultOptions().format;exports.version=require("./package.json").version;exports.generate=generate;exports.attachComments=estraverse.attachComments;exports.Precedence=updateDeeply({},Precedence);exports.browser=false;exports.FORMAT_MINIFY=FORMAT_MINIFY;exports.FORMAT_DEFAULTS=FORMAT_DEFAULTS})()}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./package.json":121,estraverse:105,esutils:109,"source-map":110}],105:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.estraverse={})}})(this,function clone(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,objectCreate,objectKeys,BREAK,SKIP,REMOVE;function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);objectCreate=Object.create||function(){function F(){}return function(o){F.prototype=o;return new F}}();objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function extend(to,from){var keys=objectKeys(from),key,i,len;for(i=0,len=keys.length;i<len;i+=1){key=keys[i];to[key]=from[key]}return to}Syntax={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportBatchSpecifier:"ExportBatchSpecifier",ExportDeclaration:"ExportDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};VisitorKeys={AssignmentExpression:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","defaults","rest","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","body","superClass"],ClassExpression:["id","body","superClass"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportBatchSpecifier:[],ExportDeclaration:["declaration","specifiers","source"],ExportSpecifier:["id","name"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","defaults","rest","body"],FunctionExpression:["id","params","defaults","rest","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["id"],ImportNamespaceSpecifier:["id"],ImportSpecifier:["id","name"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handlers","handler","guardedHandlers","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};REMOVE={};VisitorOption={Break:BREAK,Skip:SKIP,Remove:REMOVE};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};Reference.prototype.remove=function remove(){if(isArray(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.type=function(){var node=this.current();return node.type||this.__current.wrap};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.remove=function(){this.notify(REMOVE)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=visitor.fallback==="iteration";this.__keys=VisitorKeys;if(visitor.keys){this.__keys=extend(objectCreate(this.__keys),visitor.keys)}};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===key}Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",null)}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,null)}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,null))}}}}};Controller.prototype.replace=function replace(root,visitor){function removeElem(element){var i,key,nextElem,parent;if(element.ref.remove()){key=element.ref.key;parent=element.ref.parent;i=worklist.length;while(i--){nextElem=worklist[i];if(nextElem.ref&&nextElem.ref.parent===parent){if(nextElem.ref.key<key){break}--nextElem.ref.key}}}}var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target)}if(this.__state===REMOVE||target===REMOVE){removeElem(element)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target);element.node=target}if(this.__state===REMOVE||target===REMOVE){removeElem(element);element.node=null}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)))}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version="1.8.1-dev";exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller;exports.cloneEnvironment=function(){return clone({})};return exports})},{}],106:[function(require,module,exports){(function(){"use strict";function isExpression(node){if(node==null){return false}switch(node.type){case"ArrayExpression":case"AssignmentExpression":case"BinaryExpression":case"CallExpression":case"ConditionalExpression":case"FunctionExpression":case"Identifier":case"Literal":case"LogicalExpression":case"MemberExpression":case"NewExpression":case"ObjectExpression":case"SequenceExpression":case"ThisExpression":case"UnaryExpression":case"UpdateExpression":return true}return false}function isIterationStatement(node){if(node==null){return false}switch(node.type){case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"WhileStatement":return true}return false}function isStatement(node){if(node==null){return false}switch(node.type){case"BlockStatement":case"BreakStatement":case"ContinueStatement":case"DebuggerStatement":case"DoWhileStatement":case"EmptyStatement":case"ExpressionStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"ReturnStatement":case"SwitchStatement":case"ThrowStatement":case"TryStatement":case"VariableDeclaration":case"WhileStatement":case"WithStatement":return true}return false}function isSourceElement(node){return isStatement(node)||node!=null&&node.type==="FunctionDeclaration"}function trailingStatement(node){switch(node.type){case"IfStatement":if(node.alternate!=null){return node.alternate}return node.consequent;case"LabeledStatement":case"ForStatement":case"ForInStatement":case"WhileStatement":case"WithStatement":return node.body}return null}function isProblematicIfStatement(node){var current;if(node.type!=="IfStatement"){return false}if(node.alternate==null){return false}current=node.consequent;do{if(current.type==="IfStatement"){if(current.alternate==null){return true}}current=trailingStatement(current)}while(current);return false}module.exports={isExpression:isExpression,isStatement:isStatement,isIterationStatement:isIterationStatement,isSourceElement:isSourceElement,isProblematicIfStatement:isProblematicIfStatement,trailingStatement:trailingStatement}})()},{}],107:[function(require,module,exports){(function(){"use strict";var Regex,NON_ASCII_WHITESPACES;Regex={NonAsciiIdentifierStart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return isDecimalDigit(ch)||97<=ch&&ch<=102||65<=ch&&ch<=70}function isOctalDigit(ch){return ch>=48&&ch<=55}NON_ASCII_WHITESPACES=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&NON_ASCII_WHITESPACES.indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch>=97&&ch<=122||ch>=65&&ch<=90||ch===36||ch===95||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch>=97&&ch<=122||ch>=65&&ch<=90||ch>=48&&ch<=57||ch===36||ch===95||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}module.exports={isDecimalDigit:isDecimalDigit,isHexDigit:isHexDigit,isOctalDigit:isOctalDigit,isWhiteSpace:isWhiteSpace,isLineTerminator:isLineTerminator,isIdentifierStart:isIdentifierStart,isIdentifierPart:isIdentifierPart}})()},{}],108:[function(require,module,exports){(function(){"use strict";var code=require("./code");function isStrictModeReservedWordES6(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"let":return true;default:return false}}function isKeywordES5(id,strict){if(!strict&&id==="yield"){return false}return isKeywordES6(id,strict)}function isKeywordES6(id,strict){if(strict&&isStrictModeReservedWordES6(id)){return true}switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function isReservedWordES5(id,strict){return id==="null"||id==="true"||id==="false"||isKeywordES5(id,strict)}function isReservedWordES6(id,strict){return id==="null"||id==="true"||id==="false"||isKeywordES6(id,strict)}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isIdentifierName(id){var i,iz,ch;if(id.length===0){return false}ch=id.charCodeAt(0);if(!code.isIdentifierStart(ch)||ch===92){return false}for(i=1,iz=id.length;i<iz;++i){ch=id.charCodeAt(i);if(!code.isIdentifierPart(ch)||ch===92){return false}}return true}function isIdentifierES5(id,strict){return isIdentifierName(id)&&!isReservedWordES5(id,strict)}function isIdentifierES6(id,strict){return isIdentifierName(id)&&!isReservedWordES6(id,strict)}module.exports={isKeywordES5:isKeywordES5,isKeywordES6:isKeywordES6,isReservedWordES5:isReservedWordES5,isReservedWordES6:isReservedWordES6,isRestrictedWord:isRestrictedWord,isIdentifierName:isIdentifierName,isIdentifierES5:isIdentifierES5,isIdentifierES6:isIdentifierES6}})()},{"./code":107}],109:[function(require,module,exports){(function(){"use strict";exports.ast=require("./ast");exports.code=require("./code");exports.keyword=require("./keyword")})()},{"./ast":106,"./code":107,"./keyword":108}],110:[function(require,module,exports){exports.SourceMapGenerator=require("./source-map/source-map-generator").SourceMapGenerator;exports.SourceMapConsumer=require("./source-map/source-map-consumer").SourceMapConsumer;exports.SourceNode=require("./source-map/source-node").SourceNode},{"./source-map/source-map-consumer":116,"./source-map/source-map-generator":117,"./source-map/source-node":118}],111:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function ArraySet(){this._array=[];this._set={}}ArraySet.fromArray=function ArraySet_fromArray(aArray,aAllowDuplicates){var set=new ArraySet;for(var i=0,len=aArray.length;i<len;i++){set.add(aArray[i],aAllowDuplicates)}return set};ArraySet.prototype.add=function ArraySet_add(aStr,aAllowDuplicates){var isDuplicate=this.has(aStr);var idx=this._array.length;if(!isDuplicate||aAllowDuplicates){this._array.push(aStr)}if(!isDuplicate){this._set[util.toSetString(aStr)]=idx}};ArraySet.prototype.has=function ArraySet_has(aStr){return Object.prototype.hasOwnProperty.call(this._set,util.toSetString(aStr))};ArraySet.prototype.indexOf=function ArraySet_indexOf(aStr){if(this.has(aStr)){return this._set[util.toSetString(aStr)]}throw new Error('"'+aStr+'" is not in the set.')};ArraySet.prototype.at=function ArraySet_at(aIdx){if(aIdx>=0&&aIdx<this._array.length){return this._array[aIdx]}throw new Error("No element indexed by "+aIdx)};ArraySet.prototype.toArray=function ArraySet_toArray(){return this._array.slice()};exports.ArraySet=ArraySet})},{"./util":119,amdefine:120}],112:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64=require("./base64");var VLQ_BASE_SHIFT=5;var VLQ_BASE=1<<VLQ_BASE_SHIFT;var VLQ_BASE_MASK=VLQ_BASE-1;var VLQ_CONTINUATION_BIT=VLQ_BASE;function toVLQSigned(aValue){return aValue<0?(-aValue<<1)+1:(aValue<<1)+0}function fromVLQSigned(aValue){var isNegative=(aValue&1)===1;var shifted=aValue>>1;return isNegative?-shifted:shifted}exports.encode=function base64VLQ_encode(aValue){var encoded="";var digit;var vlq=toVLQSigned(aValue);do{digit=vlq&VLQ_BASE_MASK;vlq>>>=VLQ_BASE_SHIFT;if(vlq>0){digit|=VLQ_CONTINUATION_BIT}encoded+=base64.encode(digit)}while(vlq>0);return encoded};exports.decode=function base64VLQ_decode(aStr,aOutParam){var i=0;var strLen=aStr.length;var result=0;var shift=0;var continuation,digit;do{if(i>=strLen){throw new Error("Expected more digits in base 64 VLQ value.")}digit=base64.decode(aStr.charAt(i++));continuation=!!(digit&VLQ_CONTINUATION_BIT);digit&=VLQ_BASE_MASK;result=result+(digit<<shift);shift+=VLQ_BASE_SHIFT}while(continuation);aOutParam.value=fromVLQSigned(result);aOutParam.rest=aStr.slice(i)}})},{"./base64":113,amdefine:120}],113:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var charToIntMap={};var intToCharMap={};"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(function(ch,index){charToIntMap[ch]=index;intToCharMap[index]=ch});exports.encode=function base64_encode(aNumber){if(aNumber in intToCharMap){return intToCharMap[aNumber]}throw new TypeError("Must be between 0 and 63: "+aNumber)};exports.decode=function base64_decode(aChar){if(aChar in charToIntMap){return charToIntMap[aChar]}throw new TypeError("Not a valid base 64 digit: "+aChar)}})},{amdefine:120}],114:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function recursiveSearch(aLow,aHigh,aNeedle,aHaystack,aCompare){var mid=Math.floor((aHigh-aLow)/2)+aLow;var cmp=aCompare(aNeedle,aHaystack[mid],true);if(cmp===0){return mid}else if(cmp>0){if(aHigh-mid>1){return recursiveSearch(mid,aHigh,aNeedle,aHaystack,aCompare);
}return mid}else{if(mid-aLow>1){return recursiveSearch(aLow,mid,aNeedle,aHaystack,aCompare)}return aLow<0?-1:aLow}}exports.search=function search(aNeedle,aHaystack,aCompare){if(aHaystack.length===0){return-1}return recursiveSearch(-1,aHaystack.length,aNeedle,aHaystack,aCompare)}})},{amdefine:120}],115:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");function generatedPositionAfter(mappingA,mappingB){var lineA=mappingA.generatedLine;var lineB=mappingB.generatedLine;var columnA=mappingA.generatedColumn;var columnB=mappingB.generatedColumn;return lineB>lineA||lineB==lineA&&columnB>=columnA||util.compareByGeneratedPositions(mappingA,mappingB)<=0}function MappingList(){this._array=[];this._sorted=true;this._last={generatedLine:-1,generatedColumn:0}}MappingList.prototype.unsortedForEach=function MappingList_forEach(aCallback,aThisArg){this._array.forEach(aCallback,aThisArg)};MappingList.prototype.add=function MappingList_add(aMapping){var mapping;if(generatedPositionAfter(this._last,aMapping)){this._last=aMapping;this._array.push(aMapping)}else{this._sorted=false;this._array.push(aMapping)}};MappingList.prototype.toArray=function MappingList_toArray(){if(!this._sorted){this._array.sort(util.compareByGeneratedPositions);this._sorted=true}return this._array};exports.MappingList=MappingList})},{"./util":119,amdefine:120}],116:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var util=require("./util");var binarySearch=require("./binary-search");var ArraySet=require("./array-set").ArraySet;var base64VLQ=require("./base64-vlq");function SourceMapConsumer(aSourceMap){var sourceMap=aSourceMap;if(typeof aSourceMap==="string"){sourceMap=JSON.parse(aSourceMap.replace(/^\)\]\}'/,""))}var version=util.getArg(sourceMap,"version");var sources=util.getArg(sourceMap,"sources");var names=util.getArg(sourceMap,"names",[]);var sourceRoot=util.getArg(sourceMap,"sourceRoot",null);var sourcesContent=util.getArg(sourceMap,"sourcesContent",null);var mappings=util.getArg(sourceMap,"mappings");var file=util.getArg(sourceMap,"file",null);if(version!=this._version){throw new Error("Unsupported version: "+version)}sources=sources.map(util.normalize);this._names=ArraySet.fromArray(names,true);this._sources=ArraySet.fromArray(sources,true);this.sourceRoot=sourceRoot;this.sourcesContent=sourcesContent;this._mappings=mappings;this.file=file}SourceMapConsumer.fromSourceMap=function SourceMapConsumer_fromSourceMap(aSourceMap){var smc=Object.create(SourceMapConsumer.prototype);smc._names=ArraySet.fromArray(aSourceMap._names.toArray(),true);smc._sources=ArraySet.fromArray(aSourceMap._sources.toArray(),true);smc.sourceRoot=aSourceMap._sourceRoot;smc.sourcesContent=aSourceMap._generateSourcesContent(smc._sources.toArray(),smc.sourceRoot);smc.file=aSourceMap._file;smc.__generatedMappings=aSourceMap._mappings.toArray().slice();smc.__originalMappings=aSourceMap._mappings.toArray().slice().sort(util.compareByOriginalPositions);return smc};SourceMapConsumer.prototype._version=3;Object.defineProperty(SourceMapConsumer.prototype,"sources",{get:function(){return this._sources.toArray().map(function(s){return this.sourceRoot!=null?util.join(this.sourceRoot,s):s},this)}});SourceMapConsumer.prototype.__generatedMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{get:function(){if(!this.__generatedMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__generatedMappings}});SourceMapConsumer.prototype.__originalMappings=null;Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{get:function(){if(!this.__originalMappings){this.__generatedMappings=[];this.__originalMappings=[];this._parseMappings(this._mappings,this.sourceRoot)}return this.__originalMappings}});SourceMapConsumer.prototype._nextCharIsMappingSeparator=function SourceMapConsumer_nextCharIsMappingSeparator(aStr){var c=aStr.charAt(0);return c===";"||c===","};SourceMapConsumer.prototype._parseMappings=function SourceMapConsumer_parseMappings(aStr,aSourceRoot){var generatedLine=1;var previousGeneratedColumn=0;var previousOriginalLine=0;var previousOriginalColumn=0;var previousSource=0;var previousName=0;var str=aStr;var temp={};var mapping;while(str.length>0){if(str.charAt(0)===";"){generatedLine++;str=str.slice(1);previousGeneratedColumn=0}else if(str.charAt(0)===","){str=str.slice(1)}else{mapping={};mapping.generatedLine=generatedLine;base64VLQ.decode(str,temp);mapping.generatedColumn=previousGeneratedColumn+temp.value;previousGeneratedColumn=mapping.generatedColumn;str=temp.rest;if(str.length>0&&!this._nextCharIsMappingSeparator(str)){base64VLQ.decode(str,temp);mapping.source=this._sources.at(previousSource+temp.value);previousSource+=temp.value;str=temp.rest;if(str.length===0||this._nextCharIsMappingSeparator(str)){throw new Error("Found a source, but no line and column")}base64VLQ.decode(str,temp);mapping.originalLine=previousOriginalLine+temp.value;previousOriginalLine=mapping.originalLine;mapping.originalLine+=1;str=temp.rest;if(str.length===0||this._nextCharIsMappingSeparator(str)){throw new Error("Found a source and line, but no column")}base64VLQ.decode(str,temp);mapping.originalColumn=previousOriginalColumn+temp.value;previousOriginalColumn=mapping.originalColumn;str=temp.rest;if(str.length>0&&!this._nextCharIsMappingSeparator(str)){base64VLQ.decode(str,temp);mapping.name=this._names.at(previousName+temp.value);previousName+=temp.value;str=temp.rest}}this.__generatedMappings.push(mapping);if(typeof mapping.originalLine==="number"){this.__originalMappings.push(mapping)}}}this.__generatedMappings.sort(util.compareByGeneratedPositions);this.__originalMappings.sort(util.compareByOriginalPositions)};SourceMapConsumer.prototype._findMapping=function SourceMapConsumer_findMapping(aNeedle,aMappings,aLineName,aColumnName,aComparator){if(aNeedle[aLineName]<=0){throw new TypeError("Line must be greater than or equal to 1, got "+aNeedle[aLineName])}if(aNeedle[aColumnName]<0){throw new TypeError("Column must be greater than or equal to 0, got "+aNeedle[aColumnName])}return binarySearch.search(aNeedle,aMappings,aComparator)};SourceMapConsumer.prototype.computeColumnSpans=function SourceMapConsumer_computeColumnSpans(){for(var index=0;index<this._generatedMappings.length;++index){var mapping=this._generatedMappings[index];if(index+1<this._generatedMappings.length){var nextMapping=this._generatedMappings[index+1];if(mapping.generatedLine===nextMapping.generatedLine){mapping.lastGeneratedColumn=nextMapping.generatedColumn-1;continue}}mapping.lastGeneratedColumn=Infinity}};SourceMapConsumer.prototype.originalPositionFor=function SourceMapConsumer_originalPositionFor(aArgs){var needle={generatedLine:util.getArg(aArgs,"line"),generatedColumn:util.getArg(aArgs,"column")};var index=this._findMapping(needle,this._generatedMappings,"generatedLine","generatedColumn",util.compareByGeneratedPositions);if(index>=0){var mapping=this._generatedMappings[index];if(mapping.generatedLine===needle.generatedLine){var source=util.getArg(mapping,"source",null);if(source!=null&&this.sourceRoot!=null){source=util.join(this.sourceRoot,source)}return{source:source,line:util.getArg(mapping,"originalLine",null),column:util.getArg(mapping,"originalColumn",null),name:util.getArg(mapping,"name",null)}}}return{source:null,line:null,column:null,name:null}};SourceMapConsumer.prototype.sourceContentFor=function SourceMapConsumer_sourceContentFor(aSource){if(!this.sourcesContent){return null}if(this.sourceRoot!=null){aSource=util.relative(this.sourceRoot,aSource)}if(this._sources.has(aSource)){return this.sourcesContent[this._sources.indexOf(aSource)]}var url;if(this.sourceRoot!=null&&(url=util.urlParse(this.sourceRoot))){var fileUriAbsPath=aSource.replace(/^file:\/\//,"");if(url.scheme=="file"&&this._sources.has(fileUriAbsPath)){return this.sourcesContent[this._sources.indexOf(fileUriAbsPath)]}if((!url.path||url.path=="/")&&this._sources.has("/"+aSource)){return this.sourcesContent[this._sources.indexOf("/"+aSource)]}}throw new Error('"'+aSource+'" is not in the SourceMap.')};SourceMapConsumer.prototype.generatedPositionFor=function SourceMapConsumer_generatedPositionFor(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:util.getArg(aArgs,"column")};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);if(index>=0){var mapping=this._originalMappings[index];return{line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};SourceMapConsumer.prototype.allGeneratedPositionsFor=function SourceMapConsumer_allGeneratedPositionsFor(aArgs){var needle={source:util.getArg(aArgs,"source"),originalLine:util.getArg(aArgs,"line"),originalColumn:Infinity};if(this.sourceRoot!=null){needle.source=util.relative(this.sourceRoot,needle.source)}var mappings=[];var index=this._findMapping(needle,this._originalMappings,"originalLine","originalColumn",util.compareByOriginalPositions);if(index>=0){var mapping=this._originalMappings[index];while(mapping&&mapping.originalLine===needle.originalLine){mappings.push({line:util.getArg(mapping,"generatedLine",null),column:util.getArg(mapping,"generatedColumn",null),lastColumn:util.getArg(mapping,"lastGeneratedColumn",null)});mapping=this._originalMappings[--index]}}return mappings.reverse()};SourceMapConsumer.GENERATED_ORDER=1;SourceMapConsumer.ORIGINAL_ORDER=2;SourceMapConsumer.prototype.eachMapping=function SourceMapConsumer_eachMapping(aCallback,aContext,aOrder){var context=aContext||null;var order=aOrder||SourceMapConsumer.GENERATED_ORDER;var mappings;switch(order){case SourceMapConsumer.GENERATED_ORDER:mappings=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:mappings=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var sourceRoot=this.sourceRoot;mappings.map(function(mapping){var source=mapping.source;if(source!=null&&sourceRoot!=null){source=util.join(sourceRoot,source)}return{source:source,generatedLine:mapping.generatedLine,generatedColumn:mapping.generatedColumn,originalLine:mapping.originalLine,originalColumn:mapping.originalColumn,name:mapping.name}}).forEach(aCallback,context)};exports.SourceMapConsumer=SourceMapConsumer})},{"./array-set":111,"./base64-vlq":112,"./binary-search":114,"./util":119,amdefine:120}],117:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var base64VLQ=require("./base64-vlq");var util=require("./util");var ArraySet=require("./array-set").ArraySet;var MappingList=require("./mapping-list").MappingList;function SourceMapGenerator(aArgs){if(!aArgs){aArgs={}}this._file=util.getArg(aArgs,"file",null);this._sourceRoot=util.getArg(aArgs,"sourceRoot",null);this._skipValidation=util.getArg(aArgs,"skipValidation",false);this._sources=new ArraySet;this._names=new ArraySet;this._mappings=new MappingList;this._sourcesContents=null}SourceMapGenerator.prototype._version=3;SourceMapGenerator.fromSourceMap=function SourceMapGenerator_fromSourceMap(aSourceMapConsumer){var sourceRoot=aSourceMapConsumer.sourceRoot;var generator=new SourceMapGenerator({file:aSourceMapConsumer.file,sourceRoot:sourceRoot});aSourceMapConsumer.eachMapping(function(mapping){var newMapping={generated:{line:mapping.generatedLine,column:mapping.generatedColumn}};if(mapping.source!=null){newMapping.source=mapping.source;if(sourceRoot!=null){newMapping.source=util.relative(sourceRoot,newMapping.source)}newMapping.original={line:mapping.originalLine,column:mapping.originalColumn};if(mapping.name!=null){newMapping.name=mapping.name}}generator.addMapping(newMapping)});aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){generator.setSourceContent(sourceFile,content)}});return generator};SourceMapGenerator.prototype.addMapping=function SourceMapGenerator_addMapping(aArgs){var generated=util.getArg(aArgs,"generated");var original=util.getArg(aArgs,"original",null);var source=util.getArg(aArgs,"source",null);var name=util.getArg(aArgs,"name",null);if(!this._skipValidation){this._validateMapping(generated,original,source,name)}if(source!=null&&!this._sources.has(source)){this._sources.add(source)}if(name!=null&&!this._names.has(name)){this._names.add(name)}this._mappings.add({generatedLine:generated.line,generatedColumn:generated.column,originalLine:original!=null&&original.line,originalColumn:original!=null&&original.column,source:source,name:name})};SourceMapGenerator.prototype.setSourceContent=function SourceMapGenerator_setSourceContent(aSourceFile,aSourceContent){var source=aSourceFile;if(this._sourceRoot!=null){source=util.relative(this._sourceRoot,source)}if(aSourceContent!=null){if(!this._sourcesContents){this._sourcesContents={}}this._sourcesContents[util.toSetString(source)]=aSourceContent}else if(this._sourcesContents){delete this._sourcesContents[util.toSetString(source)];if(Object.keys(this._sourcesContents).length===0){this._sourcesContents=null}}};SourceMapGenerator.prototype.applySourceMap=function SourceMapGenerator_applySourceMap(aSourceMapConsumer,aSourceFile,aSourceMapPath){var sourceFile=aSourceFile;if(aSourceFile==null){if(aSourceMapConsumer.file==null){throw new Error("SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, "+'or the source map\'s "file" property. Both were omitted.')}sourceFile=aSourceMapConsumer.file}var sourceRoot=this._sourceRoot;if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}var newSources=new ArraySet;var newNames=new ArraySet;this._mappings.unsortedForEach(function(mapping){if(mapping.source===sourceFile&&mapping.originalLine!=null){var original=aSourceMapConsumer.originalPositionFor({line:mapping.originalLine,column:mapping.originalColumn});if(original.source!=null){mapping.source=original.source;if(aSourceMapPath!=null){mapping.source=util.join(aSourceMapPath,mapping.source)}if(sourceRoot!=null){mapping.source=util.relative(sourceRoot,mapping.source)}mapping.originalLine=original.line;mapping.originalColumn=original.column;if(original.name!=null){mapping.name=original.name}}}var source=mapping.source;if(source!=null&&!newSources.has(source)){newSources.add(source)}var name=mapping.name;if(name!=null&&!newNames.has(name)){newNames.add(name)}},this);this._sources=newSources;this._names=newNames;aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aSourceMapPath!=null){sourceFile=util.join(aSourceMapPath,sourceFile)}if(sourceRoot!=null){sourceFile=util.relative(sourceRoot,sourceFile)}this.setSourceContent(sourceFile,content)}},this)};SourceMapGenerator.prototype._validateMapping=function SourceMapGenerator_validateMapping(aGenerated,aOriginal,aSource,aName){if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aGenerated.line>0&&aGenerated.column>=0&&!aOriginal&&!aSource&&!aName){return}else if(aGenerated&&"line"in aGenerated&&"column"in aGenerated&&aOriginal&&"line"in aOriginal&&"column"in aOriginal&&aGenerated.line>0&&aGenerated.column>=0&&aOriginal.line>0&&aOriginal.column>=0&&aSource){return}else{throw new Error("Invalid mapping: "+JSON.stringify({generated:aGenerated,source:aSource,original:aOriginal,name:aName}))}};SourceMapGenerator.prototype._serializeMappings=function SourceMapGenerator_serializeMappings(){var previousGeneratedColumn=0;var previousGeneratedLine=1;var previousOriginalColumn=0;var previousOriginalLine=0;var previousName=0;var previousSource=0;var result="";var mapping;var mappings=this._mappings.toArray();for(var i=0,len=mappings.length;i<len;i++){mapping=mappings[i];if(mapping.generatedLine!==previousGeneratedLine){previousGeneratedColumn=0;while(mapping.generatedLine!==previousGeneratedLine){result+=";";previousGeneratedLine++}}else{if(i>0){if(!util.compareByGeneratedPositions(mapping,mappings[i-1])){continue}result+=","}}result+=base64VLQ.encode(mapping.generatedColumn-previousGeneratedColumn);previousGeneratedColumn=mapping.generatedColumn;if(mapping.source!=null){result+=base64VLQ.encode(this._sources.indexOf(mapping.source)-previousSource);previousSource=this._sources.indexOf(mapping.source);result+=base64VLQ.encode(mapping.originalLine-1-previousOriginalLine);previousOriginalLine=mapping.originalLine-1;result+=base64VLQ.encode(mapping.originalColumn-previousOriginalColumn);previousOriginalColumn=mapping.originalColumn;if(mapping.name!=null){result+=base64VLQ.encode(this._names.indexOf(mapping.name)-previousName);previousName=this._names.indexOf(mapping.name)}}}return result};SourceMapGenerator.prototype._generateSourcesContent=function SourceMapGenerator_generateSourcesContent(aSources,aSourceRoot){return aSources.map(function(source){if(!this._sourcesContents){return null}if(aSourceRoot!=null){source=util.relative(aSourceRoot,source)}var key=util.toSetString(source);return Object.prototype.hasOwnProperty.call(this._sourcesContents,key)?this._sourcesContents[key]:null},this)};SourceMapGenerator.prototype.toJSON=function SourceMapGenerator_toJSON(){var map={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};if(this._file!=null){map.file=this._file}if(this._sourceRoot!=null){map.sourceRoot=this._sourceRoot}if(this._sourcesContents){map.sourcesContent=this._generateSourcesContent(map.sources,map.sourceRoot)}return map};SourceMapGenerator.prototype.toString=function SourceMapGenerator_toString(){return JSON.stringify(this)};exports.SourceMapGenerator=SourceMapGenerator})},{"./array-set":111,"./base64-vlq":112,"./mapping-list":115,"./util":119,amdefine:120}],118:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){var SourceMapGenerator=require("./source-map-generator").SourceMapGenerator;var util=require("./util");var REGEX_NEWLINE=/(\r?\n)/;var NEWLINE_CODE=10;var isSourceNode="$$$isSourceNode$$$";function SourceNode(aLine,aColumn,aSource,aChunks,aName){this.children=[];this.sourceContents={};this.line=aLine==null?null:aLine;this.column=aColumn==null?null:aColumn;this.source=aSource==null?null:aSource;this.name=aName==null?null:aName;this[isSourceNode]=true;if(aChunks!=null)this.add(aChunks)}SourceNode.fromStringWithSourceMap=function SourceNode_fromStringWithSourceMap(aGeneratedCode,aSourceMapConsumer,aRelativePath){var node=new SourceNode;var remainingLines=aGeneratedCode.split(REGEX_NEWLINE);var shiftNextLine=function(){var lineContents=remainingLines.shift();var newLine=remainingLines.shift()||"";return lineContents+newLine};var lastGeneratedLine=1,lastGeneratedColumn=0;var lastMapping=null;aSourceMapConsumer.eachMapping(function(mapping){if(lastMapping!==null){if(lastGeneratedLine<mapping.generatedLine){var code="";addMappingWithCode(lastMapping,shiftNextLine());lastGeneratedLine++;lastGeneratedColumn=0}else{var nextLine=remainingLines[0];var code=nextLine.substr(0,mapping.generatedColumn-lastGeneratedColumn);remainingLines[0]=nextLine.substr(mapping.generatedColumn-lastGeneratedColumn);lastGeneratedColumn=mapping.generatedColumn;addMappingWithCode(lastMapping,code);lastMapping=mapping;return}}while(lastGeneratedLine<mapping.generatedLine){node.add(shiftNextLine());lastGeneratedLine++}if(lastGeneratedColumn<mapping.generatedColumn){var nextLine=remainingLines[0];node.add(nextLine.substr(0,mapping.generatedColumn));remainingLines[0]=nextLine.substr(mapping.generatedColumn);lastGeneratedColumn=mapping.generatedColumn}lastMapping=mapping},this);if(remainingLines.length>0){if(lastMapping){addMappingWithCode(lastMapping,shiftNextLine())}node.add(remainingLines.join(""))}aSourceMapConsumer.sources.forEach(function(sourceFile){var content=aSourceMapConsumer.sourceContentFor(sourceFile);if(content!=null){if(aRelativePath!=null){sourceFile=util.join(aRelativePath,sourceFile)}node.setSourceContent(sourceFile,content)}});return node;function addMappingWithCode(mapping,code){if(mapping===null||mapping.source===undefined){node.add(code)}else{var source=aRelativePath?util.join(aRelativePath,mapping.source):mapping.source;node.add(new SourceNode(mapping.originalLine,mapping.originalColumn,source,code,mapping.name))}}};SourceNode.prototype.add=function SourceNode_add(aChunk){if(Array.isArray(aChunk)){aChunk.forEach(function(chunk){this.add(chunk)},this)}else if(aChunk[isSourceNode]||typeof aChunk==="string"){if(aChunk){this.children.push(aChunk)}}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.prepend=function SourceNode_prepend(aChunk){if(Array.isArray(aChunk)){for(var i=aChunk.length-1;i>=0;i--){this.prepend(aChunk[i])}}else if(aChunk[isSourceNode]||typeof aChunk==="string"){this.children.unshift(aChunk)}else{throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+aChunk)}return this};SourceNode.prototype.walk=function SourceNode_walk(aFn){var chunk;for(var i=0,len=this.children.length;i<len;i++){chunk=this.children[i];if(chunk[isSourceNode]){chunk.walk(aFn)}else{if(chunk!==""){aFn(chunk,{source:this.source,line:this.line,column:this.column,name:this.name})}}}};SourceNode.prototype.join=function SourceNode_join(aSep){var newChildren;var i;var len=this.children.length;if(len>0){newChildren=[];for(i=0;i<len-1;i++){newChildren.push(this.children[i]);newChildren.push(aSep)}newChildren.push(this.children[i]);this.children=newChildren}return this};SourceNode.prototype.replaceRight=function SourceNode_replaceRight(aPattern,aReplacement){var lastChild=this.children[this.children.length-1];if(lastChild[isSourceNode]){lastChild.replaceRight(aPattern,aReplacement)}else if(typeof lastChild==="string"){this.children[this.children.length-1]=lastChild.replace(aPattern,aReplacement)}else{this.children.push("".replace(aPattern,aReplacement))}return this};SourceNode.prototype.setSourceContent=function SourceNode_setSourceContent(aSourceFile,aSourceContent){this.sourceContents[util.toSetString(aSourceFile)]=aSourceContent};SourceNode.prototype.walkSourceContents=function SourceNode_walkSourceContents(aFn){for(var i=0,len=this.children.length;i<len;i++){if(this.children[i][isSourceNode]){this.children[i].walkSourceContents(aFn)}}var sources=Object.keys(this.sourceContents);for(var i=0,len=sources.length;i<len;i++){aFn(util.fromSetString(sources[i]),this.sourceContents[sources[i]])}};SourceNode.prototype.toString=function SourceNode_toString(){var str="";this.walk(function(chunk){str+=chunk});return str};SourceNode.prototype.toStringWithSourceMap=function SourceNode_toStringWithSourceMap(aArgs){var generated={code:"",line:1,column:0};var map=new SourceMapGenerator(aArgs);var sourceMappingActive=false;var lastOriginalSource=null;var lastOriginalLine=null;var lastOriginalColumn=null;var lastOriginalName=null;this.walk(function(chunk,original){generated.code+=chunk;if(original.source!==null&&original.line!==null&&original.column!==null){if(lastOriginalSource!==original.source||lastOriginalLine!==original.line||lastOriginalColumn!==original.column||lastOriginalName!==original.name){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}lastOriginalSource=original.source;lastOriginalLine=original.line;lastOriginalColumn=original.column;lastOriginalName=original.name;sourceMappingActive=true}else if(sourceMappingActive){map.addMapping({generated:{line:generated.line,column:generated.column}});lastOriginalSource=null;sourceMappingActive=false}for(var idx=0,length=chunk.length;idx<length;idx++){if(chunk.charCodeAt(idx)===NEWLINE_CODE){generated.line++;generated.column=0;if(idx+1===length){lastOriginalSource=null;sourceMappingActive=false}else if(sourceMappingActive){map.addMapping({source:original.source,original:{line:original.line,column:original.column},generated:{line:generated.line,column:generated.column},name:original.name})}}else{generated.column++}}});this.walkSourceContents(function(sourceFile,sourceContent){map.setSourceContent(sourceFile,sourceContent)});return{code:generated.code,map:map}};exports.SourceNode=SourceNode})},{"./source-map-generator":117,"./util":119,amdefine:120}],119:[function(require,module,exports){if(typeof define!=="function"){var define=require("amdefine")(module,require)}define(function(require,exports,module){function getArg(aArgs,aName,aDefaultValue){if(aName in aArgs){return aArgs[aName]}else if(arguments.length===3){return aDefaultValue}else{throw new Error('"'+aName+'" is a required argument.')}}exports.getArg=getArg;var urlRegexp=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.]*)(?::(\d+))?(\S*)$/;var dataUrlRegexp=/^data:.+\,.+$/;function urlParse(aUrl){var match=aUrl.match(urlRegexp);if(!match){return null}return{scheme:match[1],auth:match[2],host:match[3],port:match[4],path:match[5]}}exports.urlParse=urlParse;function urlGenerate(aParsedUrl){var url="";if(aParsedUrl.scheme){url+=aParsedUrl.scheme+":"}url+="//";if(aParsedUrl.auth){url+=aParsedUrl.auth+"@"}if(aParsedUrl.host){url+=aParsedUrl.host}if(aParsedUrl.port){url+=":"+aParsedUrl.port}if(aParsedUrl.path){url+=aParsedUrl.path}return url}exports.urlGenerate=urlGenerate;function normalize(aPath){var path=aPath;var url=urlParse(aPath);if(url){if(!url.path){return aPath}path=url.path}var isAbsolute=path.charAt(0)==="/";var parts=path.split(/\/+/);for(var part,up=0,i=parts.length-1;i>=0;i--){part=parts[i];if(part==="."){parts.splice(i,1)}else if(part===".."){up++}else if(up>0){if(part===""){parts.splice(i+1,up);up=0}else{parts.splice(i,2);up--}}}path=parts.join("/");if(path===""){path=isAbsolute?"/":"."}if(url){url.path=path;return urlGenerate(url)}return path}exports.normalize=normalize;function join(aRoot,aPath){if(aRoot===""){aRoot="."}if(aPath===""){aPath="."}var aPathUrl=urlParse(aPath);var aRootUrl=urlParse(aRoot);if(aRootUrl){aRoot=aRootUrl.path||"/"}if(aPathUrl&&!aPathUrl.scheme){if(aRootUrl){aPathUrl.scheme=aRootUrl.scheme}return urlGenerate(aPathUrl)}if(aPathUrl||aPath.match(dataUrlRegexp)){return aPath}if(aRootUrl&&!aRootUrl.host&&!aRootUrl.path){aRootUrl.host=aPath;return urlGenerate(aRootUrl)}var joined=aPath.charAt(0)==="/"?aPath:normalize(aRoot.replace(/\/+$/,"")+"/"+aPath);if(aRootUrl){aRootUrl.path=joined;return urlGenerate(aRootUrl)}return joined}exports.join=join;function relative(aRoot,aPath){if(aRoot===""){aRoot="."}aRoot=aRoot.replace(/\/$/,"");var url=urlParse(aRoot);if(aPath.charAt(0)=="/"&&url&&url.path=="/"){return aPath.slice(1)}return aPath.indexOf(aRoot+"/")===0?aPath.substr(aRoot.length+1):aPath}exports.relative=relative;function toSetString(aStr){return"$"+aStr}exports.toSetString=toSetString;function fromSetString(aStr){return aStr.substr(1)}exports.fromSetString=fromSetString;function strcmp(aStr1,aStr2){var s1=aStr1||"";var s2=aStr2||"";return(s1>s2)-(s1<s2)}function compareByOriginalPositions(mappingA,mappingB,onlyCompareOriginal){var cmp;cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp||onlyCompareOriginal){return cmp}cmp=strcmp(mappingA.name,mappingB.name);if(cmp){return cmp}cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}return mappingA.generatedColumn-mappingB.generatedColumn}exports.compareByOriginalPositions=compareByOriginalPositions;function compareByGeneratedPositions(mappingA,mappingB,onlyCompareGenerated){var cmp;cmp=mappingA.generatedLine-mappingB.generatedLine;if(cmp){return cmp}cmp=mappingA.generatedColumn-mappingB.generatedColumn;if(cmp||onlyCompareGenerated){return cmp}cmp=strcmp(mappingA.source,mappingB.source);if(cmp){return cmp}cmp=mappingA.originalLine-mappingB.originalLine;if(cmp){return cmp}cmp=mappingA.originalColumn-mappingB.originalColumn;if(cmp){return cmp}return strcmp(mappingA.name,mappingB.name)}exports.compareByGeneratedPositions=compareByGeneratedPositions})},{amdefine:120}],120:[function(require,module,exports){(function(process,__filename){"use strict";function amdefine(module,requireFn){"use strict";var defineCache={},loaderCache={},alreadyCalled=false,path=require("path"),makeRequire,stringRequire;function trimDots(ary){var i,part;for(i=0;ary[i];i+=1){part=ary[i];if(part==="."){ary.splice(i,1);i-=1}else if(part===".."){if(i===1&&(ary[2]===".."||ary[0]==="..")){break}else if(i>0){ary.splice(i-1,2);i-=2}}}}function normalize(name,baseName){var baseParts;if(name&&name.charAt(0)==="."){if(baseName){baseParts=baseName.split("/");baseParts=baseParts.slice(0,baseParts.length-1);baseParts=baseParts.concat(name.split("/"));trimDots(baseParts);name=baseParts.join("/")}}return name}function makeNormalize(relName){return function(name){return normalize(name,relName)}}function makeLoad(id){function load(value){loaderCache[id]=value}load.fromText=function(id,text){throw new Error("amdefine does not implement load.fromText")};return load}makeRequire=function(systemRequire,exports,module,relId){function amdRequire(deps,callback){if(typeof deps==="string"){return stringRequire(systemRequire,exports,module,deps,relId)}else{deps=deps.map(function(depName){return stringRequire(systemRequire,exports,module,depName,relId)});process.nextTick(function(){callback.apply(null,deps)})}}amdRequire.toUrl=function(filePath){if(filePath.indexOf(".")===0){return normalize(filePath,path.dirname(module.filename))}else{return filePath}};return amdRequire};requireFn=requireFn||function req(){return module.require.apply(module,arguments)};function runFactory(id,deps,factory){var r,e,m,result;if(id){e=loaderCache[id]={};m={id:id,uri:__filename,exports:e};r=makeRequire(requireFn,e,m,id)}else{if(alreadyCalled){throw new Error("amdefine with no module ID cannot be called more than once per file.")}alreadyCalled=true;e=module.exports;m=module;r=makeRequire(requireFn,e,m,module.id)}if(deps){deps=deps.map(function(depName){return r(depName)})}if(typeof factory==="function"){result=factory.apply(m.exports,deps)}else{result=factory}if(result!==undefined){m.exports=result;if(id){loaderCache[id]=m.exports}}}stringRequire=function(systemRequire,exports,module,id,relId){var index=id.indexOf("!"),originalId=id,prefix,plugin;if(index===-1){id=normalize(id,relId);if(id==="require"){return makeRequire(systemRequire,exports,module,relId)}else if(id==="exports"){return exports}else if(id==="module"){return module}else if(loaderCache.hasOwnProperty(id)){return loaderCache[id]}else if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}else{if(systemRequire){return systemRequire(originalId)}else{throw new Error("No module with ID: "+id)}}}else{prefix=id.substring(0,index);id=id.substring(index+1,id.length);plugin=stringRequire(systemRequire,exports,module,prefix,relId);if(plugin.normalize){id=plugin.normalize(id,makeNormalize(relId))}else{id=normalize(id,relId)}if(loaderCache[id]){return loaderCache[id]}else{plugin.load(id,makeRequire(systemRequire,exports,module,relId),makeLoad(id),{});return loaderCache[id]}}};function define(id,deps,factory){if(Array.isArray(id)){factory=deps;deps=id;id=undefined}else if(typeof id!=="string"){factory=id;id=deps=undefined}if(deps&&!Array.isArray(deps)){factory=deps;deps=undefined}if(!deps){
deps=["require","exports","module"]}if(id){defineCache[id]=[id,deps,factory]}else{runFactory(id,deps,factory)}}define.require=function(id){if(loaderCache[id]){return loaderCache[id]}if(defineCache[id]){runFactory.apply(null,defineCache[id]);return loaderCache[id]}};define.amd={};return define}module.exports=amdefine}).call(this,require("_process"),"/node_modules/uniter/node_modules/escodegen/node_modules/source-map/node_modules/amdefine/amdefine.js")},{_process:3,path:2}],121:[function(require,module,exports){module.exports={name:"escodegen",description:"ECMAScript code generator",homepage:"http://github.com/estools/escodegen",main:"escodegen.js",bin:{esgenerate:"./bin/esgenerate.js",escodegen:"./bin/escodegen.js"},files:["LICENSE.BSD","LICENSE.source-map","README.md","bin","escodegen.js","package.json"],version:"1.6.1",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"}],repository:{type:"git",url:"http://github.com/estools/escodegen.git"},dependencies:{estraverse:"^1.9.1",esutils:"^1.1.6",esprima:"^1.2.2",optionator:"^0.5.0","source-map":"~0.1.40"},optionalDependencies:{"source-map":"~0.1.40"},devDependencies:{"acorn-6to5":"^0.11.1-25",bluebird:"^2.3.11","bower-registry-client":"^0.2.1",chai:"^1.10.0","commonjs-everywhere":"^0.9.7","esprima-moz":"*",gulp:"^3.8.10","gulp-eslint":"^0.2.0","gulp-mocha":"^2.0.0",semver:"^4.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/escodegen/raw/master/LICENSE.BSD"}],scripts:{test:"gulp travis","unit-test":"gulp test",lint:"gulp lint",release:"node tools/release.js","build-min":"cjsify -ma path: tools/entry-point.js > escodegen.browser.min.js",build:"cjsify -a path: tools/entry-point.js > escodegen.browser.js"},gitHead:"1ca664f68dcf220b76c9dc562b2337c5e0b4227d",bugs:{url:"https://github.com/estools/escodegen/issues"},_id:"escodegen@1.6.1",_shasum:"367de17d8510540d12bc6dcb8b3f918391265815",_from:"escodegen@>=1.6.1 <2.0.0",_npmVersion:"2.0.0-alpha-5",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"367de17d8510540d12bc6dcb8b3f918391265815",tarball:"http://registry.npmjs.org/escodegen/-/escodegen-1.6.1.tgz"},directories:{},_resolved:"https://registry.npmjs.org/escodegen/-/escodegen-1.6.1.tgz",readme:"ERROR: No README data found!"}},{}],122:[function(require,module,exports){(function(root,factory){"use strict";if(typeof define==="function"&&define.amd){define(["exports"],factory)}else if(typeof exports!=="undefined"){factory(exports)}else{factory(root.esprima={})}})(this,function(exports){"use strict";var Token,TokenName,FnExprTokens,Syntax,PlaceHolders,Messages,Regex,source,strict,sourceType,index,lineNumber,lineStart,hasLineTerminator,lastIndex,lastLineNumber,lastLineStart,startIndex,startLineNumber,startLineStart,scanning,length,lookahead,state,extra,isBindingElement,isAssignmentTarget,firstCoverInitializedNameError;Token={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9,Template:10};TokenName={};TokenName[Token.BooleanLiteral]="Boolean";TokenName[Token.EOF]="<end>";TokenName[Token.Identifier]="Identifier";TokenName[Token.Keyword]="Keyword";TokenName[Token.NullLiteral]="Null";TokenName[Token.NumericLiteral]="Numeric";TokenName[Token.Punctuator]="Punctuator";TokenName[Token.StringLiteral]="String";TokenName[Token.RegularExpression]="RegularExpression";TokenName[Token.Template]="Template";FnExprTokens=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="];Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};PlaceHolders={ArrowParameterPlaceHolder:"ArrowParameterPlaceHolder"};Messages={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",DefaultRestParameter:"Unexpected token =",ObjectPatternAsRestParameter:"Unexpected token {",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ConstructorSpecialMethod:"Class constructor may not be an accessor",DuplicateConstructor:"A class may only have one constructor",StaticPrototype:"Classes may not have static property named prototype",MissingFromClause:"Unexpected token",NoAsAfterImportNamespace:"Unexpected token",InvalidModuleSpecifier:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalExportDeclaration:"Unexpected token"};Regex={NonAsciiIdentifierStart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]"),NonAsciiIdentifierPart:new RegExp("[--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------]")};function assert(condition,message){if(!condition){throw new Error("ASSERT: "+message)}}function isDecimalDigit(ch){return ch>=48&&ch<=57}function isHexDigit(ch){return"0123456789abcdefABCDEF".indexOf(ch)>=0}function isOctalDigit(ch){return"01234567".indexOf(ch)>=0}function octalToDecimal(ch){var octal=ch!=="0",code="01234567".indexOf(ch);if(index<length&&isOctalDigit(source[index])){octal=true;code=code*8+"01234567".indexOf(source[index++]);if("0123".indexOf(ch)>=0&&index<length&&isOctalDigit(source[index])){code=code*8+"01234567".indexOf(source[index++])}}return{code:code,octal:octal}}function isWhiteSpace(ch){return ch===32||ch===9||ch===11||ch===12||ch===160||ch>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(ch)>=0}function isLineTerminator(ch){return ch===10||ch===13||ch===8232||ch===8233}function isIdentifierStart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch===92||ch>=128&&Regex.NonAsciiIdentifierStart.test(String.fromCharCode(ch))}function isIdentifierPart(ch){return ch===36||ch===95||ch>=65&&ch<=90||ch>=97&&ch<=122||ch>=48&&ch<=57||ch===92||ch>=128&&Regex.NonAsciiIdentifierPart.test(String.fromCharCode(ch))}function isFutureReservedWord(id){switch(id){case"enum":case"export":case"import":case"super":return true;default:return false}}function isStrictModeReservedWord(id){switch(id){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return true;default:return false}}function isRestrictedWord(id){return id==="eval"||id==="arguments"}function isKeyword(id){switch(id.length){case 2:return id==="if"||id==="in"||id==="do";case 3:return id==="var"||id==="for"||id==="new"||id==="try"||id==="let";case 4:return id==="this"||id==="else"||id==="case"||id==="void"||id==="with"||id==="enum";case 5:return id==="while"||id==="break"||id==="catch"||id==="throw"||id==="const"||id==="yield"||id==="class"||id==="super";case 6:return id==="return"||id==="typeof"||id==="delete"||id==="switch"||id==="export"||id==="import";case 7:return id==="default"||id==="finally"||id==="extends";case 8:return id==="function"||id==="continue"||id==="debugger";case 10:return id==="instanceof";default:return false}}function addComment(type,value,start,end,loc){var comment;assert(typeof start==="number","Comment must have valid position");state.lastCommentStart=start;comment={type:type,value:value};if(extra.range){comment.range=[start,end]}if(extra.loc){comment.loc=loc}extra.comments.push(comment);if(extra.attachComment){extra.leadingComments.push(comment);extra.trailingComments.push(comment)}}function skipSingleLineComment(offset){var start,loc,ch,comment;start=index-offset;loc={start:{line:lineNumber,column:index-lineStart-offset}};while(index<length){ch=source.charCodeAt(index);++index;if(isLineTerminator(ch)){hasLineTerminator=true;if(extra.comments){comment=source.slice(start+offset,index-1);loc.end={line:lineNumber,column:index-lineStart-1};addComment("Line",comment,start,index-1,loc)}if(ch===13&&source.charCodeAt(index)===10){++index}++lineNumber;lineStart=index;return}}if(extra.comments){comment=source.slice(start+offset,index);loc.end={line:lineNumber,column:index-lineStart};addComment("Line",comment,start,index,loc)}}function skipMultiLineComment(){var start,loc,ch,comment;if(extra.comments){start=index-2;loc={start:{line:lineNumber,column:index-lineStart-2}}}while(index<length){ch=source.charCodeAt(index);if(isLineTerminator(ch)){if(ch===13&&source.charCodeAt(index+1)===10){++index}hasLineTerminator=true;++lineNumber;++index;lineStart=index}else if(ch===42){if(source.charCodeAt(index+1)===47){++index;++index;if(extra.comments){comment=source.slice(start+2,index-2);loc.end={line:lineNumber,column:index-lineStart};addComment("Block",comment,start,index,loc)}return}++index}else{++index}}if(extra.comments){loc.end={line:lineNumber,column:index-lineStart};comment=source.slice(start+2,index);addComment("Block",comment,start,index,loc)}tolerateUnexpectedToken()}function skipComment(){var ch,start;hasLineTerminator=false;start=index===0;while(index<length){ch=source.charCodeAt(index);if(isWhiteSpace(ch)){++index}else if(isLineTerminator(ch)){hasLineTerminator=true;++index;if(ch===13&&source.charCodeAt(index)===10){++index}++lineNumber;lineStart=index;start=true}else if(ch===47){ch=source.charCodeAt(index+1);if(ch===47){++index;++index;skipSingleLineComment(2);start=true}else if(ch===42){++index;++index;skipMultiLineComment()}else{break}}else if(start&&ch===45){if(source.charCodeAt(index+1)===45&&source.charCodeAt(index+2)===62){index+=3;skipSingleLineComment(3)}else{break}}else if(ch===60){if(source.slice(index+1,index+4)==="!--"){++index;++index;++index;++index;skipSingleLineComment(4)}else{break}}else{break}}}function scanHexEscape(prefix){var i,len,ch,code=0;len=prefix==="u"?4:2;for(i=0;i<len;++i){if(index<length&&isHexDigit(source[index])){ch=source[index++];code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}else{return""}}return String.fromCharCode(code)}function scanUnicodeCodePointEscape(){var ch,code,cu1,cu2;ch=source[index];code=0;if(ch==="}"){throwUnexpectedToken()}while(index<length){ch=source[index++];if(!isHexDigit(ch)){break}code=code*16+"0123456789abcdef".indexOf(ch.toLowerCase())}if(code>1114111||ch!=="}"){throwUnexpectedToken()}if(code<=65535){return String.fromCharCode(code)}cu1=(code-65536>>10)+55296;cu2=(code-65536&1023)+56320;return String.fromCharCode(cu1,cu2)}function getEscapedIdentifier(){var ch,id;ch=source.charCodeAt(index++);id=String.fromCharCode(ch);if(ch===92){if(source.charCodeAt(index)!==117){throwUnexpectedToken()}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierStart(ch.charCodeAt(0))){throwUnexpectedToken()}id=ch}while(index<length){ch=source.charCodeAt(index);if(!isIdentifierPart(ch)){break}++index;id+=String.fromCharCode(ch);if(ch===92){id=id.substr(0,id.length-1);if(source.charCodeAt(index)!==117){throwUnexpectedToken()}++index;ch=scanHexEscape("u");if(!ch||ch==="\\"||!isIdentifierPart(ch.charCodeAt(0))){throwUnexpectedToken()}id+=ch}}return id}function getIdentifier(){var start,ch;start=index++;while(index<length){ch=source.charCodeAt(index);if(ch===92){index=start;return getEscapedIdentifier()}if(isIdentifierPart(ch)){++index}else{break}}return source.slice(start,index)}function scanIdentifier(){var start,id,type;start=index;id=source.charCodeAt(index)===92?getEscapedIdentifier():getIdentifier();if(id.length===1){type=Token.Identifier}else if(isKeyword(id)){type=Token.Keyword}else if(id==="null"){type=Token.NullLiteral}else if(id==="true"||id==="false"){type=Token.BooleanLiteral}else{type=Token.Identifier}return{type:type,value:id,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanPunctuator(){var token,str;token={type:Token.Punctuator,value:"",lineNumber:lineNumber,lineStart:lineStart,start:index,end:index};str=source[index];switch(str){case"(":if(extra.tokenize){extra.openParenToken=extra.tokens.length}++index;break;case"{":if(extra.tokenize){extra.openCurlyToken=extra.tokens.length}state.curlyStack.push("{");++index;break;case".":++index;if(source[index]==="."&&source[index+1]==="."){index+=2;str="..."}break;case"}":++index;state.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++index;break;default:str=source.substr(index,4);if(str===">>>="){index+=4}else{str=str.substr(0,3);if(str==="==="||str==="!=="||str===">>>"||str==="<<="||str===">>="){index+=3}else{str=str.substr(0,2);if(str==="&&"||str==="||"||str==="=="||str==="!="||str==="+="||str==="-="||str==="*="||str==="/="||str==="++"||str==="--"||str==="<<"||str===">>"||str==="&="||str==="|="||str==="^="||str==="%="||str==="<="||str===">="||str==="=>"){index+=2}else{str=source[index];if("<>=!+-*%&|^/".indexOf(str)>=0){++index}}}}}if(index===token.start){throwUnexpectedToken()}token.end=index;token.value=str;return token}function scanHexLiteral(start){var number="";while(index<length){if(!isHexDigit(source[index])){break}number+=source[index++]}if(number.length===0){throwUnexpectedToken()}if(isIdentifierStart(source.charCodeAt(index))){throwUnexpectedToken()}return{type:Token.NumericLiteral,value:parseInt("0x"+number,16),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanBinaryLiteral(start){var ch,number;number="";while(index<length){ch=source[index];if(ch!=="0"&&ch!=="1"){break}number+=source[index++]}if(number.length===0){throwUnexpectedToken()}if(index<length){ch=source.charCodeAt(index);if(isIdentifierStart(ch)||isDecimalDigit(ch)){throwUnexpectedToken()}}return{type:Token.NumericLiteral,value:parseInt(number,2),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanOctalLiteral(prefix,start){var number,octal;if(isOctalDigit(prefix)){octal=true;number="0"+source[index++]}else{octal=false;++index;number=""}while(index<length){if(!isOctalDigit(source[index])){break}number+=source[index++]}if(!octal&&number.length===0){throwUnexpectedToken()}if(isIdentifierStart(source.charCodeAt(index))||isDecimalDigit(source.charCodeAt(index))){throwUnexpectedToken()}return{type:Token.NumericLiteral,value:parseInt(number,8),octal:octal,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function isImplicitOctalLiteral(){var i,ch;for(i=index+1;i<length;++i){ch=source[i];if(ch==="8"||ch==="9"){return false}if(!isOctalDigit(ch)){return true}}return true}function scanNumericLiteral(){var number,start,ch;ch=source[index];assert(isDecimalDigit(ch.charCodeAt(0))||ch===".","Numeric literal must start with a decimal digit or a decimal point");start=index;number="";if(ch!=="."){number=source[index++];ch=source[index];if(number==="0"){if(ch==="x"||ch==="X"){++index;return scanHexLiteral(start)}if(ch==="b"||ch==="B"){++index;return scanBinaryLiteral(start)}if(ch==="o"||ch==="O"){return scanOctalLiteral(ch,start)}if(isOctalDigit(ch)){if(isImplicitOctalLiteral()){return scanOctalLiteral(ch,start)}}}while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="."){number+=source[index++];while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}ch=source[index]}if(ch==="e"||ch==="E"){number+=source[index++];ch=source[index];if(ch==="+"||ch==="-"){number+=source[index++]}if(isDecimalDigit(source.charCodeAt(index))){while(isDecimalDigit(source.charCodeAt(index))){number+=source[index++]}}else{throwUnexpectedToken()}}if(isIdentifierStart(source.charCodeAt(index))){throwUnexpectedToken()}return{type:Token.NumericLiteral,value:parseFloat(number),lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function scanStringLiteral(){var str="",quote,start,ch,unescaped,octToDec,octal=false;quote=source[index];assert(quote==="'"||quote==='"',"String literal must starts with a quote");start=index;++index;while(index<length){ch=source[index++];if(ch===quote){quote="";break}else if(ch==="\\"){ch=source[index++];if(!ch||!isLineTerminator(ch.charCodeAt(0))){switch(ch){case"u":case"x":if(source[index]==="{"){++index;str+=scanUnicodeCodePointEscape()}else{unescaped=scanHexEscape(ch);if(!unescaped){throw throwUnexpectedToken()}str+=unescaped}break;case"n":str+="\n";break;case"r":str+="\r";break;case"t":str+="	";break;case"b":str+="\b";break;case"f":str+="\f";break;case"v":str+="";break;case"8":case"9":throw throwUnexpectedToken();default:if(isOctalDigit(ch)){octToDec=octalToDecimal(ch);octal=octToDec.octal||octal;str+=String.fromCharCode(octToDec.code)}else{str+=ch}break}}else{++lineNumber;if(ch==="\r"&&source[index]==="\n"){++index}lineStart=index}}else if(isLineTerminator(ch.charCodeAt(0))){break}else{str+=ch}}if(quote!==""){throwUnexpectedToken()}return{type:Token.StringLiteral,value:str,octal:octal,lineNumber:startLineNumber,lineStart:startLineStart,start:start,end:index}}function scanTemplate(){var cooked="",ch,start,rawOffset,terminated,head,tail,restore,unescaped;terminated=false;tail=false;start=index;head=source[index]==="`";rawOffset=2;++index;while(index<length){ch=source[index++];if(ch==="`"){rawOffset=1;tail=true;terminated=true;break}else if(ch==="$"){if(source[index]==="{"){state.curlyStack.push("${");++index;terminated=true;break}cooked+=ch}else if(ch==="\\"){ch=source[index++];if(!isLineTerminator(ch.charCodeAt(0))){switch(ch){case"n":cooked+="\n";break;case"r":cooked+="\r";break;case"t":cooked+="	";break;case"u":case"x":if(source[index]==="{"){++index;cooked+=scanUnicodeCodePointEscape()}else{restore=index;unescaped=scanHexEscape(ch);if(unescaped){cooked+=unescaped}else{index=restore;cooked+=ch}}break;case"b":cooked+="\b";break;case"f":cooked+="\f";break;case"v":cooked+="";break;default:if(ch==="0"){if(isDecimalDigit(source.charCodeAt(index))){throwError(Messages.TemplateOctalLiteral)}cooked+="\x00"}else if(isOctalDigit(ch)){throwError(Messages.TemplateOctalLiteral)}else{cooked+=ch}break}}else{++lineNumber;if(ch==="\r"&&source[index]==="\n"){++index}lineStart=index}}else if(isLineTerminator(ch.charCodeAt(0))){++lineNumber;if(ch==="\r"&&source[index]==="\n"){++index}lineStart=index;cooked+="\n"}else{cooked+=ch}}if(!terminated){throwUnexpectedToken()}if(!head){state.curlyStack.pop()}return{type:Token.Template,value:{cooked:cooked,raw:source.slice(start+1,index-rawOffset)},head:head,tail:tail,lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}function testRegExp(pattern,flags){var tmp=pattern;if(flags.indexOf("u")>=0){tmp=tmp.replace(/\\u\{([0-9a-fA-F]+)\}/g,function($0,$1){if(parseInt($1,16)<=1114111){return"x"}throwUnexpectedToken(null,Messages.InvalidRegExp)}).replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x")}try{RegExp(tmp)}catch(e){throwUnexpectedToken(null,Messages.InvalidRegExp)}try{return new RegExp(pattern,flags)}catch(exception){return null}}function scanRegExpBody(){var ch,str,classMarker,terminated,body;ch=source[index];assert(ch==="/","Regular expression literal must start with a slash");str=source[index++];classMarker=false;terminated=false;while(index<length){ch=source[index++];str+=ch;if(ch==="\\"){ch=source[index++];if(isLineTerminator(ch.charCodeAt(0))){throwUnexpectedToken(null,Messages.UnterminatedRegExp)}str+=ch}else if(isLineTerminator(ch.charCodeAt(0))){throwUnexpectedToken(null,Messages.UnterminatedRegExp)}else if(classMarker){if(ch==="]"){classMarker=false}}else{if(ch==="/"){terminated=true;break}else if(ch==="["){classMarker=true}}}if(!terminated){throwUnexpectedToken(null,Messages.UnterminatedRegExp)}body=str.substr(1,str.length-2);return{value:body,literal:str}}function scanRegExpFlags(){var ch,str,flags,restore;str="";flags="";while(index<length){ch=source[index];if(!isIdentifierPart(ch.charCodeAt(0))){break}++index;if(ch==="\\"&&index<length){ch=source[index];if(ch==="u"){++index;restore=index;ch=scanHexEscape("u");if(ch){flags+=ch;for(str+="\\u";restore<index;++restore){str+=source[restore]}}else{index=restore;flags+="u";str+="\\u"}tolerateUnexpectedToken()}else{str+="\\";tolerateUnexpectedToken()}}else{flags+=ch;str+=ch}}return{value:flags,literal:str}}function scanRegExp(){scanning=true;var start,body,flags,value;lookahead=null;skipComment();start=index;body=scanRegExpBody();flags=scanRegExpFlags();value=testRegExp(body.value,flags.value);scanning=false;if(extra.tokenize){return{type:Token.RegularExpression,value:value,regex:{pattern:body.value,flags:flags.value},lineNumber:lineNumber,lineStart:lineStart,start:start,end:index}}return{literal:body.literal+flags.literal,value:value,regex:{pattern:body.value,flags:flags.value},start:start,end:index}}function collectRegex(){var pos,loc,regex,token;skipComment();pos=index;loc={start:{line:lineNumber,column:index-lineStart}};regex=scanRegExp();loc.end={line:lineNumber,column:index-lineStart};if(!extra.tokenize){if(extra.tokens.length>0){token=extra.tokens[extra.tokens.length-1];if(token.range[0]===pos&&token.type==="Punctuator"){if(token.value==="/"||token.value==="/="){extra.tokens.pop()}}}extra.tokens.push({type:"RegularExpression",value:regex.literal,regex:regex.regex,range:[pos,index],loc:loc})}return regex}function isIdentifierName(token){return token.type===Token.Identifier||token.type===Token.Keyword||token.type===Token.BooleanLiteral||token.type===Token.NullLiteral}function advanceSlash(){var prevToken,checkToken;prevToken=extra.tokens[extra.tokens.length-1];if(!prevToken){return collectRegex()}if(prevToken.type==="Punctuator"){if(prevToken.value==="]"){return scanPunctuator()}if(prevToken.value===")"){checkToken=extra.tokens[extra.openParenToken-1];if(checkToken&&checkToken.type==="Keyword"&&(checkToken.value==="if"||checkToken.value==="while"||checkToken.value==="for"||checkToken.value==="with")){return collectRegex()}return scanPunctuator()}if(prevToken.value==="}"){if(extra.tokens[extra.openCurlyToken-3]&&extra.tokens[extra.openCurlyToken-3].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-4];if(!checkToken){return scanPunctuator()}}else if(extra.tokens[extra.openCurlyToken-4]&&extra.tokens[extra.openCurlyToken-4].type==="Keyword"){checkToken=extra.tokens[extra.openCurlyToken-5];if(!checkToken){return collectRegex()}}else{return scanPunctuator()}if(FnExprTokens.indexOf(checkToken.value)>=0){return scanPunctuator()}return collectRegex()}return collectRegex()}if(prevToken.type==="Keyword"&&prevToken.value!=="this"){return collectRegex()}return scanPunctuator()}function advance(){var ch,token;if(index>=length){return{type:Token.EOF,lineNumber:lineNumber,lineStart:lineStart,start:index,end:index}}ch=source.charCodeAt(index);if(isIdentifierStart(ch)){token=scanIdentifier();if(strict&&isStrictModeReservedWord(token.value)){token.type=Token.Keyword}return token}if(ch===40||ch===41||ch===59){return scanPunctuator()}if(ch===39||ch===34){return scanStringLiteral()}if(ch===46){if(isDecimalDigit(source.charCodeAt(index+1))){return scanNumericLiteral()}return scanPunctuator()}if(isDecimalDigit(ch)){return scanNumericLiteral()}if(extra.tokenize&&ch===47){return advanceSlash()}if(ch===96||ch===125&&state.curlyStack[state.curlyStack.length-1]==="${"){return scanTemplate()}return scanPunctuator()}function collectToken(){var loc,token,value,entry;loc={start:{line:lineNumber,column:index-lineStart}};token=advance();loc.end={line:lineNumber,column:index-lineStart};if(token.type!==Token.EOF){value=source.slice(token.start,token.end);entry={type:TokenName[token.type],value:value,range:[token.start,token.end],loc:loc};if(token.regex){entry.regex={pattern:token.regex.pattern,flags:token.regex.flags}}extra.tokens.push(entry)}return token}function lex(){var token;scanning=true;lastIndex=index;lastLineNumber=lineNumber;lastLineStart=lineStart;skipComment();token=lookahead;startIndex=index;startLineNumber=lineNumber;startLineStart=lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();scanning=false;return token}function peek(){scanning=true;skipComment();lastIndex=index;lastLineNumber=lineNumber;lastLineStart=lineStart;startIndex=index;startLineNumber=lineNumber;startLineStart=lineStart;lookahead=typeof extra.tokens!=="undefined"?collectToken():advance();scanning=false}function Position(){this.line=startLineNumber;this.column=startIndex-startLineStart}function SourceLocation(){this.start=new Position;this.end=null}function WrappingSourceLocation(startToken){this.start={line:startToken.lineNumber,column:startToken.start-startToken.lineStart};this.end=null}function Node(){if(extra.range){this.range=[startIndex,0]}if(extra.loc){this.loc=new SourceLocation}}function WrappingNode(startToken){if(extra.range){this.range=[startToken.start,0]}if(extra.loc){this.loc=new WrappingSourceLocation(startToken)}}WrappingNode.prototype=Node.prototype={processComment:function(){var lastChild,leadingComments,trailingComments,bottomRight=extra.bottomRightStack,i,comment,last=bottomRight[bottomRight.length-1];if(this.type===Syntax.Program){if(this.body.length>0){return}}if(extra.trailingComments.length>0){trailingComments=[];for(i=extra.trailingComments.length-1;i>=0;--i){comment=extra.trailingComments[i];if(comment.range[0]>=this.range[1]){trailingComments.unshift(comment);extra.trailingComments.splice(i,1)}}extra.trailingComments=[]}else{if(last&&last.trailingComments&&last.trailingComments[0].range[0]>=this.range[1]){trailingComments=last.trailingComments;delete last.trailingComments}}if(last){while(last&&last.range[0]>=this.range[0]){lastChild=last;last=bottomRight.pop()}}if(lastChild){if(lastChild.leadingComments&&lastChild.leadingComments[lastChild.leadingComments.length-1].range[1]<=this.range[0]){this.leadingComments=lastChild.leadingComments;lastChild.leadingComments=undefined}}else if(extra.leadingComments.length>0){leadingComments=[];for(i=extra.leadingComments.length-1;i>=0;--i){comment=extra.leadingComments[i];if(comment.range[1]<=this.range[0]){leadingComments.unshift(comment);extra.leadingComments.splice(i,1)}}}if(leadingComments&&leadingComments.length>0){this.leadingComments=leadingComments}if(trailingComments&&trailingComments.length>0){this.trailingComments=trailingComments}bottomRight.push(this)},finish:function(){if(extra.range){this.range[1]=lastIndex}if(extra.loc){this.loc.end={line:lastLineNumber,column:lastIndex-lastLineStart};if(extra.source){this.loc.source=extra.source}}if(extra.attachComment){this.processComment();
}},finishArrayExpression:function(elements){this.type=Syntax.ArrayExpression;this.elements=elements;this.finish();return this},finishArrayPattern:function(elements){this.type=Syntax.ArrayPattern;this.elements=elements;this.finish();return this},finishArrowFunctionExpression:function(params,defaults,body,expression){this.type=Syntax.ArrowFunctionExpression;this.id=null;this.params=params;this.defaults=defaults;this.body=body;this.generator=false;this.expression=expression;this.finish();return this},finishAssignmentExpression:function(operator,left,right){this.type=Syntax.AssignmentExpression;this.operator=operator;this.left=left;this.right=right;this.finish();return this},finishAssignmentPattern:function(left,right){this.type=Syntax.AssignmentPattern;this.left=left;this.right=right;this.finish();return this},finishBinaryExpression:function(operator,left,right){this.type=operator==="||"||operator==="&&"?Syntax.LogicalExpression:Syntax.BinaryExpression;this.operator=operator;this.left=left;this.right=right;this.finish();return this},finishBlockStatement:function(body){this.type=Syntax.BlockStatement;this.body=body;this.finish();return this},finishBreakStatement:function(label){this.type=Syntax.BreakStatement;this.label=label;this.finish();return this},finishCallExpression:function(callee,args){this.type=Syntax.CallExpression;this.callee=callee;this.arguments=args;this.finish();return this},finishCatchClause:function(param,body){this.type=Syntax.CatchClause;this.param=param;this.body=body;this.finish();return this},finishClassBody:function(body){this.type=Syntax.ClassBody;this.body=body;this.finish();return this},finishClassDeclaration:function(id,superClass,body){this.type=Syntax.ClassDeclaration;this.id=id;this.superClass=superClass;this.body=body;this.finish();return this},finishClassExpression:function(id,superClass,body){this.type=Syntax.ClassExpression;this.id=id;this.superClass=superClass;this.body=body;this.finish();return this},finishConditionalExpression:function(test,consequent,alternate){this.type=Syntax.ConditionalExpression;this.test=test;this.consequent=consequent;this.alternate=alternate;this.finish();return this},finishContinueStatement:function(label){this.type=Syntax.ContinueStatement;this.label=label;this.finish();return this},finishDebuggerStatement:function(){this.type=Syntax.DebuggerStatement;this.finish();return this},finishDoWhileStatement:function(body,test){this.type=Syntax.DoWhileStatement;this.body=body;this.test=test;this.finish();return this},finishEmptyStatement:function(){this.type=Syntax.EmptyStatement;this.finish();return this},finishExpressionStatement:function(expression){this.type=Syntax.ExpressionStatement;this.expression=expression;this.finish();return this},finishForStatement:function(init,test,update,body){this.type=Syntax.ForStatement;this.init=init;this.test=test;this.update=update;this.body=body;this.finish();return this},finishForInStatement:function(left,right,body){this.type=Syntax.ForInStatement;this.left=left;this.right=right;this.body=body;this.each=false;this.finish();return this},finishFunctionDeclaration:function(id,params,defaults,body){this.type=Syntax.FunctionDeclaration;this.id=id;this.params=params;this.defaults=defaults;this.body=body;this.generator=false;this.expression=false;this.finish();return this},finishFunctionExpression:function(id,params,defaults,body){this.type=Syntax.FunctionExpression;this.id=id;this.params=params;this.defaults=defaults;this.body=body;this.generator=false;this.expression=false;this.finish();return this},finishIdentifier:function(name){this.type=Syntax.Identifier;this.name=name;this.finish();return this},finishIfStatement:function(test,consequent,alternate){this.type=Syntax.IfStatement;this.test=test;this.consequent=consequent;this.alternate=alternate;this.finish();return this},finishLabeledStatement:function(label,body){this.type=Syntax.LabeledStatement;this.label=label;this.body=body;this.finish();return this},finishLiteral:function(token){this.type=Syntax.Literal;this.value=token.value;this.raw=source.slice(token.start,token.end);if(token.regex){this.regex=token.regex}this.finish();return this},finishMemberExpression:function(accessor,object,property){this.type=Syntax.MemberExpression;this.computed=accessor==="[";this.object=object;this.property=property;this.finish();return this},finishNewExpression:function(callee,args){this.type=Syntax.NewExpression;this.callee=callee;this.arguments=args;this.finish();return this},finishObjectExpression:function(properties){this.type=Syntax.ObjectExpression;this.properties=properties;this.finish();return this},finishObjectPattern:function(properties){this.type=Syntax.ObjectPattern;this.properties=properties;this.finish();return this},finishPostfixExpression:function(operator,argument){this.type=Syntax.UpdateExpression;this.operator=operator;this.argument=argument;this.prefix=false;this.finish();return this},finishProgram:function(body){this.type=Syntax.Program;this.body=body;if(sourceType==="module"){this.sourceType=sourceType}this.finish();return this},finishProperty:function(kind,key,computed,value,method,shorthand){this.type=Syntax.Property;this.key=key;this.computed=computed;this.value=value;this.kind=kind;this.method=method;this.shorthand=shorthand;this.finish();return this},finishRestElement:function(argument){this.type=Syntax.RestElement;this.argument=argument;this.finish();return this},finishReturnStatement:function(argument){this.type=Syntax.ReturnStatement;this.argument=argument;this.finish();return this},finishSequenceExpression:function(expressions){this.type=Syntax.SequenceExpression;this.expressions=expressions;this.finish();return this},finishSpreadElement:function(argument){this.type=Syntax.SpreadElement;this.argument=argument;this.finish();return this},finishSwitchCase:function(test,consequent){this.type=Syntax.SwitchCase;this.test=test;this.consequent=consequent;this.finish();return this},finishSuper:function(){this.type=Syntax.Super;this.finish();return this},finishSwitchStatement:function(discriminant,cases){this.type=Syntax.SwitchStatement;this.discriminant=discriminant;this.cases=cases;this.finish();return this},finishTaggedTemplateExpression:function(tag,quasi){this.type=Syntax.TaggedTemplateExpression;this.tag=tag;this.quasi=quasi;this.finish();return this},finishTemplateElement:function(value,tail){this.type=Syntax.TemplateElement;this.value=value;this.tail=tail;this.finish();return this},finishTemplateLiteral:function(quasis,expressions){this.type=Syntax.TemplateLiteral;this.quasis=quasis;this.expressions=expressions;this.finish();return this},finishThisExpression:function(){this.type=Syntax.ThisExpression;this.finish();return this},finishThrowStatement:function(argument){this.type=Syntax.ThrowStatement;this.argument=argument;this.finish();return this},finishTryStatement:function(block,handler,finalizer){this.type=Syntax.TryStatement;this.block=block;this.guardedHandlers=[];this.handlers=handler?[handler]:[];this.handler=handler;this.finalizer=finalizer;this.finish();return this},finishUnaryExpression:function(operator,argument){this.type=operator==="++"||operator==="--"?Syntax.UpdateExpression:Syntax.UnaryExpression;this.operator=operator;this.argument=argument;this.prefix=true;this.finish();return this},finishVariableDeclaration:function(declarations){this.type=Syntax.VariableDeclaration;this.declarations=declarations;this.kind="var";this.finish();return this},finishLexicalDeclaration:function(declarations,kind){this.type=Syntax.VariableDeclaration;this.declarations=declarations;this.kind=kind;this.finish();return this},finishVariableDeclarator:function(id,init){this.type=Syntax.VariableDeclarator;this.id=id;this.init=init;this.finish();return this},finishWhileStatement:function(test,body){this.type=Syntax.WhileStatement;this.test=test;this.body=body;this.finish();return this},finishWithStatement:function(object,body){this.type=Syntax.WithStatement;this.object=object;this.body=body;this.finish();return this},finishExportSpecifier:function(local,exported){this.type=Syntax.ExportSpecifier;this.exported=exported||local;this.local=local;this.finish();return this},finishImportDefaultSpecifier:function(local){this.type=Syntax.ImportDefaultSpecifier;this.local=local;this.finish();return this},finishImportNamespaceSpecifier:function(local){this.type=Syntax.ImportNamespaceSpecifier;this.local=local;this.finish();return this},finishExportNamedDeclaration:function(declaration,specifiers,src){this.type=Syntax.ExportNamedDeclaration;this.declaration=declaration;this.specifiers=specifiers;this.source=src;this.finish();return this},finishExportDefaultDeclaration:function(declaration){this.type=Syntax.ExportDefaultDeclaration;this.declaration=declaration;this.finish();return this},finishExportAllDeclaration:function(src){this.type=Syntax.ExportAllDeclaration;this.source=src;this.finish();return this},finishImportSpecifier:function(local,imported){this.type=Syntax.ImportSpecifier;this.local=local||imported;this.imported=imported;this.finish();return this},finishImportDeclaration:function(specifiers,src){this.type=Syntax.ImportDeclaration;this.specifiers=specifiers;this.source=src;this.finish();return this}};function recordError(error){var e,existing;for(e=0;e<extra.errors.length;e++){existing=extra.errors[e];if(existing.index===error.index&&existing.message===error.message){return}}extra.errors.push(error)}function createError(line,pos,description){var error=new Error("Line "+line+": "+description);error.index=pos;error.lineNumber=line;error.column=pos-(scanning?lineStart:lastLineStart)+1;error.description=description;return error}function throwError(messageFormat){var args,msg;args=Array.prototype.slice.call(arguments,1);msg=messageFormat.replace(/%(\d)/g,function(whole,idx){assert(idx<args.length,"Message reference must be in range");return args[idx]});throw createError(lastLineNumber,lastIndex,msg)}function tolerateError(messageFormat){var args,msg,error;args=Array.prototype.slice.call(arguments,1);msg=messageFormat.replace(/%(\d)/g,function(whole,idx){assert(idx<args.length,"Message reference must be in range");return args[idx]});error=createError(lineNumber,lastIndex,msg);if(extra.errors){recordError(error)}else{throw error}}function unexpectedTokenError(token,message){var value,msg=message||Messages.UnexpectedToken;if(token){if(!message){msg=token.type===Token.EOF?Messages.UnexpectedEOS:token.type===Token.Identifier?Messages.UnexpectedIdentifier:token.type===Token.NumericLiteral?Messages.UnexpectedNumber:token.type===Token.StringLiteral?Messages.UnexpectedString:token.type===Token.Template?Messages.UnexpectedTemplate:Messages.UnexpectedToken;if(token.type===Token.Keyword){if(isFutureReservedWord(token.value)){msg=Messages.UnexpectedReserved}else if(strict&&isStrictModeReservedWord(token.value)){msg=Messages.StrictReservedWord}}}value=token.type===Token.Template?token.value.raw:token.value}else{value="ILLEGAL"}msg=msg.replace("%0",value);return token&&typeof token.lineNumber==="number"?createError(token.lineNumber,token.start,msg):createError(scanning?lineNumber:lastLineNumber,scanning?index:lastIndex,msg)}function throwUnexpectedToken(token,message){throw unexpectedTokenError(token,message)}function tolerateUnexpectedToken(token,message){var error=unexpectedTokenError(token,message);if(extra.errors){recordError(error)}else{throw error}}function expect(value){var token=lex();if(token.type!==Token.Punctuator||token.value!==value){throwUnexpectedToken(token)}}function expectCommaSeparator(){var token;if(extra.errors){token=lookahead;if(token.type===Token.Punctuator&&token.value===","){lex()}else if(token.type===Token.Punctuator&&token.value===";"){lex();tolerateUnexpectedToken(token)}else{tolerateUnexpectedToken(token,Messages.UnexpectedToken)}}else{expect(",")}}function expectKeyword(keyword){var token=lex();if(token.type!==Token.Keyword||token.value!==keyword){throwUnexpectedToken(token)}}function match(value){return lookahead.type===Token.Punctuator&&lookahead.value===value}function matchKeyword(keyword){return lookahead.type===Token.Keyword&&lookahead.value===keyword}function matchContextualKeyword(keyword){return lookahead.type===Token.Identifier&&lookahead.value===keyword}function matchAssign(){var op;if(lookahead.type!==Token.Punctuator){return false}op=lookahead.value;return op==="="||op==="*="||op==="/="||op==="%="||op==="+="||op==="-="||op==="<<="||op===">>="||op===">>>="||op==="&="||op==="^="||op==="|="}function consumeSemicolon(){if(source.charCodeAt(startIndex)===59||match(";")){lex();return}if(hasLineTerminator){return}lastIndex=startIndex;lastLineNumber=startLineNumber;lastLineStart=startLineStart;if(lookahead.type!==Token.EOF&&!match("}")){throwUnexpectedToken(lookahead)}}function isolateCoverGrammar(parser){var oldIsBindingElement=isBindingElement,oldIsAssignmentTarget=isAssignmentTarget,oldFirstCoverInitializedNameError=firstCoverInitializedNameError,result;isBindingElement=true;isAssignmentTarget=true;firstCoverInitializedNameError=null;result=parser();if(firstCoverInitializedNameError!==null){throwUnexpectedToken(firstCoverInitializedNameError)}isBindingElement=oldIsBindingElement;isAssignmentTarget=oldIsAssignmentTarget;firstCoverInitializedNameError=oldFirstCoverInitializedNameError;return result}function inheritCoverGrammar(parser){var oldIsBindingElement=isBindingElement,oldIsAssignmentTarget=isAssignmentTarget,oldFirstCoverInitializedNameError=firstCoverInitializedNameError,result;isBindingElement=true;isAssignmentTarget=true;firstCoverInitializedNameError=null;result=parser();isBindingElement=isBindingElement&&oldIsBindingElement;isAssignmentTarget=isAssignmentTarget&&oldIsAssignmentTarget;firstCoverInitializedNameError=oldFirstCoverInitializedNameError||firstCoverInitializedNameError;return result}function parseArrayPattern(){var node=new Node,elements=[],rest,restNode;expect("[");while(!match("]")){if(match(",")){lex();elements.push(null)}else{if(match("...")){restNode=new Node;lex();rest=parseVariableIdentifier();elements.push(restNode.finishRestElement(rest));break}else{elements.push(parsePatternWithDefault())}if(!match("]")){expect(",")}}}expect("]");return node.finishArrayPattern(elements)}function parsePropertyPattern(){var node=new Node,key,computed=match("["),init;if(lookahead.type===Token.Identifier){key=parseVariableIdentifier();if(match("=")){lex();init=parseAssignmentExpression();return node.finishProperty("init",key,false,new WrappingNode(key).finishAssignmentPattern(key,init),false,false)}else if(!match(":")){return node.finishProperty("init",key,false,key,false,true)}}else{key=parseObjectPropertyKey()}expect(":");init=parsePatternWithDefault();return node.finishProperty("init",key,computed,init,false,false)}function parseObjectPattern(){var node=new Node,properties=[];expect("{");while(!match("}")){properties.push(parsePropertyPattern());if(!match("}")){expect(",")}}lex();return node.finishObjectPattern(properties)}function parsePattern(){if(lookahead.type===Token.Identifier){return parseVariableIdentifier()}else if(match("[")){return parseArrayPattern()}else if(match("{")){return parseObjectPattern()}throwUnexpectedToken(lookahead)}function parsePatternWithDefault(){var startToken=lookahead,pattern,right;pattern=parsePattern();if(match("=")){lex();right=isolateCoverGrammar(parseAssignmentExpression);pattern=new WrappingNode(startToken).finishAssignmentPattern(pattern,right)}return pattern}function parseArrayInitialiser(){var elements=[],node=new Node,restSpread;expect("[");while(!match("]")){if(match(",")){lex();elements.push(null)}else if(match("...")){restSpread=new Node;lex();restSpread.finishSpreadElement(inheritCoverGrammar(parseAssignmentExpression));if(!match("]")){isAssignmentTarget=isBindingElement=false;expect(",")}elements.push(restSpread)}else{elements.push(inheritCoverGrammar(parseAssignmentExpression));if(!match("]")){expect(",")}}}lex();return node.finishArrayExpression(elements)}function parsePropertyFunction(node,paramInfo){var previousStrict,body;isAssignmentTarget=isBindingElement=false;previousStrict=strict;body=isolateCoverGrammar(parseFunctionSourceElements);if(strict&&paramInfo.firstRestricted){tolerateUnexpectedToken(paramInfo.firstRestricted,paramInfo.message)}if(strict&&paramInfo.stricted){tolerateUnexpectedToken(paramInfo.stricted,paramInfo.message)}strict=previousStrict;return node.finishFunctionExpression(null,paramInfo.params,paramInfo.defaults,body)}function parsePropertyMethodFunction(){var params,method,node=new Node;params=parseParams();method=parsePropertyFunction(node,params);return method}function parseObjectPropertyKey(){var token,node=new Node,expr;token=lex();switch(token.type){case Token.StringLiteral:case Token.NumericLiteral:if(strict&&token.octal){tolerateUnexpectedToken(token,Messages.StrictOctalLiteral)}return node.finishLiteral(token);case Token.Identifier:case Token.BooleanLiteral:case Token.NullLiteral:case Token.Keyword:return node.finishIdentifier(token.value);case Token.Punctuator:if(token.value==="["){expr=isolateCoverGrammar(parseAssignmentExpression);expect("]");return expr}break}throwUnexpectedToken(token)}function lookaheadPropertyName(){switch(lookahead.type){case Token.Identifier:case Token.StringLiteral:case Token.BooleanLiteral:case Token.NullLiteral:case Token.NumericLiteral:case Token.Keyword:return true;case Token.Punctuator:return lookahead.value==="["}return false}function tryParseMethodDefinition(token,key,computed,node){var value,options,methodNode;if(token.type===Token.Identifier){if(token.value==="get"&&lookaheadPropertyName()){computed=match("[");key=parseObjectPropertyKey();methodNode=new Node;expect("(");expect(")");value=parsePropertyFunction(methodNode,{params:[],defaults:[],stricted:null,firstRestricted:null,message:null});return node.finishProperty("get",key,computed,value,false,false)}else if(token.value==="set"&&lookaheadPropertyName()){computed=match("[");key=parseObjectPropertyKey();methodNode=new Node;expect("(");options={params:[],defaultCount:0,defaults:[],firstRestricted:null,paramSet:{}};if(match(")")){tolerateUnexpectedToken(lookahead)}else{parseParam(options);if(options.defaultCount===0){options.defaults=[]}}expect(")");value=parsePropertyFunction(methodNode,options);return node.finishProperty("set",key,computed,value,false,false)}}if(match("(")){value=parsePropertyMethodFunction();return node.finishProperty("init",key,computed,value,true,false)}return null}function checkProto(key,computed,hasProto){if(computed===false&&(key.type===Syntax.Identifier&&key.name==="__proto__"||key.type===Syntax.Literal&&key.value==="__proto__")){if(hasProto.value){tolerateError(Messages.DuplicateProtoProperty)}else{hasProto.value=true}}}function parseObjectProperty(hasProto){var token=lookahead,node=new Node,computed,key,maybeMethod,value;computed=match("[");key=parseObjectPropertyKey();maybeMethod=tryParseMethodDefinition(token,key,computed,node);if(maybeMethod){checkProto(maybeMethod.key,maybeMethod.computed,hasProto);return maybeMethod}checkProto(key,computed,hasProto);if(match(":")){lex();value=inheritCoverGrammar(parseAssignmentExpression);return node.finishProperty("init",key,computed,value,false,false)}if(token.type===Token.Identifier){if(match("=")){firstCoverInitializedNameError=lookahead;lex();value=isolateCoverGrammar(parseAssignmentExpression);return node.finishProperty("init",key,computed,new WrappingNode(token).finishAssignmentPattern(key,value),false,true)}return node.finishProperty("init",key,computed,key,false,true)}throwUnexpectedToken(lookahead)}function parseObjectInitialiser(){var properties=[],hasProto={value:false},node=new Node;expect("{");while(!match("}")){properties.push(parseObjectProperty(hasProto));if(!match("}")){expectCommaSeparator()}}expect("}");return node.finishObjectExpression(properties)}function reinterpretExpressionAsPattern(expr){var i;switch(expr.type){case Syntax.Identifier:case Syntax.MemberExpression:case Syntax.RestElement:case Syntax.AssignmentPattern:break;case Syntax.SpreadElement:expr.type=Syntax.RestElement;reinterpretExpressionAsPattern(expr.argument);break;case Syntax.ArrayExpression:expr.type=Syntax.ArrayPattern;for(i=0;i<expr.elements.length;i++){if(expr.elements[i]!==null){reinterpretExpressionAsPattern(expr.elements[i])}}break;case Syntax.ObjectExpression:expr.type=Syntax.ObjectPattern;for(i=0;i<expr.properties.length;i++){reinterpretExpressionAsPattern(expr.properties[i].value)}break;case Syntax.AssignmentExpression:expr.type=Syntax.AssignmentPattern;reinterpretExpressionAsPattern(expr.left);break;default:break}}function parseTemplateElement(option){var node,token;if(lookahead.type!==Token.Template||option.head&&!lookahead.head){throwUnexpectedToken()}node=new Node;token=lex();return node.finishTemplateElement({raw:token.value.raw,cooked:token.value.cooked},token.tail)}function parseTemplateLiteral(){var quasi,quasis,expressions,node=new Node;quasi=parseTemplateElement({head:true});quasis=[quasi];expressions=[];while(!quasi.tail){expressions.push(parseExpression());quasi=parseTemplateElement({head:false});quasis.push(quasi)}return node.finishTemplateLiteral(quasis,expressions)}function parseGroupExpression(){var expr,expressions,startToken,i;expect("(");if(match(")")){lex();if(!match("=>")){expect("=>")}return{type:PlaceHolders.ArrowParameterPlaceHolder,params:[]}}startToken=lookahead;if(match("...")){expr=parseRestElement();expect(")");if(!match("=>")){expect("=>")}return{type:PlaceHolders.ArrowParameterPlaceHolder,params:[expr]}}isBindingElement=true;expr=inheritCoverGrammar(parseAssignmentExpression);if(match(",")){isAssignmentTarget=false;expressions=[expr];while(startIndex<length){if(!match(",")){break}lex();if(match("...")){if(!isBindingElement){throwUnexpectedToken(lookahead)}expressions.push(parseRestElement());expect(")");if(!match("=>")){expect("=>")}isBindingElement=false;for(i=0;i<expressions.length;i++){reinterpretExpressionAsPattern(expressions[i])}return{type:PlaceHolders.ArrowParameterPlaceHolder,params:expressions}}expressions.push(inheritCoverGrammar(parseAssignmentExpression))}expr=new WrappingNode(startToken).finishSequenceExpression(expressions)}expect(")");if(match("=>")){if(!isBindingElement){throwUnexpectedToken(lookahead)}if(expr.type===Syntax.SequenceExpression){for(i=0;i<expr.expressions.length;i++){reinterpretExpressionAsPattern(expr.expressions[i])}}else{reinterpretExpressionAsPattern(expr)}expr={type:PlaceHolders.ArrowParameterPlaceHolder,params:expr.type===Syntax.SequenceExpression?expr.expressions:[expr]}}isBindingElement=false;return expr}function parsePrimaryExpression(){var type,token,expr,node;if(match("(")){isBindingElement=false;return inheritCoverGrammar(parseGroupExpression)}if(match("[")){return inheritCoverGrammar(parseArrayInitialiser)}if(match("{")){return inheritCoverGrammar(parseObjectInitialiser)}type=lookahead.type;node=new Node;if(type===Token.Identifier){expr=node.finishIdentifier(lex().value)}else if(type===Token.StringLiteral||type===Token.NumericLiteral){isAssignmentTarget=isBindingElement=false;if(strict&&lookahead.octal){tolerateUnexpectedToken(lookahead,Messages.StrictOctalLiteral)}expr=node.finishLiteral(lex())}else if(type===Token.Keyword){isAssignmentTarget=isBindingElement=false;if(matchKeyword("function")){return parseFunctionExpression()}if(matchKeyword("this")){lex();return node.finishThisExpression()}if(matchKeyword("class")){return parseClassExpression()}throwUnexpectedToken(lex())}else if(type===Token.BooleanLiteral){isAssignmentTarget=isBindingElement=false;token=lex();token.value=token.value==="true";expr=node.finishLiteral(token)}else if(type===Token.NullLiteral){isAssignmentTarget=isBindingElement=false;token=lex();token.value=null;expr=node.finishLiteral(token)}else if(match("/")||match("/=")){isAssignmentTarget=isBindingElement=false;index=startIndex;if(typeof extra.tokens!=="undefined"){token=collectRegex()}else{token=scanRegExp()}lex();expr=node.finishLiteral(token)}else if(type===Token.Template){expr=parseTemplateLiteral()}else{throwUnexpectedToken(lex())}return expr}function parseArguments(){var args=[];expect("(");if(!match(")")){while(startIndex<length){args.push(isolateCoverGrammar(parseAssignmentExpression));if(match(")")){break}expectCommaSeparator()}}expect(")");return args}function parseNonComputedProperty(){var token,node=new Node;token=lex();if(!isIdentifierName(token)){throwUnexpectedToken(token)}return node.finishIdentifier(token.value)}function parseNonComputedMember(){expect(".");return parseNonComputedProperty()}function parseComputedMember(){var expr;expect("[");expr=isolateCoverGrammar(parseExpression);expect("]");return expr}function parseNewExpression(){var callee,args,node=new Node;expectKeyword("new");callee=isolateCoverGrammar(parseLeftHandSideExpression);args=match("(")?parseArguments():[];isAssignmentTarget=isBindingElement=false;return node.finishNewExpression(callee,args)}function parseLeftHandSideExpressionAllowCall(){var quasi,expr,args,property,startToken,previousAllowIn=state.allowIn;startToken=lookahead;state.allowIn=true;if(matchKeyword("super")&&state.inFunctionBody){expr=new Node;lex();expr=expr.finishSuper();if(!match("(")&&!match(".")&&!match("[")){throwUnexpectedToken(lookahead)}}else{expr=inheritCoverGrammar(matchKeyword("new")?parseNewExpression:parsePrimaryExpression)}for(;;){if(match(".")){isBindingElement=false;isAssignmentTarget=true;property=parseNonComputedMember();expr=new WrappingNode(startToken).finishMemberExpression(".",expr,property)}else if(match("(")){isBindingElement=false;isAssignmentTarget=false;args=parseArguments();expr=new WrappingNode(startToken).finishCallExpression(expr,args)}else if(match("[")){isBindingElement=false;isAssignmentTarget=true;property=parseComputedMember();expr=new WrappingNode(startToken).finishMemberExpression("[",expr,property)}else if(lookahead.type===Token.Template&&lookahead.head){quasi=parseTemplateLiteral();expr=new WrappingNode(startToken).finishTaggedTemplateExpression(expr,quasi)}else{break}}state.allowIn=previousAllowIn;return expr}function parseLeftHandSideExpression(){var quasi,expr,property,startToken;assert(state.allowIn,"callee of new expression always allow in keyword.");startToken=lookahead;if(matchKeyword("super")&&state.inFunctionBody){expr=new Node;lex();expr=expr.finishSuper();if(!match("[")&&!match(".")){throwUnexpectedToken(lookahead)}}else{expr=inheritCoverGrammar(matchKeyword("new")?parseNewExpression:parsePrimaryExpression)}for(;;){if(match("[")){isBindingElement=false;isAssignmentTarget=true;property=parseComputedMember();expr=new WrappingNode(startToken).finishMemberExpression("[",expr,property)}else if(match(".")){isBindingElement=false;isAssignmentTarget=true;property=parseNonComputedMember();expr=new WrappingNode(startToken).finishMemberExpression(".",expr,property)}else if(lookahead.type===Token.Template&&lookahead.head){quasi=parseTemplateLiteral();expr=new WrappingNode(startToken).finishTaggedTemplateExpression(expr,quasi)}else{break}}return expr}function parsePostfixExpression(){var expr,token,startToken=lookahead;expr=inheritCoverGrammar(parseLeftHandSideExpressionAllowCall);if(!hasLineTerminator&&lookahead.type===Token.Punctuator){if(match("++")||match("--")){if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){tolerateError(Messages.StrictLHSPostfix)}if(!isAssignmentTarget){tolerateError(Messages.InvalidLHSInAssignment)}isAssignmentTarget=isBindingElement=false;token=lex();expr=new WrappingNode(startToken).finishPostfixExpression(token.value,expr)}}return expr}function parseUnaryExpression(){var token,expr,startToken;if(lookahead.type!==Token.Punctuator&&lookahead.type!==Token.Keyword){expr=parsePostfixExpression()}else if(match("++")||match("--")){startToken=lookahead;token=lex();expr=inheritCoverGrammar(parseUnaryExpression);if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){tolerateError(Messages.StrictLHSPrefix)}if(!isAssignmentTarget){tolerateError(Messages.InvalidLHSInAssignment)}expr=new WrappingNode(startToken).finishUnaryExpression(token.value,expr);isAssignmentTarget=isBindingElement=false}else if(match("+")||match("-")||match("~")||match("!")){startToken=lookahead;token=lex();expr=inheritCoverGrammar(parseUnaryExpression);expr=new WrappingNode(startToken).finishUnaryExpression(token.value,expr);isAssignmentTarget=isBindingElement=false}else if(matchKeyword("delete")||matchKeyword("void")||matchKeyword("typeof")){startToken=lookahead;token=lex();expr=inheritCoverGrammar(parseUnaryExpression);expr=new WrappingNode(startToken).finishUnaryExpression(token.value,expr);if(strict&&expr.operator==="delete"&&expr.argument.type===Syntax.Identifier){tolerateError(Messages.StrictDelete)}isAssignmentTarget=isBindingElement=false}else{expr=parsePostfixExpression()}return expr}function binaryPrecedence(token,allowIn){var prec=0;if(token.type!==Token.Punctuator&&token.type!==Token.Keyword){return 0}switch(token.value){case"||":prec=1;break;case"&&":prec=2;break;case"|":prec=3;break;case"^":prec=4;break;case"&":prec=5;break;case"==":case"!=":case"===":case"!==":prec=6;break;case"<":case">":case"<=":case">=":case"instanceof":prec=7;break;case"in":prec=allowIn?7:0;break;case"<<":case">>":case">>>":prec=8;break;case"+":case"-":prec=9;break;case"*":case"/":case"%":prec=11;break;default:break}return prec}function parseBinaryExpression(){var marker,markers,expr,token,prec,stack,right,operator,left,i;marker=lookahead;left=inheritCoverGrammar(parseUnaryExpression);token=lookahead;prec=binaryPrecedence(token,state.allowIn);if(prec===0){return left}isAssignmentTarget=isBindingElement=false;token.prec=prec;lex();markers=[marker,lookahead];right=isolateCoverGrammar(parseUnaryExpression);stack=[left,token,right];while((prec=binaryPrecedence(lookahead,state.allowIn))>0){while(stack.length>2&&prec<=stack[stack.length-2].prec){right=stack.pop();operator=stack.pop().value;left=stack.pop();markers.pop();expr=new WrappingNode(markers[markers.length-1]).finishBinaryExpression(operator,left,right);stack.push(expr)}token=lex();token.prec=prec;stack.push(token);markers.push(lookahead);expr=isolateCoverGrammar(parseUnaryExpression);stack.push(expr)}i=stack.length-1;expr=stack[i];markers.pop();while(i>1){expr=new WrappingNode(markers.pop()).finishBinaryExpression(stack[i-1].value,stack[i-2],expr);i-=2}return expr}function parseConditionalExpression(){var expr,previousAllowIn,consequent,alternate,startToken;startToken=lookahead;expr=inheritCoverGrammar(parseBinaryExpression);if(match("?")){lex();previousAllowIn=state.allowIn;state.allowIn=true;consequent=isolateCoverGrammar(parseAssignmentExpression);state.allowIn=previousAllowIn;expect(":");alternate=isolateCoverGrammar(parseAssignmentExpression);expr=new WrappingNode(startToken).finishConditionalExpression(expr,consequent,alternate);isAssignmentTarget=isBindingElement=false}return expr}function parseConciseBody(){if(match("{")){return parseFunctionSourceElements()}return isolateCoverGrammar(parseAssignmentExpression)}function checkPatternParam(options,param){var i;switch(param.type){case Syntax.Identifier:validateParam(options,param,param.name);break;case Syntax.RestElement:checkPatternParam(options,param.argument);break;case Syntax.AssignmentPattern:checkPatternParam(options,param.left);break;case Syntax.ArrayPattern:for(i=0;i<param.elements.length;i++){if(param.elements[i]!==null){checkPatternParam(options,param.elements[i])}}break;default:assert(param.type===Syntax.ObjectPattern,"Invalid type");for(i=0;i<param.properties.length;i++){checkPatternParam(options,param.properties[i].value)}break}}function reinterpretAsCoverFormalsList(expr){var i,len,param,params,defaults,defaultCount,options,token;defaults=[];defaultCount=0;params=[expr];switch(expr.type){case Syntax.Identifier:break;case PlaceHolders.ArrowParameterPlaceHolder:params=expr.params;break;default:return null}options={paramSet:{}};for(i=0,len=params.length;i<len;i+=1){param=params[i];
switch(param.type){case Syntax.AssignmentPattern:params[i]=param.left;defaults.push(param.right);++defaultCount;checkPatternParam(options,param.left);break;default:checkPatternParam(options,param);params[i]=param;defaults.push(null);break}}if(options.message===Messages.StrictParamDupe){token=strict?options.stricted:options.firstRestricted;throwUnexpectedToken(token,options.message)}if(defaultCount===0){defaults=[]}return{params:params,defaults:defaults,stricted:options.stricted,firstRestricted:options.firstRestricted,message:options.message}}function parseArrowFunctionExpression(options,node){var previousStrict,body;if(hasLineTerminator){tolerateUnexpectedToken(lookahead)}expect("=>");previousStrict=strict;body=parseConciseBody();if(strict&&options.firstRestricted){throwUnexpectedToken(options.firstRestricted,options.message)}if(strict&&options.stricted){tolerateUnexpectedToken(options.stricted,options.message)}strict=previousStrict;return node.finishArrowFunctionExpression(options.params,options.defaults,body,body.type!==Syntax.BlockStatement)}function parseAssignmentExpression(){var token,expr,right,list,startToken;startToken=lookahead;token=lookahead;expr=parseConditionalExpression();if(expr.type===PlaceHolders.ArrowParameterPlaceHolder||match("=>")){isAssignmentTarget=isBindingElement=false;list=reinterpretAsCoverFormalsList(expr);if(list){firstCoverInitializedNameError=null;return parseArrowFunctionExpression(list,new WrappingNode(startToken))}return expr}if(matchAssign()){if(!isAssignmentTarget){tolerateError(Messages.InvalidLHSInAssignment)}if(strict&&expr.type===Syntax.Identifier&&isRestrictedWord(expr.name)){tolerateUnexpectedToken(token,Messages.StrictLHSAssignment)}if(!match("=")){isAssignmentTarget=isBindingElement=false}else{reinterpretExpressionAsPattern(expr)}token=lex();right=isolateCoverGrammar(parseAssignmentExpression);expr=new WrappingNode(startToken).finishAssignmentExpression(token.value,expr,right);firstCoverInitializedNameError=null}return expr}function parseExpression(){var expr,startToken=lookahead,expressions;expr=isolateCoverGrammar(parseAssignmentExpression);if(match(",")){expressions=[expr];while(startIndex<length){if(!match(",")){break}lex();expressions.push(isolateCoverGrammar(parseAssignmentExpression))}expr=new WrappingNode(startToken).finishSequenceExpression(expressions)}return expr}function parseStatementListItem(){if(lookahead.type===Token.Keyword){switch(lookahead.value){case"export":if(sourceType!=="module"){tolerateUnexpectedToken(lookahead,Messages.IllegalExportDeclaration)}return parseExportDeclaration();case"import":if(sourceType!=="module"){tolerateUnexpectedToken(lookahead,Messages.IllegalImportDeclaration)}return parseImportDeclaration();case"const":case"let":return parseLexicalDeclaration({inFor:false});case"function":return parseFunctionDeclaration(new Node);case"class":return parseClassDeclaration()}}return parseStatement()}function parseStatementList(){var list=[];while(startIndex<length){if(match("}")){break}list.push(parseStatementListItem())}return list}function parseBlock(){var block,node=new Node;expect("{");block=parseStatementList();expect("}");return node.finishBlockStatement(block)}function parseVariableIdentifier(){var token,node=new Node;token=lex();if(token.type!==Token.Identifier){if(strict&&token.type===Token.Keyword&&isStrictModeReservedWord(token.value)){tolerateUnexpectedToken(token,Messages.StrictReservedWord)}else{throwUnexpectedToken(token)}}return node.finishIdentifier(token.value)}function parseVariableDeclaration(){var init=null,id,node=new Node;id=parsePattern();if(strict&&isRestrictedWord(id.name)){tolerateError(Messages.StrictVarName)}if(match("=")){lex();init=isolateCoverGrammar(parseAssignmentExpression)}else if(id.type!==Syntax.Identifier){expect("=")}return node.finishVariableDeclarator(id,init)}function parseVariableDeclarationList(){var list=[];do{list.push(parseVariableDeclaration());if(!match(",")){break}lex()}while(startIndex<length);return list}function parseVariableStatement(node){var declarations;expectKeyword("var");declarations=parseVariableDeclarationList();consumeSemicolon();return node.finishVariableDeclaration(declarations)}function parseLexicalBinding(kind,options){var init=null,id,node=new Node;id=parsePattern();if(strict&&id.type===Syntax.Identifier&&isRestrictedWord(id.name)){tolerateError(Messages.StrictVarName)}if(kind==="const"){if(!matchKeyword("in")){expect("=");init=isolateCoverGrammar(parseAssignmentExpression)}}else if(!options.inFor&&id.type!==Syntax.Identifier||match("=")){expect("=");init=isolateCoverGrammar(parseAssignmentExpression)}return node.finishVariableDeclarator(id,init)}function parseBindingList(kind,options){var list=[];do{list.push(parseLexicalBinding(kind,options));if(!match(",")){break}lex()}while(startIndex<length);return list}function parseLexicalDeclaration(options){var kind,declarations,node=new Node;kind=lex().value;assert(kind==="let"||kind==="const","Lexical declaration must be either let or const");declarations=parseBindingList(kind,options);consumeSemicolon();return node.finishLexicalDeclaration(declarations,kind)}function parseRestElement(){var param,node=new Node;lex();if(match("{")){throwError(Messages.ObjectPatternAsRestParameter)}param=parseVariableIdentifier();if(match("=")){throwError(Messages.DefaultRestParameter)}if(!match(")")){throwError(Messages.ParameterAfterRestParameter)}return node.finishRestElement(param)}function parseEmptyStatement(node){expect(";");return node.finishEmptyStatement()}function parseExpressionStatement(node){var expr=parseExpression();consumeSemicolon();return node.finishExpressionStatement(expr)}function parseIfStatement(node){var test,consequent,alternate;expectKeyword("if");expect("(");test=parseExpression();expect(")");consequent=parseStatement();if(matchKeyword("else")){lex();alternate=parseStatement()}else{alternate=null}return node.finishIfStatement(test,consequent,alternate)}function parseDoWhileStatement(node){var body,test,oldInIteration;expectKeyword("do");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;expectKeyword("while");expect("(");test=parseExpression();expect(")");if(match(";")){lex()}return node.finishDoWhileStatement(body,test)}function parseWhileStatement(node){var test,body,oldInIteration;expectKeyword("while");expect("(");test=parseExpression();expect(")");oldInIteration=state.inIteration;state.inIteration=true;body=parseStatement();state.inIteration=oldInIteration;return node.finishWhileStatement(test,body)}function parseForStatement(node){var init,initSeq,initStartToken,test,update,left,right,kind,declarations,body,oldInIteration,previousAllowIn=state.allowIn;init=test=update=null;expectKeyword("for");expect("(");if(match(";")){lex()}else{if(matchKeyword("var")){init=new Node;lex();state.allowIn=false;init=init.finishVariableDeclaration(parseVariableDeclarationList());state.allowIn=previousAllowIn;if(init.declarations.length===1&&matchKeyword("in")){lex();left=init;right=parseExpression();init=null}else{expect(";")}}else if(matchKeyword("const")||matchKeyword("let")){init=new Node;kind=lex().value;state.allowIn=false;declarations=parseBindingList(kind,{inFor:true});state.allowIn=previousAllowIn;if(declarations.length===1&&declarations[0].init===null&&matchKeyword("in")){init=init.finishLexicalDeclaration(declarations,kind);lex();left=init;right=parseExpression();init=null}else{consumeSemicolon();init=init.finishLexicalDeclaration(declarations,kind)}}else{initStartToken=lookahead;state.allowIn=false;init=inheritCoverGrammar(parseAssignmentExpression);state.allowIn=previousAllowIn;if(matchKeyword("in")){if(!isAssignmentTarget){tolerateError(Messages.InvalidLHSInForIn)}lex();reinterpretExpressionAsPattern(init);left=init;right=parseExpression();init=null}else{if(match(",")){initSeq=[init];while(match(",")){lex();initSeq.push(isolateCoverGrammar(parseAssignmentExpression))}init=new WrappingNode(initStartToken).finishSequenceExpression(initSeq)}expect(";")}}}if(typeof left==="undefined"){if(!match(";")){test=parseExpression()}expect(";");if(!match(")")){update=parseExpression()}}expect(")");oldInIteration=state.inIteration;state.inIteration=true;body=isolateCoverGrammar(parseStatement);state.inIteration=oldInIteration;return typeof left==="undefined"?node.finishForStatement(init,test,update,body):node.finishForInStatement(left,right,body)}function parseContinueStatement(node){var label=null,key;expectKeyword("continue");if(source.charCodeAt(startIndex)===59){lex();if(!state.inIteration){throwError(Messages.IllegalContinue)}return node.finishContinueStatement(null)}if(hasLineTerminator){if(!state.inIteration){throwError(Messages.IllegalContinue)}return node.finishContinueStatement(null)}if(lookahead.type===Token.Identifier){label=parseVariableIdentifier();key="$"+label.name;if(!Object.prototype.hasOwnProperty.call(state.labelSet,key)){throwError(Messages.UnknownLabel,label.name)}}consumeSemicolon();if(label===null&&!state.inIteration){throwError(Messages.IllegalContinue)}return node.finishContinueStatement(label)}function parseBreakStatement(node){var label=null,key;expectKeyword("break");if(source.charCodeAt(lastIndex)===59){lex();if(!(state.inIteration||state.inSwitch)){throwError(Messages.IllegalBreak)}return node.finishBreakStatement(null)}if(hasLineTerminator){if(!(state.inIteration||state.inSwitch)){throwError(Messages.IllegalBreak)}return node.finishBreakStatement(null)}if(lookahead.type===Token.Identifier){label=parseVariableIdentifier();key="$"+label.name;if(!Object.prototype.hasOwnProperty.call(state.labelSet,key)){throwError(Messages.UnknownLabel,label.name)}}consumeSemicolon();if(label===null&&!(state.inIteration||state.inSwitch)){throwError(Messages.IllegalBreak)}return node.finishBreakStatement(label)}function parseReturnStatement(node){var argument=null;expectKeyword("return");if(!state.inFunctionBody){tolerateError(Messages.IllegalReturn)}if(source.charCodeAt(lastIndex)===32){if(isIdentifierStart(source.charCodeAt(lastIndex+1))){argument=parseExpression();consumeSemicolon();return node.finishReturnStatement(argument)}}if(hasLineTerminator){return node.finishReturnStatement(null)}if(!match(";")){if(!match("}")&&lookahead.type!==Token.EOF){argument=parseExpression()}}consumeSemicolon();return node.finishReturnStatement(argument)}function parseWithStatement(node){var object,body;if(strict){tolerateError(Messages.StrictModeWith)}expectKeyword("with");expect("(");object=parseExpression();expect(")");body=parseStatement();return node.finishWithStatement(object,body)}function parseSwitchCase(){var test,consequent=[],statement,node=new Node;if(matchKeyword("default")){lex();test=null}else{expectKeyword("case");test=parseExpression()}expect(":");while(startIndex<length){if(match("}")||matchKeyword("default")||matchKeyword("case")){break}statement=parseStatementListItem();consequent.push(statement)}return node.finishSwitchCase(test,consequent)}function parseSwitchStatement(node){var discriminant,cases,clause,oldInSwitch,defaultFound;expectKeyword("switch");expect("(");discriminant=parseExpression();expect(")");expect("{");cases=[];if(match("}")){lex();return node.finishSwitchStatement(discriminant,cases)}oldInSwitch=state.inSwitch;state.inSwitch=true;defaultFound=false;while(startIndex<length){if(match("}")){break}clause=parseSwitchCase();if(clause.test===null){if(defaultFound){throwError(Messages.MultipleDefaultsInSwitch)}defaultFound=true}cases.push(clause)}state.inSwitch=oldInSwitch;expect("}");return node.finishSwitchStatement(discriminant,cases)}function parseThrowStatement(node){var argument;expectKeyword("throw");if(hasLineTerminator){throwError(Messages.NewlineAfterThrow)}argument=parseExpression();consumeSemicolon();return node.finishThrowStatement(argument)}function parseCatchClause(){var param,body,node=new Node;expectKeyword("catch");expect("(");if(match(")")){throwUnexpectedToken(lookahead)}param=parsePattern();if(strict&&isRestrictedWord(param.name)){tolerateError(Messages.StrictCatchVariable)}expect(")");body=parseBlock();return node.finishCatchClause(param,body)}function parseTryStatement(node){var block,handler=null,finalizer=null;expectKeyword("try");block=parseBlock();if(matchKeyword("catch")){handler=parseCatchClause()}if(matchKeyword("finally")){lex();finalizer=parseBlock()}if(!handler&&!finalizer){throwError(Messages.NoCatchOrFinally)}return node.finishTryStatement(block,handler,finalizer)}function parseDebuggerStatement(node){expectKeyword("debugger");consumeSemicolon();return node.finishDebuggerStatement()}function parseStatement(){var type=lookahead.type,expr,labeledBody,key,node;if(type===Token.EOF){throwUnexpectedToken(lookahead)}if(type===Token.Punctuator&&lookahead.value==="{"){return parseBlock()}isAssignmentTarget=isBindingElement=true;node=new Node;if(type===Token.Punctuator){switch(lookahead.value){case";":return parseEmptyStatement(node);case"(":return parseExpressionStatement(node);default:break}}else if(type===Token.Keyword){switch(lookahead.value){case"break":return parseBreakStatement(node);case"continue":return parseContinueStatement(node);case"debugger":return parseDebuggerStatement(node);case"do":return parseDoWhileStatement(node);case"for":return parseForStatement(node);case"function":return parseFunctionDeclaration(node);case"if":return parseIfStatement(node);case"return":return parseReturnStatement(node);case"switch":return parseSwitchStatement(node);case"throw":return parseThrowStatement(node);case"try":return parseTryStatement(node);case"var":return parseVariableStatement(node);case"while":return parseWhileStatement(node);case"with":return parseWithStatement(node);default:break}}expr=parseExpression();if(expr.type===Syntax.Identifier&&match(":")){lex();key="$"+expr.name;if(Object.prototype.hasOwnProperty.call(state.labelSet,key)){throwError(Messages.Redeclaration,"Label",expr.name)}state.labelSet[key]=true;labeledBody=parseStatement();delete state.labelSet[key];return node.finishLabeledStatement(expr,labeledBody)}consumeSemicolon();return node.finishExpressionStatement(expr)}function parseFunctionSourceElements(){var statement,body=[],token,directive,firstRestricted,oldLabelSet,oldInIteration,oldInSwitch,oldInFunctionBody,oldParenthesisCount,node=new Node;expect("{");while(startIndex<length){if(lookahead.type!==Token.StringLiteral){break}token=lookahead;statement=parseStatementListItem();body.push(statement);if(statement.expression.type!==Syntax.Literal){break}directive=source.slice(token.start+1,token.end-1);if(directive==="use strict"){strict=true;if(firstRestricted){tolerateUnexpectedToken(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}oldLabelSet=state.labelSet;oldInIteration=state.inIteration;oldInSwitch=state.inSwitch;oldInFunctionBody=state.inFunctionBody;oldParenthesisCount=state.parenthesizedCount;state.labelSet={};state.inIteration=false;state.inSwitch=false;state.inFunctionBody=true;state.parenthesizedCount=0;while(startIndex<length){if(match("}")){break}body.push(parseStatementListItem())}expect("}");state.labelSet=oldLabelSet;state.inIteration=oldInIteration;state.inSwitch=oldInSwitch;state.inFunctionBody=oldInFunctionBody;state.parenthesizedCount=oldParenthesisCount;return node.finishBlockStatement(body)}function validateParam(options,param,name){var key="$"+name;if(strict){if(isRestrictedWord(name)){options.stricted=param;options.message=Messages.StrictParamName}if(Object.prototype.hasOwnProperty.call(options.paramSet,key)){options.stricted=param;options.message=Messages.StrictParamDupe}}else if(!options.firstRestricted){if(isRestrictedWord(name)){options.firstRestricted=param;options.message=Messages.StrictParamName}else if(isStrictModeReservedWord(name)){options.firstRestricted=param;options.message=Messages.StrictReservedWord}else if(Object.prototype.hasOwnProperty.call(options.paramSet,key)){options.firstRestricted=param;options.message=Messages.StrictParamDupe}}options.paramSet[key]=true}function parseParam(options){var token,param,def;token=lookahead;if(token.value==="..."){param=parseRestElement();validateParam(options,param.argument,param.argument.name);options.params.push(param);options.defaults.push(null);return false}param=parsePatternWithDefault();validateParam(options,token,token.value);if(param.type===Syntax.AssignmentPattern){def=param.right;param=param.left;++options.defaultCount}options.params.push(param);options.defaults.push(def);return!match(")")}function parseParams(firstRestricted){var options;options={params:[],defaultCount:0,defaults:[],firstRestricted:firstRestricted};expect("(");if(!match(")")){options.paramSet={};while(startIndex<length){if(!parseParam(options)){break}expect(",")}}expect(")");if(options.defaultCount===0){options.defaults=[]}return{params:options.params,defaults:options.defaults,stricted:options.stricted,firstRestricted:options.firstRestricted,message:options.message}}function parseFunctionDeclaration(node,identifierIsOptional){var id=null,params=[],defaults=[],body,token,stricted,tmp,firstRestricted,message,previousStrict;expectKeyword("function");if(!identifierIsOptional||!match("(")){token=lookahead;id=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){tolerateUnexpectedToken(token,Messages.StrictFunctionName)}}else{if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictFunctionName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}}}tmp=parseParams(firstRestricted);params=tmp.params;defaults=tmp.defaults;stricted=tmp.stricted;firstRestricted=tmp.firstRestricted;if(tmp.message){message=tmp.message}previousStrict=strict;body=parseFunctionSourceElements();if(strict&&firstRestricted){throwUnexpectedToken(firstRestricted,message)}if(strict&&stricted){tolerateUnexpectedToken(stricted,message)}strict=previousStrict;return node.finishFunctionDeclaration(id,params,defaults,body)}function parseFunctionExpression(){var token,id=null,stricted,firstRestricted,message,tmp,params=[],defaults=[],body,previousStrict,node=new Node;expectKeyword("function");if(!match("(")){token=lookahead;id=parseVariableIdentifier();if(strict){if(isRestrictedWord(token.value)){tolerateUnexpectedToken(token,Messages.StrictFunctionName)}}else{if(isRestrictedWord(token.value)){firstRestricted=token;message=Messages.StrictFunctionName}else if(isStrictModeReservedWord(token.value)){firstRestricted=token;message=Messages.StrictReservedWord}}}tmp=parseParams(firstRestricted);params=tmp.params;defaults=tmp.defaults;stricted=tmp.stricted;firstRestricted=tmp.firstRestricted;if(tmp.message){message=tmp.message}previousStrict=strict;body=parseFunctionSourceElements();if(strict&&firstRestricted){throwUnexpectedToken(firstRestricted,message)}if(strict&&stricted){tolerateUnexpectedToken(stricted,message)}strict=previousStrict;return node.finishFunctionExpression(id,params,defaults,body)}function parseClassBody(){var classBody,token,isStatic,hasConstructor=false,body,method,computed,key;classBody=new Node;expect("{");body=[];while(!match("}")){if(match(";")){lex()}else{method=new Node;token=lookahead;isStatic=false;computed=match("[");key=parseObjectPropertyKey();if(key.name==="static"&&lookaheadPropertyName()){token=lookahead;isStatic=true;computed=match("[");key=parseObjectPropertyKey()}method=tryParseMethodDefinition(token,key,computed,method);if(method){method["static"]=isStatic;if(method.kind==="init"){method.kind="method"}if(!isStatic){if(!method.computed&&(method.key.name||method.key.value.toString())==="constructor"){if(method.kind!=="method"||!method.method||method.value.generator){throwUnexpectedToken(token,Messages.ConstructorSpecialMethod)}if(hasConstructor){throwUnexpectedToken(token,Messages.DuplicateConstructor)}else{hasConstructor=true}method.kind="constructor"}}else{if(!method.computed&&(method.key.name||method.key.value.toString())==="prototype"){throwUnexpectedToken(token,Messages.StaticPrototype)}}method.type=Syntax.MethodDefinition;delete method.method;delete method.shorthand;body.push(method)}else{throwUnexpectedToken(lookahead)}}}lex();return classBody.finishClassBody(body)}function parseClassDeclaration(identifierIsOptional){var id=null,superClass=null,classNode=new Node,classBody,previousStrict=strict;strict=true;expectKeyword("class");if(!identifierIsOptional||lookahead.type===Token.Identifier){id=parseVariableIdentifier()}if(matchKeyword("extends")){lex();superClass=isolateCoverGrammar(parseLeftHandSideExpressionAllowCall)}classBody=parseClassBody();strict=previousStrict;return classNode.finishClassDeclaration(id,superClass,classBody)}function parseClassExpression(){var id=null,superClass=null,classNode=new Node,classBody,previousStrict=strict;strict=true;expectKeyword("class");if(lookahead.type===Token.Identifier){id=parseVariableIdentifier()}if(matchKeyword("extends")){lex();superClass=isolateCoverGrammar(parseLeftHandSideExpressionAllowCall)}classBody=parseClassBody();strict=previousStrict;return classNode.finishClassExpression(id,superClass,classBody)}function parseModuleSpecifier(){var node=new Node;if(lookahead.type!==Token.StringLiteral){throwError(Messages.InvalidModuleSpecifier)}return node.finishLiteral(lex())}function parseExportSpecifier(){var exported,local,node=new Node,def;if(matchKeyword("default")){def=new Node;lex();local=def.finishIdentifier("default")}else{local=parseVariableIdentifier()}if(matchContextualKeyword("as")){lex();exported=parseNonComputedProperty()}return node.finishExportSpecifier(local,exported)}function parseExportNamedDeclaration(node){var declaration=null,isExportFromIdentifier,src=null,specifiers=[];if(lookahead.type===Token.Keyword){switch(lookahead.value){case"let":case"const":case"var":case"class":case"function":declaration=parseStatementListItem();return node.finishExportNamedDeclaration(declaration,specifiers,null)}}expect("{");if(!match("}")){do{isExportFromIdentifier=isExportFromIdentifier||matchKeyword("default");specifiers.push(parseExportSpecifier())}while(match(",")&&lex())}expect("}");if(matchContextualKeyword("from")){lex();src=parseModuleSpecifier();consumeSemicolon()}else if(isExportFromIdentifier){throwError(lookahead.value?Messages.UnexpectedToken:Messages.MissingFromClause,lookahead.value)}else{consumeSemicolon()}return node.finishExportNamedDeclaration(declaration,specifiers,src)}function parseExportDefaultDeclaration(node){var declaration=null,expression=null;expectKeyword("default");if(matchKeyword("function")){declaration=parseFunctionDeclaration(new Node,true);return node.finishExportDefaultDeclaration(declaration)}if(matchKeyword("class")){declaration=parseClassDeclaration(true);return node.finishExportDefaultDeclaration(declaration)}if(matchContextualKeyword("from")){throwError(Messages.UnexpectedToken,lookahead.value)}if(match("{")){expression=parseObjectInitialiser()}else if(match("[")){expression=parseArrayInitialiser()}else{expression=parseAssignmentExpression()}consumeSemicolon();return node.finishExportDefaultDeclaration(expression)}function parseExportAllDeclaration(node){var src;expect("*");if(!matchContextualKeyword("from")){throwError(lookahead.value?Messages.UnexpectedToken:Messages.MissingFromClause,lookahead.value)}lex();src=parseModuleSpecifier();consumeSemicolon();return node.finishExportAllDeclaration(src)}function parseExportDeclaration(){var node=new Node;if(state.inFunctionBody){throwError(Messages.IllegalExportDeclaration)}expectKeyword("export");if(matchKeyword("default")){return parseExportDefaultDeclaration(node)}if(match("*")){return parseExportAllDeclaration(node)}return parseExportNamedDeclaration(node)}function parseImportSpecifier(){var local,imported,node=new Node;imported=parseNonComputedProperty();if(matchContextualKeyword("as")){lex();local=parseVariableIdentifier()}return node.finishImportSpecifier(local,imported)}function parseNamedImports(){var specifiers=[];expect("{");if(!match("}")){do{specifiers.push(parseImportSpecifier())}while(match(",")&&lex())}expect("}");return specifiers}function parseImportDefaultSpecifier(){var local,node=new Node;local=parseNonComputedProperty();return node.finishImportDefaultSpecifier(local)}function parseImportNamespaceSpecifier(){var local,node=new Node;expect("*");if(!matchContextualKeyword("as")){throwError(Messages.NoAsAfterImportNamespace)}lex();local=parseNonComputedProperty();return node.finishImportNamespaceSpecifier(local)}function parseImportDeclaration(){var specifiers,src,node=new Node;if(state.inFunctionBody){throwError(Messages.IllegalImportDeclaration)}expectKeyword("import");specifiers=[];if(lookahead.type===Token.StringLiteral){src=parseModuleSpecifier();consumeSemicolon();return node.finishImportDeclaration(specifiers,src)}if(!matchKeyword("default")&&isIdentifierName(lookahead)){specifiers.push(parseImportDefaultSpecifier());if(match(",")){lex()}}if(match("*")){specifiers.push(parseImportNamespaceSpecifier())}else if(match("{")){specifiers=specifiers.concat(parseNamedImports())}if(!matchContextualKeyword("from")){throwError(lookahead.value?Messages.UnexpectedToken:Messages.MissingFromClause,lookahead.value)}lex();src=parseModuleSpecifier();consumeSemicolon();return node.finishImportDeclaration(specifiers,src)}function parseScriptBody(){var statement,body=[],token,directive,firstRestricted;while(startIndex<length){token=lookahead;if(token.type!==Token.StringLiteral){break}statement=parseStatementListItem();body.push(statement);if(statement.expression.type!==Syntax.Literal){break}directive=source.slice(token.start+1,token.end-1);if(directive==="use strict"){strict=true;if(firstRestricted){tolerateUnexpectedToken(firstRestricted,Messages.StrictOctalLiteral)}}else{if(!firstRestricted&&token.octal){firstRestricted=token}}}while(startIndex<length){statement=parseStatementListItem();if(typeof statement==="undefined"){break}body.push(statement)}return body}function parseProgram(){var body,node;peek();node=new Node;body=parseScriptBody();return node.finishProgram(body)}function filterTokenLocation(){var i,entry,token,tokens=[];for(i=0;i<extra.tokens.length;++i){entry=extra.tokens[i];token={type:entry.type,value:entry.value};if(entry.regex){token.regex={pattern:entry.regex.pattern,flags:entry.regex.flags}}if(extra.range){token.range=entry.range}if(extra.loc){token.loc=entry.loc}tokens.push(token)}extra.tokens=tokens}function tokenize(code,options){var toString,tokens;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;startIndex=index;startLineNumber=lineNumber;startLineStart=lineStart;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[]};extra={};options=options||{};options.tokens=true;extra.tokens=[];extra.tokenize=true;extra.openParenToken=-1;extra.openCurlyToken=-1;extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;if(typeof options.comment==="boolean"&&options.comment){extra.comments=[]}if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}try{peek();if(lookahead.type===Token.EOF){return extra.tokens}lex();while(lookahead.type!==Token.EOF){try{lex()}catch(lexError){if(extra.errors){recordError(lexError);break}else{throw lexError}}}filterTokenLocation();tokens=extra.tokens;if(typeof extra.comments!=="undefined"){tokens.comments=extra.comments}if(typeof extra.errors!=="undefined"){tokens.errors=extra.errors}}catch(e){throw e}finally{extra={}}return tokens}function parse(code,options){var program,toString;toString=String;if(typeof code!=="string"&&!(code instanceof String)){code=toString(code)}source=code;index=0;lineNumber=source.length>0?1:0;lineStart=0;startIndex=index;startLineNumber=lineNumber;startLineStart=lineStart;length=source.length;lookahead=null;state={allowIn:true,labelSet:{},inFunctionBody:false,inIteration:false,inSwitch:false,lastCommentStart:-1,curlyStack:[]};sourceType="script";strict=false;extra={};if(typeof options!=="undefined"){extra.range=typeof options.range==="boolean"&&options.range;extra.loc=typeof options.loc==="boolean"&&options.loc;extra.attachComment=typeof options.attachComment==="boolean"&&options.attachComment;if(extra.loc&&options.source!==null&&options.source!==undefined){extra.source=toString(options.source)}if(typeof options.tokens==="boolean"&&options.tokens){extra.tokens=[]}if(typeof options.comment==="boolean"&&options.comment){extra.comments=[]}if(typeof options.tolerant==="boolean"&&options.tolerant){extra.errors=[]}if(extra.attachComment){extra.range=true;extra.comments=[];extra.bottomRightStack=[];extra.trailingComments=[];extra.leadingComments=[]}if(options.sourceType==="module"){sourceType=options.sourceType;strict=true}}try{program=parseProgram();if(typeof extra.comments!=="undefined"){program.comments=extra.comments}if(typeof extra.tokens!=="undefined"){filterTokenLocation();program.tokens=extra.tokens}if(typeof extra.errors!=="undefined"){program.errors=extra.errors}}catch(e){throw e}finally{extra={}}return program}exports.version="2.2.0";exports.tokenize=tokenize;exports.parse=parse;exports.Syntax=function(){var name,types={};if(typeof Object.create==="function"){types=Object.create(null)}for(name in Syntax){if(Syntax.hasOwnProperty(name)){types[name]=Syntax[name]}}if(typeof Object.freeze==="function"){Object.freeze(types)}return types}()})},{}],123:[function(require,module,exports){(function clone(exports){"use strict";var Syntax,isArray,VisitorOption,VisitorKeys,objectCreate,objectKeys,BREAK,SKIP,REMOVE;function ignoreJSHintError(){}isArray=Array.isArray;if(!isArray){isArray=function isArray(array){return Object.prototype.toString.call(array)==="[object Array]"}}function deepCopy(obj){var ret={},key,val;for(key in obj){if(obj.hasOwnProperty(key)){val=obj[key];if(typeof val==="object"&&val!==null){ret[key]=deepCopy(val)}else{ret[key]=val}}}return ret}function shallowCopy(obj){var ret={},key;for(key in obj){if(obj.hasOwnProperty(key)){ret[key]=obj[key]}}return ret}ignoreJSHintError(shallowCopy);function upperBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){len=diff}else{i=current+1;len-=diff+1}}return i}function lowerBound(array,func){var diff,len,i,current;len=array.length;i=0;while(len){diff=len>>>1;current=i+diff;if(func(array[current])){i=current+1;len-=diff+1}else{len=diff}}return i}ignoreJSHintError(lowerBound);objectCreate=Object.create||function(){function F(){}return function(o){F.prototype=o;return new F}}();objectKeys=Object.keys||function(o){var keys=[],key;for(key in o){keys.push(key)}return keys};function extend(to,from){var keys=objectKeys(from),key,i,len;for(i=0,len=keys.length;i<len;i+=1){key=keys[i];to[key]=from[key]}return to}Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ComprehensionBlock:"ComprehensionBlock",ComprehensionExpression:"ComprehensionExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DebuggerStatement:"DebuggerStatement",DirectiveStatement:"DirectiveStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",
ForStatement:"ForStatement",ForInStatement:"ForInStatement",ForOfStatement:"ForOfStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",GeneratorExpression:"GeneratorExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",ModuleSpecifier:"ModuleSpecifier",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"};VisitorKeys={AssignmentExpression:["left","right"],AssignmentPattern:["left","right"],ArrayExpression:["elements"],ArrayPattern:["elements"],ArrowFunctionExpression:["params","body"],AwaitExpression:["argument"],BlockStatement:["body"],BinaryExpression:["left","right"],BreakStatement:["label"],CallExpression:["callee","arguments"],CatchClause:["param","body"],ClassBody:["body"],ClassDeclaration:["id","superClass","body"],ClassExpression:["id","superClass","body"],ComprehensionBlock:["left","right"],ComprehensionExpression:["blocks","filter","body"],ConditionalExpression:["test","consequent","alternate"],ContinueStatement:["label"],DebuggerStatement:[],DirectiveStatement:[],DoWhileStatement:["body","test"],EmptyStatement:[],ExportAllDeclaration:["source"],ExportDefaultDeclaration:["declaration"],ExportNamedDeclaration:["declaration","specifiers","source"],ExportSpecifier:["exported","local"],ExpressionStatement:["expression"],ForStatement:["init","test","update","body"],ForInStatement:["left","right","body"],ForOfStatement:["left","right","body"],FunctionDeclaration:["id","params","body"],FunctionExpression:["id","params","body"],GeneratorExpression:["blocks","filter","body"],Identifier:[],IfStatement:["test","consequent","alternate"],ImportDeclaration:["specifiers","source"],ImportDefaultSpecifier:["local"],ImportNamespaceSpecifier:["local"],ImportSpecifier:["imported","local"],Literal:[],LabeledStatement:["label","body"],LogicalExpression:["left","right"],MemberExpression:["object","property"],MetaProperty:["meta","property"],MethodDefinition:["key","value"],ModuleSpecifier:[],NewExpression:["callee","arguments"],ObjectExpression:["properties"],ObjectPattern:["properties"],Program:["body"],Property:["key","value"],RestElement:["argument"],ReturnStatement:["argument"],SequenceExpression:["expressions"],SpreadElement:["argument"],Super:[],SwitchStatement:["discriminant","cases"],SwitchCase:["test","consequent"],TaggedTemplateExpression:["tag","quasi"],TemplateElement:[],TemplateLiteral:["quasis","expressions"],ThisExpression:[],ThrowStatement:["argument"],TryStatement:["block","handler","finalizer"],UnaryExpression:["argument"],UpdateExpression:["argument"],VariableDeclaration:["declarations"],VariableDeclarator:["id","init"],WhileStatement:["test","body"],WithStatement:["object","body"],YieldExpression:["argument"]};BREAK={};SKIP={};REMOVE={};VisitorOption={Break:BREAK,Skip:SKIP,Remove:REMOVE};function Reference(parent,key){this.parent=parent;this.key=key}Reference.prototype.replace=function replace(node){this.parent[this.key]=node};Reference.prototype.remove=function remove(){if(isArray(this.parent)){this.parent.splice(this.key,1);return true}else{this.replace(null);return false}};function Element(node,path,wrap,ref){this.node=node;this.path=path;this.wrap=wrap;this.ref=ref}function Controller(){}Controller.prototype.path=function path(){var i,iz,j,jz,result,element;function addToPath(result,path){if(isArray(path)){for(j=0,jz=path.length;j<jz;++j){result.push(path[j])}}else{result.push(path)}}if(!this.__current.path){return null}result=[];for(i=2,iz=this.__leavelist.length;i<iz;++i){element=this.__leavelist[i];addToPath(result,element.path)}addToPath(result,this.__current.path);return result};Controller.prototype.type=function(){var node=this.current();return node.type||this.__current.wrap};Controller.prototype.parents=function parents(){var i,iz,result;result=[];for(i=1,iz=this.__leavelist.length;i<iz;++i){result.push(this.__leavelist[i].node)}return result};Controller.prototype.current=function current(){return this.__current.node};Controller.prototype.__execute=function __execute(callback,element){var previous,result;result=undefined;previous=this.__current;this.__current=element;this.__state=null;if(callback){result=callback.call(this,element.node,this.__leavelist[this.__leavelist.length-1].node)}this.__current=previous;return result};Controller.prototype.notify=function notify(flag){this.__state=flag};Controller.prototype.skip=function(){this.notify(SKIP)};Controller.prototype["break"]=function(){this.notify(BREAK)};Controller.prototype.remove=function(){this.notify(REMOVE)};Controller.prototype.__initialize=function(root,visitor){this.visitor=visitor;this.root=root;this.__worklist=[];this.__leavelist=[];this.__current=null;this.__state=null;this.__fallback=visitor.fallback==="iteration";this.__keys=VisitorKeys;if(visitor.keys){this.__keys=extend(objectCreate(this.__keys),visitor.keys)}};function isNode(node){if(node==null){return false}return typeof node==="object"&&typeof node.type==="string"}function isProperty(nodeType,key){return(nodeType===Syntax.ObjectExpression||nodeType===Syntax.ObjectPattern)&&"properties"===key}Controller.prototype.traverse=function traverse(root,visitor){var worklist,leavelist,element,node,nodeType,ret,key,current,current2,candidates,candidate,sentinel;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;worklist.push(new Element(root,null,null,null));leavelist.push(new Element(null,null,null,null));while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();ret=this.__execute(visitor.leave,element);if(this.__state===BREAK||ret===BREAK){return}continue}if(element.node){ret=this.__execute(visitor.enter,element);if(this.__state===BREAK||ret===BREAK){return}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||ret===SKIP){continue}node=element.node;nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",null)}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,null)}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,null))}}}}};Controller.prototype.replace=function replace(root,visitor){function removeElem(element){var i,key,nextElem,parent;if(element.ref.remove()){key=element.ref.key;parent=element.ref.parent;i=worklist.length;while(i--){nextElem=worklist[i];if(nextElem.ref&&nextElem.ref.parent===parent){if(nextElem.ref.key<key){break}--nextElem.ref.key}}}}var worklist,leavelist,node,nodeType,target,element,current,current2,candidates,candidate,sentinel,outer,key;this.__initialize(root,visitor);sentinel={};worklist=this.__worklist;leavelist=this.__leavelist;outer={root:root};element=new Element(root,null,null,new Reference(outer,"root"));worklist.push(element);leavelist.push(element);while(worklist.length){element=worklist.pop();if(element===sentinel){element=leavelist.pop();target=this.__execute(visitor.leave,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target)}if(this.__state===REMOVE||target===REMOVE){removeElem(element)}if(this.__state===BREAK||target===BREAK){return outer.root}continue}target=this.__execute(visitor.enter,element);if(target!==undefined&&target!==BREAK&&target!==SKIP&&target!==REMOVE){element.ref.replace(target);element.node=target}if(this.__state===REMOVE||target===REMOVE){removeElem(element);element.node=null}if(this.__state===BREAK||target===BREAK){return outer.root}node=element.node;if(!node){continue}worklist.push(sentinel);leavelist.push(element);if(this.__state===SKIP||target===SKIP){continue}nodeType=element.wrap||node.type;candidates=this.__keys[nodeType];if(!candidates){if(this.__fallback){candidates=objectKeys(node)}else{throw new Error("Unknown node type "+nodeType+".")}}current=candidates.length;while((current-=1)>=0){key=candidates[current];candidate=node[key];if(!candidate){continue}if(isArray(candidate)){current2=candidate.length;while((current2-=1)>=0){if(!candidate[current2]){continue}if(isProperty(nodeType,candidates[current])){element=new Element(candidate[current2],[key,current2],"Property",new Reference(candidate,current2))}else if(isNode(candidate[current2])){element=new Element(candidate[current2],[key,current2],null,new Reference(candidate,current2))}else{continue}worklist.push(element)}}else if(isNode(candidate)){worklist.push(new Element(candidate,key,null,new Reference(node,key)))}}}return outer.root};function traverse(root,visitor){var controller=new Controller;return controller.traverse(root,visitor)}function replace(root,visitor){var controller=new Controller;return controller.replace(root,visitor)}function extendCommentRange(comment,tokens){var target;target=upperBound(tokens,function search(token){return token.range[0]>comment.range[0]});comment.extendedRange=[comment.range[0],comment.range[1]];if(target!==tokens.length){comment.extendedRange[1]=tokens[target].range[0]}target-=1;if(target>=0){comment.extendedRange[0]=tokens[target].range[1]}return comment}function attachComments(tree,providedComments,tokens){var comments=[],comment,len,i,cursor;if(!tree.range){throw new Error("attachComments needs range information")}if(!tokens.length){if(providedComments.length){for(i=0,len=providedComments.length;i<len;i+=1){comment=deepCopy(providedComments[i]);comment.extendedRange=[0,tree.range[0]];comments.push(comment)}tree.leadingComments=comments}return tree}for(i=0,len=providedComments.length;i<len;i+=1){comments.push(extendCommentRange(deepCopy(providedComments[i]),tokens))}cursor=0;traverse(tree,{enter:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(comment.extendedRange[1]>node.range[0]){break}if(comment.extendedRange[1]===node.range[0]){if(!node.leadingComments){node.leadingComments=[]}node.leadingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});cursor=0;traverse(tree,{leave:function(node){var comment;while(cursor<comments.length){comment=comments[cursor];if(node.range[1]<comment.extendedRange[0]){break}if(node.range[1]===comment.extendedRange[0]){if(!node.trailingComments){node.trailingComments=[]}node.trailingComments.push(comment);comments.splice(cursor,1)}else{cursor+=1}}if(cursor===comments.length){return VisitorOption.Break}if(comments[cursor].extendedRange[0]>node.range[1]){return VisitorOption.Skip}}});return tree}exports.version=require("./package.json").version;exports.Syntax=Syntax;exports.traverse=traverse;exports.replace=replace;exports.attachComments=attachComments;exports.VisitorKeys=VisitorKeys;exports.VisitorOption=VisitorOption;exports.Controller=Controller;exports.cloneEnvironment=function(){return clone({})};return exports})(exports)},{"./package.json":124}],124:[function(require,module,exports){module.exports={name:"estraverse",description:"ECMAScript JS AST traversal functions",homepage:"https://github.com/estools/estraverse",main:"estraverse.js",version:"4.1.0",engines:{node:">=0.10.0"},maintainers:[{name:"constellation",email:"utatane.tea@gmail.com"},{name:"michaelficarra",email:"npm@michael.ficarra.me"}],repository:{type:"git",url:"git+ssh://git@github.com/estools/estraverse.git"},devDependencies:{chai:"^2.1.1","coffee-script":"^1.8.0",espree:"^1.11.0",gulp:"^3.8.10","gulp-bump":"^0.2.2","gulp-filter":"^2.0.0","gulp-git":"^1.0.1","gulp-tag-version":"^1.2.1",jshint:"^2.5.6",mocha:"^2.1.0"},licenses:[{type:"BSD",url:"http://github.com/estools/estraverse/raw/master/LICENSE.BSD"}],scripts:{test:"npm run-script lint && npm run-script unit-test",lint:"jshint estraverse.js","unit-test":"mocha --compilers coffee:coffee-script/register"},gitHead:"347d52996336719b5910c7ffb5ff3ea8ecb87cf3",bugs:{url:"https://github.com/estools/estraverse/issues"},_id:"estraverse@4.1.0",_shasum:"40f23a76092041be6467d7f235c933b670766e05",_from:"estraverse@>=4.0.0 <5.0.0",_npmVersion:"2.8.3",_nodeVersion:"1.8.1",_npmUser:{name:"constellation",email:"utatane.tea@gmail.com"},dist:{shasum:"40f23a76092041be6467d7f235c933b670766e05",tarball:"http://registry.npmjs.org/estraverse/-/estraverse-4.1.0.tgz"},directories:{},_resolved:"https://registry.npmjs.org/estraverse/-/estraverse-4.1.0.tgz",readme:"ERROR: No README data found!"}},{}],125:[function(require,module,exports){"use strict";function getFileData(e){if(!hasOwn.call(fileData,e))throw new Error('Unknown file "'+e+'"');return fileData[e]}var $=require("jquery"),fileData=require("../dist/fileData.js"),hasOwn={}.hasOwnProperty,uniter=require("uniter/js/main"),phpEngine=uniter.createEngine("PHP"),output=document.getElementById("output");phpEngine.configure({include:function(e,n){n.resolve(getFileData(e))}}),phpEngine.expose($,"jQuery"),phpEngine.getStdout().on("data",function(e){document.body.insertAdjacentHTML("beforeEnd",e)}),phpEngine.execute('<?php require("php/app.php");').fail(function(e){console.warn("ERROR: "+e.toString())})},{"../dist/fileData.js":1,jquery:4,"uniter/js/main":54}]},{},[125])(125)});
